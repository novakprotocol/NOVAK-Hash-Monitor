<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>NOVAK Integrity Verification Demo</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Inter", sans-serif;
    }

    /* THEME COLORS */
    :root {
      --blue: #1a4fb3;
      --blue-hover: #0f357f;
      --bg-light: #f8fafc;
      --bg-dark: #0f172a;
      --text-light: #0b1326;
      --text-dark: #e6edf5;
      --card-light: #ffffff;
      --card-dark: #1e293b;
      --border-light: #d4d8e1;
      --border-dark: #334155;
    }

    html[data-theme="light"] {
      --bg: var(--bg-light);
      --text: var(--text-light);
      --card: var(--card-light);
      --border: var(--border-light);
    }
    html[data-theme="dark"] {
      --bg: var(--bg-dark);
      --text: var(--text-dark);
      --card: var(--card-dark);
      --border: var(--border-dark);
    }

    body {
      background: var(--bg);
      color: var(--text);
      padding: 24px;
    }

    .container {
      max-width: 960px;
      margin: auto;
    }

    /* HEADER */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      gap: 12px;
      flex-wrap: wrap;
    }

    .logo {
      font-size: 34px;
      font-weight: 700;
      color: var(--blue);
    }

    /* THEME TOGGLE */
    .theme-toggle {
      cursor: pointer;
      font-size: 14px;
      border: 1px solid var(--blue);
      padding: 6px 12px;
      border-radius: 6px;
      color: var(--blue);
      background: transparent;
      transition: 0.25s;
      white-space: nowrap;
    }
    .theme-toggle:hover {
      background: var(--blue);
      color: white;
    }

    /* AUDIENCE NAV */
    .nav {
      display: flex;
      justify-content: flex-start;
      flex-wrap: wrap;
      gap: 8px;
      margin: 12px 0 12px 0;
    }
    .nav button {
      border: 1px solid var(--blue);
      background: transparent;
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: 0.25s;
      color: var(--blue);
    }
    .nav button.active,
    .nav button:hover {
      background: var(--blue);
      color: white;
    }

    /* CARD */
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 22px;
      margin-top: 24px;
    }

    /* DISMISSIBLE ONBOARDING */
    #instructionBanner {
      border-left: 6px solid var(--blue);
      display: none;
    }

    /* EXAMPLES */
    .example-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 18px;
      margin-top: 14px;
    }
    .example {
      border: 1px solid var(--border);
      padding: 14px;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.25s;
      background: var(--card);
      font-size: 14px;
    }
    .example:hover {
      background: rgba(26, 79, 179, 0.08);
      border-color: var(--blue);
    }

    /* TEXT INPUT */
    textarea {
      width: 100%;
      height: 170px;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 12px;
      background: transparent;
      font-family: "JetBrains Mono", monospace;
      font-size: 14px;
      color: var(--text);
      resize: vertical;
    }

    /* DROPZONE */
    .dropzone {
      margin-top: 18px;
      border: 2px dashed var(--blue);
      padding: 36px;
      text-align: center;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.22s;
    }
    .dropzone:hover {
      background: rgba(26, 79, 179, 0.07);
    }

    /* BUTTONS */
    .action-btn {
      margin-top: 14px;
      margin-right: 8px;
      padding: 8px 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      background: var(--blue);
      color: white;
      font-size: 14px;
      transition: 0.25s;
      white-space: nowrap;
    }
    .action-btn:hover {
      background: var(--blue-hover);
    }

    /* HASH LIST + ROWS */
    .hash-list {
      font-size: 0.82rem;
      line-height: 1.35;
    }

    .hash-row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px solid var(--border);
      gap: 8px;
    }

    .hash-label {
      width: 80px;
      font-weight: 600;
      font-family: "JetBrains Mono", monospace;
      margin-top: 2px;
    }

    .hash-value {
      overflow-wrap: anywhere;
      flex: 1;
      font-family: "JetBrains Mono", monospace;
    }

    .hash-controls {
      display: flex;
      flex-direction: column;
      gap: 4px;
      align-items: flex-end;
    }

    .copy {
      padding: 3px 8px;
      font-size: 11px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
      background: var(--blue);
      color: white;
    }

    /* RGAC */
    .rgac {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }
    .rgac .block {
      border: 1px solid var(--blue);
      border-radius: 5px;
      padding: 4px 8px;
      font-family: "JetBrains Mono", monospace;
      font-size: 11px;
    }

    /* Scrollable history container */
    .history-box {
      max-height: 240px;
      overflow-y: auto;
      padding: 12px 16px;
      border: 1px solid #d0d7de;
      background: #f6f8fa;
      font-family: ui-monospace, Menlo, Consolas, monospace;
      font-size: 0.85rem;
      white-space: pre-line;
      border-radius: 6px;
    }

    html[data-theme="dark"] .history-box {
      background: #0d1117;
      border-color: #30363d;
      color: #e6edf3;
    }

    /* Small-screen tweaks */
    @media (max-width: 600px) {
      body { padding: 16px; }
      .logo { font-size: 28px; }
      .header { align-items: flex-start; }
    }
  </style>
</head>

 <body>
  <div class="container">

    <!-- HEADER -->
    <div class="header">
      <div class="logo">NOVAK Protocol</div>
      <button class="theme-toggle" onclick="toggleTheme()">Light/Dark</button>
    </div>

    <!-- AUDIENCE NAVIGATION -->
    <div class="nav">
      <button onclick="setAudience('public')" class="active" id="btn-public">Public</button>
      <button onclick="setAudience('government')" id="btn-government">Government</button>
      <button onclick="setAudience('investor')" id="btn-investor">Investor</button>
      <button onclick="setAudience('cyber')" id="btn-cyber">Cybersecurity</button>
      <button onclick="setAudience('academic')" id="btn-academic">Academic</button>
    </div>

    <!-- WHY NOVAK ‚Äî DISMISSIBLE -->
    <div id="whyNovakCard" class="card" style="position:relative;">
      <h2>Why NOVAK ‚Äî Why Now?</h2>

      <p style="margin-top:10px;font-size:15px;line-height:1.55;">
        Today, automated systems approve loans, deny medical claims, adjust insurance rates,
        steer vehicles, filter veterans' benefits, control robots, and move billions of dollars ‚Äî
        often <strong>without proof, transparency, or accountability.</strong>
      </p>

      <p style="margin-top:12px;font-size:15px;line-height:1.55;">
        NOVAK requires every automated action ‚Äî in government, healthcare, finance, defense,
        robotics, and AI ‚Äî to generate cryptographic proof of legality <strong>before it happens.</strong>
      </p>

      <p style="margin-top:12px;font-size:15px;line-height:1.55;">
        If the data changes, a rule is wrong, or manipulation occurs, NOVAK detects it instantly
        and <strong>blocks the action safely.</strong>
      </p>

      <p style="margin-top:12px;font-size:15px;line-height:1.55;font-weight:600;">
        No blockchain. No crypto. No miners. No central server. <br>
        Just mathematical integrity and accountability.
      </p>

      <button onclick="dismissWhyNovak()" class="action-btn" style="margin-top:18px;">
        ‚úÖ Don‚Äôt show this again
      </button>

      <!-- close X -->
      <button onclick="dismissWhyNovak()" 
              style="position:absolute; top:14px; right:14px;
              background:none; border:none; font-size:20px; cursor:pointer;">
        ‚úï
      </button>
    </div>

    <!-- EXECUTIVE DESCRIPTION -->
    <p id="description" style="margin-top:24px;font-size:15px;">
      NOVAK generates a mathematical fingerprint of data. If anything changes‚Äîeven slightly‚Äîthe
      fingerprint changes instantly. Try it below.
    </p>

    <!-- EXPLAINER BUTTON SET -->
    <div style="margin-top:18px; display:flex; flex-wrap:wrap; gap:12px;">
      <button class="action-btn" onclick="toggleSimpleExplain()">I still don't get it</button>
      <button class="action-btn" onclick="toggleStillNotGettingIt()">I'm still not getting it</button>
      <button class="action-btn" onclick="toggleKeyExplain()">Key analogy</button>
      <button class="action-btn" onclick="toggleGovSavings()">Government savings</button>
      <button class="action-btn" onclick="toggleShowMe()">Show me how this works</button>
      <button class="action-btn" onclick="togglePencilExplain()">Colored pencil analogy</button>
    </div>

    <!-- EXPLAINER PANELS -->
    <div id="simpleExplain" class="card" style="display:none;margin-top:14px;"></div>
    <div id="stillExplain" class="card" style="display:none;margin-top:14px;"></div>
    <div id="keyExplain" class="card" style="display:none;margin-top:14px;"></div>
    <div id="govExplain" class="card" style="display:none;margin-top:14px;"></div>
    <div id="showExplain" class="card" style="display:none;margin-top:14px;"></div>
    <div id="pencilExplain" class="card" style="display:none;margin-top:14px;"></div>

    <!-- EXAMPLE DATASETS -->
    <div class="card" style="margin-top:22px;">
      <h3>Select an example dataset:</h3>
      <div class="example-grid">
        <div class="example" onclick="loadExample('va')">VA Disability Claim Summary</div>
        <div class="example" onclick="loadExample('medical')">Clinical Note (Healthcare)</div>
        <div class="example" onclick="loadExample('finance')">Financial Transaction Record</div>
        <div class="example" onclick="loadExample('ai')">AI Decision Output Log</div>
        <div class="example" onclick="loadExample('robotics')">Autonomous Robotics Command</div>
        <div class="example" onclick="loadExample('legal')">Legal / Policy Directive</div>
      </div>
    </div>

    <!-- INPUT + DROPZONE -->
    <div class="card">
      <textarea id="input" placeholder="Type, paste, or modify data here..."></textarea>

      <div id="dropzone" class="dropzone">
        ‚¨áÔ∏è Drag & drop a file here to verify integrity
      </div>

      <button class="action-btn" onclick="tamperTest()">Run Tamper Test</button>
      <button class="action-btn" id="compareBtn" onclick="toggleCompareMode()">Start Before/After Capture</button>
    </div>

    <!-- HASH OUTPUT -->
    <div class="card">
      <h3 id="hashHeader">Integrity Fingerprints</h3>
      <p style="font-size:13px;margin-bottom:6px;">
        All supported hashes are shown. Select one to treat as primary.
      </p>
      <div id="hashes" class="hash-list"></div>

      <p style="font-size:13px;margin-top:8px;">
        Primary Hash for certificate:
        <span id="primaryLabel" style="font-weight:600;">SHA-256</span>
      </p>

      <!-- RGAC visual -->
      <h4 style="margin-top:16px;">RGAC Chain (conceptual demo):</h4>
      <div id="rgac" class="rgac"></div>

      <button class="action-btn" onclick="exportCertificate()">Export Integrity Certificate (PDF)</button>
    </div>

    <!-- EXEC PRINT -->
    <button class="action-btn" onclick="printOnePager()">
      Generate Executive PDF Summary
    </button>

    <!-- BEFORE / AFTER -->
    <div class="card" style="margin-top:22px;">
      <h3>Before/After Comparison</h3>
      <p style="font-size:13px;margin-bottom:8px;">
        Click ‚ÄúStart Before/After Capture‚Äù, modify input, then click again.
      </p>
      <div id="comparison" class="compare-box" style="display:none;"></div>
    </div>

    <!-- MINI-GAMES -->
    <div class="card" style="margin-top:26px;text-align:center;">
      <h3>Interactive NOVAK Mini-Games</h3>
      <p style="font-size:14px;opacity:.75;margin-top:6px;">
        Learn NOVAK through play ‚Äî fraud spotting, hash matching, integrity puzzles.
      </p>

      <div style="display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-top:14px;">
        <button class="action-btn" onclick="playTamperGame()">Spot the Tampered Claim</button>
        <button class="action-btn" onclick="playHashMatch()">Hash Matching Memory</button>
        <button class="action-btn" onclick="playKeyGame()">Find the Valid Key</button>
        <button class="action-btn" onclick="playFraudDetective()">Fraud Detective Mode</button>
      </div>
    </div>

    <!-- MINI-GAME OUTPUT -->
    <div id="gameBox" class="card" style="margin-top:14px;display:none;"></div>

    <!-- GLORY TO GOD -->
    <div style="margin-top:32px;text-align:center;">
      <button class="action-btn" onclick="toggleGlorySection()">All Glory to GOD</button>
    </div>

    <div id="glorySection" class="card" style="margin-top:18px;display:none;text-align:center;">
      <h2 style="margin-bottom:14px;">All Glory to GOD</h2>

      <p style="font-size:15px;line-height:1.6;max-width:720px;margin:auto;">
        This project, this clarity, this invention ‚Äî every insight, every step forward,
        every door opened ‚Äî is because of Him. None of this belongs to me. I am only a steward.
      </p>

      <p style="font-size:15px;margin-top:14px;line-height:1.6;max-width:720px;margin:auto;">
        Thank You, Father, for wisdom, protection, creativity, courage, and purpose.
        May this serve people, protect the vulnerable, and honor You.
      </p>

      <p style="font-size:14px;margin-top:16px;opacity:.75;">
        James 1:17 ‚Äî ‚ÄúEvery good and perfect gift is from above.‚Äù
      </p>

      <p style="font-size:14px;margin-top:6px;opacity:.75;">
        Soli Deo Gloria ‚Äî To God alone be the glory.
      </p>
    </div>

    <!-- FOOTER -->
    <div class="card" style="margin-top:36px;text-align:center;font-size:12px;opacity:.75;">
      NOVAK Protocol ‚Äî Patent Pending ¬© 2025. Demonstration only ‚Äî no data transmitted or stored.
    </div>

  </div> <!-- end container -->

   <script>
/* DOM references */
const input = document.getElementById("input");
const hashesDiv = document.getElementById("hashes");
const rgacDiv = document.getElementById("rgac");
const dropzone = document.getElementById("dropzone");
const primaryLabel = document.getElementById("primaryLabel");
const comparisonBox = document.getElementById("comparison");
const compareBtn = document.getElementById("compareBtn");
const gameBox = document.getElementById("gameBox");

/* -------- AUDIENCE TEXT -------- */
const audienceText = {
  public: {
    desc: "NOVAK generates a mathematical fingerprint of data. If anything changes‚Äîeven slightly‚Äîthe fingerprint changes instantly. Try it below.",
    hash: "Integrity Fingerprints",
    timeline: "Proof History"
  },
  government: {
    desc: "NOVAK enforces cryptographic proof-before-action ‚Äî ensuring records, claims, and automated decisions cannot be altered without detection.",
    hash: "Regulatory Integrity Fingerprints",
    timeline: "Audit & Compliance Trail"
  },
  investor: {
    desc: "NOVAK prevents fraud, tampering, and unauthorized automation ‚Äî reducing systemic risk across finance, healthcare, defense & government.",
    hash: "Business Integrity Outputs",
    timeline: "Accountability Timeline"
  },
  cyber: {
    desc: "Real-time hashing for SOC, DFIR, DevSecOps, file integrity monitoring, and tamper detection.",
    hash: "Cryptographic Hash Outputs",
    timeline: "Security Event Timeline"
  },
  academic: {
    desc: "Hashes are deterministic, collision-resistant mathematical functions ‚Äî foundational to cryptography & distributed systems.",
    hash: "Cryptographic Fingerprints",
    timeline: "Research Log"
  }
};

function setAudience(a) {
  document.getElementById("description").innerText = audienceText[a].desc;
  document.getElementById("hashHeader").innerText = audienceText[a].hash;
  document.getElementById("timelineHeader").innerText = audienceText[a].timeline;
  document.querySelectorAll(".nav button").forEach(btn => btn.classList.remove("active"));
  document.getElementById(`btn-${a}`).classList.add("active");
  addTimeline(`Audience changed to ${a}`);
}

/* -------- WHY NOVAK DISMISS -------- */
function dismissWhyNovak() {
  document.getElementById("whyNovakCard").style.display = "none";
  localStorage.setItem("hideWhyNovak", "true");
  addTimeline("User dismissed Why NOVAK section");
}

window.addEventListener("DOMContentLoaded", () => {
  if (localStorage.getItem("hideWhyNovak") === "true") {
    document.getElementById("whyNovakCard").style.display = "none";
  }
});

/* -------- THEME TOGGLE -------- */
function toggleTheme() {
  const html = document.documentElement;
  html.dataset.theme = html.dataset.theme === "dark" ? "light" : "dark";
  addTimeline(`Theme changed to ${html.dataset.theme}`);
}

/* -------- EXAMPLE DATASETS -------- */
const examples = {
  va: `Veteran: John Sample
Claim Type: Degenerative Joint Disease
Status: Pending C&P Review
Evidence: MRI confirming L5-S1 disc narrowing
Requested Rating Increase: 10% ‚Üí 40%`,
  medical: `Patient DOB: 1978-02-14
Diagnosis: Atrial fibrillation
Medication Change: Metoprolol 25mg BID
Follow-Up: 6 weeks`,
  finance: `Transaction ID: 9938172-AX
Account: Commercial Checking
Amount: $248,932.17
Purpose: Federal subcontract payment`,
  ai: `Autonomous System Output:
Confidence: 0.92
Recommended Action: Approve
Input Source: Document classifier model`,
  robotics: `Command ID: R-2043
Unit: Surgical Robot Arm
Instruction: Move 3.2mm posterior
Safety Flag: TRUE`,
  legal: `Directive ID: SEC-782-A
Policy: Data Tamper Prevention
Effective: March 2025
Applies To: All automated systems`
};

function loadExample(type) {
  input.value = examples[type];
  compute();
  addTimeline(`Loaded example dataset: ${type}`);
}

/* -------- EXPLAINER TOGGLING -------- */
function hideAllExplainers() {
  ["simpleExplain","stillExplain","keyExplain","govExplain","showExplain","pencilExplain"]
    .forEach(id => document.getElementById(id).style.display = "none");
}

function toggleSimpleExplain() {
  const box = document.getElementById("simpleExplain");
  const visible = box.style.display === "block";
  hideAllExplainers();
  box.style.display = visible ? "none" : "block";
  addTimeline("User opened: I still don't get it");
}

function toggleStillNotGettingIt() {
  const box = document.getElementById("stillExplain");
  const visible = box.style.display === "block";
  hideAllExplainers();
  box.innerHTML = `
    <h3>Wait ‚Äî don‚Äôt we already do this today?</h3>
    <p style="margin-top:10px;font-size:15px;line-height:1.55;">
      Not really. Most systems take action first ‚Äî and only later does someone audit,
      investigate, or inspect what happened. Fraud, errors, and tampering often get
      discovered <strong>after damage is done</strong>.
    </p>
    <p style="margin-top:10px;font-size:15px;line-height:1.55;">
      NOVAK flips the model. It demands mathematical proof
      <strong>before automation acts</strong>.
    </p>
  `;
  box.style.display = visible ? "none" : "block";
  addTimeline("User opened: Still not getting it");
}

function toggleKeyExplain() {
  const box = document.getElementById("keyExplain");
  const visible = box.style.display === "block";
  hideAllExplainers();
  box.style.display = visible ? "none" : "block";
  addTimeline("User opened: Key analogy");
}

function toggleGovSavings() {
  const box = document.getElementById("govExplain");
  const visible = box.style.display === "block";
  hideAllExplainers();
  box.style.display = visible ? "none" : "block";
  addTimeline("User opened: Government savings");
}

function toggleShowMe() {
  const box = document.getElementById("showExplain");
  const visible = box.style.display === "block";
  hideAllExplainers();
  box.style.display = visible ? "none" : "block";
  addTimeline("User opened: Show me how this works");
}

function togglePencilExplain() {
  const box = document.getElementById("pencilExplain");
  const visible = box.style.display === "block";
  hideAllExplainers();
  box.style.display = visible ? "none" : "block";
  addTimeline("User opened: Colored pencil analogy");
}

/* -------- HASHING -------- */
const algorithms = ["SHA-1","SHA-256","SHA-384","SHA-512"];
let lastHashes = {};
let primaryHash = "SHA-256";

async function compute() {
  const encoder = new TextEncoder();
  const data = encoder.encode(input.value);
  let rows = "";
  lastHashes = {};

  for (const algo of algorithms) {
    try {
      const digest = await crypto.subtle.digest(algo, data);
      const hex = [...new Uint8Array(digest)]
        .map(b => b.toString(16).padStart(2,"0"))
        .join("");
      lastHashes[algo] = hex;

      rows += `
        <div class="hash-row">
          <span class="hash-label">${algo}</span>
          <span class="hash-value">${hex}</span>
          <div class="hash-controls">
            <label style="font-size:11px;">
              <input type="radio" name="primary" value="${algo}"
              ${algo === primaryHash ? "checked" : ""}
              onclick="setPrimary('${algo}')"> primary
            </label>
            <button class="copy" onclick="navigator.clipboard.writeText('${hex}')">Copy</button>
          </div>
        </div>`;
    } catch {
      rows += `<div class="hash-row">${algo} not supported</div>`;
    }
  }

  hashesDiv.innerHTML = rows;
  primaryLabel.innerText = primaryHash;
  updateRGAC(lastHashes[primaryHash]);
  addTimeline("Integrity fingerprints updated");
}

input.addEventListener("input", compute);

/* -------- PRIMARY HASH SELECT -------- */
function setPrimary(algo) {
  primaryHash = algo;
  primaryLabel.innerText = algo;
  addTimeline(`Primary hash changed to ${algo}`);
}

/* -------- RGAC DEMO -------- */
let rgacBlocks = [];
function updateRGAC(hash) {
  if (!hash) return;
  rgacBlocks.push(hash.slice(0,10));
  if (rgacBlocks.length > 6) rgacBlocks.shift();
  rgacDiv.innerHTML = rgacBlocks.map(h => `<div class="block">${h}</div>`).join("");
}

/* -------- FILE DROP -------- */
dropzone.addEventListener("dragover", e => e.preventDefault());
dropzone.addEventListener("drop", async e => {
  e.preventDefault();
  const file = e.dataTransfer.files[0];
  if (!file) return;
  input.value = await file.text();
  compute();
  addTimeline(`Loaded file: ${file.name}`);
});

/* -------- TAMPER TEST -------- */
function tamperTest() {
  input.value += "\n\n‚ö†Ô∏è Unauthorized Modification Detected";
  compute();
  addTimeline("Tamper Test: injected unauthorized change");
}

/* -------- BEFORE / AFTER -------- */
let beforeSnapshot = null;

function toggleCompareMode() {
  if (!beforeSnapshot) {
    beforeSnapshot = {
      input: input.value,
      hashes: { ...lastHashes },
      time: new Date().toLocaleTimeString()
    };
    compareBtn.innerText = "Complete Comparison";
    addTimeline("Captured BEFORE state");
  } else {
    const after = {
      input: input.value,
      hashes: { ...lastHashes },
      time: new Date().toLocaleTimeString()
    };

    let html = `<strong>BEFORE:</strong> ${beforeSnapshot.time}<br>
                <strong>AFTER:</strong> ${after.time}<hr>`;

    for (const algo of algorithms) {
      const b = beforeSnapshot.hashes[algo] || "";
      const a = after.hashes[algo] || "";
      const changed = b !== a;
      html += `
        <div class="compare-row">
          <span class="compare-label">${algo}</span>
          <span class="compare-before">${b || "(none)"}</span>
          <span class="compare-after" style="color:${changed ? "#dc2626" : ""};">
            ${a || "(none)"}
          </span>
        </div>`;
    }

    comparisonBox.innerHTML = html;
    comparisonBox.style.display = "block";
    beforeSnapshot = null;
    compareBtn.innerText = "Start Before/After Capture";
    addTimeline("Completed BEFORE/AFTER comparison");
  }
}

/* -------- TIMELINE -------- */
function addTimeline(msg) {
  const box = document.getElementById("proofHistory");
  if (!box) return;
  box.textContent += `[${new Date().toLocaleTimeString()}] ${msg}\n`;
  box.scrollTop = box.scrollHeight;
}

/* -------- MINI-GAMES -------- */
function clearGame() {
  gameBox.style.display = "none";
  gameBox.innerHTML = "";
}

function playTamperGame() {
  gameBox.innerHTML = `
    <h3>Spot the Tampered Claim üîç</h3>
    <p style="margin-top:8px;">Two records look identical ‚Äî but one has been altered.</p>
  `;
  gameBox.style.display = "block";
  addTimeline("Mini-game opened: Tampered Claim");
}

function playHashMatch() {
  gameBox.innerHTML = `
    <h3>Hash Matching Memory üß†</h3>
    <p style="margin-top:8px;">Match the dataset to its fingerprint.</p>
  `;
  gameBox.style.display = "block";
  addTimeline("Mini-game opened: Hash Match");
}

function playKeyGame() {
  gameBox.innerHTML = `
    <h3>Find the Valid Key üîë</h3>
    <p style="margin-top:8px;">Only one dataset unlocks the required hash.</p>
  `;
  gameBox.style.display = "block";
  addTimeline("Mini-game opened: Key Game");
}

function playFraudDetective() {
  gameBox.innerHTML = `
    <h3>Fraud Detective Mode üïµÔ∏è‚Äç‚ôÇÔ∏è</h3>
    <p style="margin-top:8px;">Modify the text until NOVAK detects tampering.</p>
  `;
  gameBox.style.display = "block";
  addTimeline("Mini-game opened: Fraud Detective");
}

/* -------- GLORY TO GOD COLLAPSE -------- */
function toggleGlorySection() {
  const box = document.getElementById("glorySection");
  box.style.display = box.style.display === "block" ? "none" : "block";
  addTimeline("User toggled Glory to God section");
}

/* -------- INIT -------- */
setAudience("public");
compute();
</script>

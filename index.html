<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>NOVAK Integrity Verification Demo</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet" />

  <style>
  /* RESET + BASE */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Inter", sans-serif;
  }

  html, body {
    scroll-behavior: smooth;
  }

  body {
    background: var(--bg);
    color: var(--text);
    padding: 24px;
  }

  .container {
    max-width: 1150px;
    margin: auto;
  }

  /* COLOR SYSTEM */
  :root {
    --blue: #1a4fb3;
    --blue-hover: #0f357f;
    --green: #159b4c;
    --red: #c42121;
    --yellow: #e6b800;

    --bg-light: #f8fafc;
    --bg-dark: #0f172a;

    --text-light: #0b1326;
    --text-dark: #e6edf5;

    --card-light: #ffffff;
    --card-dark: #1e293b;

    --border-light: #d4d8e1;
    --border-dark: #334155;
  }

  html[data-theme="light"] {
    --bg: var(--bg-light);
    --text: var(--text-light);
    --card: var(--card-light);
    --border: var(--border-light);
  }

  html[data-theme="dark"] {
    --bg: var(--bg-dark);
    --text: var(--text-dark);
    --card: var(--card-dark);
    --border: var(--border-dark);
  }

  /* HEADER */
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 14px;
    flex-wrap: wrap;
    margin-bottom: 12px;
  }

  .logo {
    font-size: 34px;
    font-weight: 700;
    color: var(--blue);
  }

  /* Site link */
  .home-link {
    font-size: 16px;
    color: var(--blue);
    text-decoration: none;
    font-weight: 600;
    border-bottom: 2px solid transparent;
    transition: 0.25s;
  }
  .home-link:hover {
    border-bottom: 2px solid var(--blue);
  }

  /* THEME TOGGLE */
  .theme-toggle {
    cursor: pointer;
    font-size: 14px;
    border: 1px solid var(--blue);
    padding: 7px 14px;
    border-radius: 6px;
    background: transparent;
    color: var(--blue);
    transition: 0.25s;
  }
  .theme-toggle:hover {
    background: var(--blue);
    color: white;
  }

  /* AUDIENCE NAV */
  .nav {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 16px 0;
  }
  .nav button {
    border: 1px solid var(--blue);
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    background: transparent;
    color: var(--blue);
    transition: 0.25s;
    font-size: 14px;
  }
  .nav button:hover,
  .nav button.active {
    background: var(--blue);
    color: white;
  }

  /* CARD */
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 22px;
    margin-top: 22px;
    animation: fadeIn 0.45s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* EXPLAIN BUTTON ROW */
  .explain-btn-row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 18px;
  }

  /* ACTION BUTTONS */
  .action-btn {
    background: var(--blue);
    color: white;
    border: none;
    padding: 9px 16px;
    border-radius: 7px;
    cursor: pointer;
    font-size: 14px;
    transition: 0.25s;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .action-btn:hover {
    background: var(--blue-hover);
  }

  /* EXPLAINERS */
  .explainer {
    display: none;
    overflow: hidden;
    padding: 22px;
    animation: expand 0.35s ease;
  }

  @keyframes expand {
    from { opacity: 0; transform: scale(0.975); }
    to { opacity: 1; transform: scale(1); }
  }

  /* EXAMPLE DATA */
  .example-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 14px;
    margin-top: 14px;
  }

  .example {
    background: var(--card);
    border: 1px solid var(--border);
    padding: 14px;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.25s;
  }
  .example:hover {
    border-color: var(--blue);
    background: rgba(26, 79, 179, 0.1);
  }

  /* TEXTAREA */
  textarea {
    width: 100%;
    height: 180px;
    border-radius: 7px;
    border: 1px solid var(--border);
    padding: 12px;
    background: transparent;
    font-family: "JetBrains Mono", monospace;
    font-size: 14px;
    resize: vertical;
    color: var(--text);
  }

  /* DROPZONE */
  .dropzone {
    margin-top: 16px;
    border: 2px dashed var(--blue);
    padding: 34px;
    border-radius: 8px;
    text-align: center;
    transition: 0.25s;
    cursor: pointer;
  }
  .dropzone:hover {
    background: rgba(26, 79, 179, 0.08);
  }

  /* HASH LIST */
  .hash-list {
    margin-top: 10px;
  }

  .hash-row {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    border-bottom: 1px solid var(--border);
  }

  .hash-label {
    width: 80px;
    font-weight: 600;
    font-family: "JetBrains Mono", monospace;
  }

  .hash-value {
    flex: 1;
    word-break: break-all;
    font-family: "JetBrains Mono", monospace;
  }

  .copy {
    font-size: 11px;
    padding: 4px 7px;
    border-radius: 5px;
    background: var(--blue);
    color: white;
    border: none;
    cursor: pointer;
  }

  /* RGAC BLOCKS */
  .rgac {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    margin-top: 10px;
  }

  .block {
    border: 1px solid var(--blue);
    padding: 4px 6px;
    border-radius: 6px;
    font-size: 11px;
    font-family: "JetBrains Mono", monospace;
  }

  /* TIMELINE */
  .history-box {
    border: 1px solid var(--border);
    background: rgba(0,0,0,0.04);
    padding: 14px;
    border-radius: 6px;
    max-height: 230px;
    overflow-y: auto;
    font-family: "JetBrains Mono", monospace;
    font-size: 13px;
  }
  html[data-theme="dark"] .history-box {
    background: #0e1525;
  }

  /* MOBILE */
  @media (max-width: 600px) {
    body { padding: 14px; }
    .logo { font-size: 26px; }
  }
  </style>

</head>
<body>
<div class="container">

  <!-- WHY NOVAK ‚Äî WHY NOW -->
  <section id="whyNovakCard" class="card dismissible">
    <h2>Why NOVAK ‚Äî Why Now?</h2>

    <p>
      Modern automation approves loans, denies medical claims, moves money,
      processes veterans‚Äô benefits, navigates vehicles, and runs critical
      infrastructure ‚Äî often without proof, transparency, or accountability.
    </p>

    <p>
      NOVAK requires every automated action to generate mathematical proof
      of legality <strong>before execution</strong>.
    </p>

    <p>
      If data changes, rules drift, software fails, or tampering occurs,
      NOVAK detects it instantly ‚Äî and stops the action safely.
    </p>

    <p class="tight">
      ‚úÖ Every input produces a unique fingerprint<br>
      ‚úÖ Change anything ‚Äî fingerprint changes instantly
    </p>

    <p class="analogy">
      SHA-256 is the steel ‚Äî NOVAK is the vault protecting what automation must never change.
    </p>

    <button class="action-btn" onclick="dismissWhyNovak()">‚úÖ Don‚Äôt show this again</button>
    <button class="close-x" onclick="dismissWhyNovak()">‚úï</button>
  </section>


  <!-- AUDIENCE-AWARE DESCRIPTION -->
  <p id="description" class="description">
    NOVAK generates a mathematical fingerprint of data. If anything changes ‚Äî
    even slightly ‚Äî the fingerprint changes instantly. Try it below.
  </p>


  <!-- EXPLAINER BUTTONS -->
  <div class="explain-btn-row">
    <button class="action-btn" onclick="toggleExplainer('expPuzzle')">üß© Puzzle Analogy</button>
    <button class="action-btn" onclick="toggleExplainer('expMilkshake')">ü•§ Milkshake Analogy</button>
    <button class="action-btn" onclick="toggleExplainer('expColor')">üñçÔ∏è Colored Pencil Analogy</button>
    <button class="action-btn" onclick="toggleExplainer('expKey')">üîë Key Analogy</button>
    <button class="action-btn" onclick="toggleExplainer('expGov')">üèõÔ∏è Government Savings</button>
    <button class="action-btn" onclick="toggleExplainer('expHow')">üëÄ Show Me How This Works</button>
  </div>


  <!-- COLLAPSIBLE EXPLAINERS -->
  <section id="expPuzzle" class="card explainer">
    <h3>The Puzzle Analogy üß©</h3>
    <p>
      Think of a completed puzzle ‚Äî take a picture of it. That picture is your
      hash: a mathematical fingerprint of the exact state.
    </p>
    <p>
      If someone moves even one piece, the new picture looks different ‚Äî
      so does the hash. NOVAK constantly compares those pictures.
    </p>
    <p><strong>If the picture changes, the action does NOT proceed.</strong></p>
  </section>

  <section id="expMilkshake" class="card explainer">
    <h3>The Milkshake Analogy ü•§</h3>
    <p>
      If you blend strawberries, vanilla ice cream, and milk,
      you know exactly what flavor should come out.
    </p>
    <p>
      If the output suddenly tastes like chocolate, something went wrong ‚Äî
      the input changed.
    </p>
    <p>
      NOVAK guarantees <strong>the output always matches the ingredients</strong>.
      If not, the system must stop and prove why.
    </p>
  </section>

  <section id="expColor" class="card explainer">
    <h3>The Colored Pencil Analogy üñçÔ∏è</h3>
    <p>
      Imagine a box of colored pencils sealed at the factory.
      It lists every color ‚Äî so you know what‚Äôs inside.
    </p>
    <p>
      If someone opens the box and swaps one pencil,
      the seal breaks ‚Äî proof of tampering.
    </p>
    <p>
      NOVAK is the unbreakable seal ‚Äî if anything changes,
      the fingerprint exposes it instantly.
    </p>
  </section>

  <section id="expKey" class="card explainer">
    <h3>The Key Analogy üîë</h3>
    <p>
      You have different keys for different things ‚Äî
      a diary, a bike lock, a house, a car.
    </p>
    <p>
      NOVAK works the same way ‚Äî except the ‚Äúkey‚Äù is a cryptographic match
      between data, rules, and decisions.
    </p>
    <p><strong>Wrong key? The system stays locked ‚Äî safely.</strong></p>
  </section>

  <section id="expGov" class="card explainer">
    <h3>Government Savings üèõÔ∏è</h3>
    <ul style="margin-left:18px; margin-top:10px;">
      <li>Stops improper payments before they go out</li>
      <li>Detects data manipulation instantly</li>
      <li>Eliminates rework, appeals, and adjudication waste</li>
      <li>Makes audits mathematical instead of manual</li>
      <li>Reduces fraud, litigation, and systemic risk</li>
    </ul>
    <p style="margin-top:14px;">
      ‚úÖ <strong>Is this technically possible today?</strong><br>
      Yes ‚Äî every technology used in NOVAK already exists:
      SHA-256, digital signatures, execution checkpoints,
      audit chains, and data determinism.
    </p>
    <p style="margin-top:14px; font-weight:600;">
      Government doesn‚Äôt need new hardware ‚Äî just a new rule:
      <em>Prove it before executing it.</em>
    </p>
  </section>

  <section id="expHow" class="card explainer">
    <h3>How This Demo Works üëÄ</h3>
    <ol style="margin-left:18px; margin-top:10px;">
      <li>You enter or load data</li>
      <li>NOVAK generates multiple cryptographic hashes</li>
      <li>Each hash is a precise mathematical fingerprint</li>
      <li>Change one character ‚Üí every fingerprint updates</li>
      <li>Tampering, errors, corruption become undeniable</li>
    </ol>
    <p style="margin-top:14px;">
      NOVAK doesn‚Äôt assume ‚Äî it <strong>proves</strong>.
    </p>
  </section>


  <!-- EXAMPLE DATASETS -->
  <section class="card">
    <h3>Select an example dataset:</h3>
    <div class="example-grid">
      <div class="example" onclick="loadExample('va')">VA Disability Claim Summary</div>
      <div class="example" onclick="loadExample('medical')">Clinical Note</div>
      <div class="example" onclick="loadExample('finance')">Financial Transaction</div>
      <div class="example" onclick="loadExample('ai')">AI Decision Output</div>
      <div class="example" onclick="loadExample('robot')">Robotics Command</div>
      <div class="example" onclick="loadExample('legal')">Legal Directive</div>
    </div>
  </section>


  <!-- TEXT INPUT + FILE DROP -->
  <section class="card">
    <textarea id="input" placeholder="Type, paste, or modify data here..."></textarea>

    <div id="dropzone" class="dropzone">
      ‚¨áÔ∏è Drag & drop a file here to verify integrity
    </div>

    <button class="action-btn" onclick="tamperTest()">üö® Run Tamper Test</button>
    <button class="action-btn" id="compareBtn" onclick="toggleCompareMode()">
      Start Before/After Capture
    </button>
  </section>


  <!-- HASH OUTPUT -->
  <section class="card">
    <h3 id="hashHeader">Integrity Fingerprints</h3>
    <p class="micro">All supported hashes shown ‚Äî select one as primary.</p>

    <div id="hashes" class="hash-list"></div>

    <p class="micro">
      Primary Hash for certificate:
      <strong id="primaryLabel">SHA-256</strong>
    </p>

    <h4>RGAC Chain (Conceptual Demo)</h4>
    <div id="rgac" class="rgac"></div>

    <button class="action-btn" onclick="exportCertificate()">üìÑ Export Integrity Certificate (PDF)</button>
  </section>


  <!-- BEFORE/AFTER COMPARISON -->
  <section class="card">
    <h3>Before / After Comparison</h3>
    <p class="micro">Capture, modify, then compare fingerprints</p>
    <div id="comparison" class="compare-box" style="display:none;"></div>
  </section>


  <!-- MINI-GAMES -->
  <section class="card" id="gamesCard">
    <h3>Interactive NOVAK Mini-Games</h3>
    <p class="micro">Learn NOVAK through real-world integrity scenarios</p>

    <div class="game-btn-row">
      <button class="action-btn" onclick="startTamperGame()">üïµÔ∏è Spot the Tamper</button>
      <button class="action-btn" onclick="startHashMatch()">üß© Hash Match</button>
      <button class="action-btn" onclick="startKeyGame()">üîê Find the Valid Key</button>
      <button class="action-btn" onclick="startFraudDetective()">üö® Fraud Detective</button>
    </div>
  </section>


  <!-- GAME DISPLAY -->
  <section id="gameBox" class="card" style="display:none;"></section>


  <!-- TIMELINE -->
  <section class="card">
    <h3 id="timelineHeader">Proof History</h3>
    <div id="proofHistory" class="history-box"></div>
  </section>


  <!-- GLORY TO GOD -->
  <section style="text-align:center; margin-top:28px;">
    <button class="action-btn" onclick="toggleGlory()">üôè Glory to God</button>
  </section>

  <section id="glorySection" class="card" style="display:none;">
    <h3>All Glory to God üôè</h3>

    <p>
      This work does not exist because of luck, brilliance, or coincidence ‚Äî
      but because truth itself is discoverable.
    </p>

    <p>
      <strong>Proverbs 12:22</strong><br>
      ‚ÄúThe Lord detests lying lips, but delights in those who deal truthfully.‚Äù
    </p>

    <p>
      NOVAK protects truth in automated systems ‚Äî ensuring decisions,
      payments, benefits, and records cannot lie.
    </p>

    <p>
      Everything good in this work belongs to God.
      Everything flawed belongs to me.
    </p>

    <p>
      No data collected, transmitted, stored, logged, or shared ‚Äî ever.
    </p>
  </section>

  <script>
/* ========= GLOBAL ELEMENT REFERENCES ========= */
const input = document.getElementById("input");
const hashesDiv = document.getElementById("hashes");
const primaryLabel = document.getElementById("primaryLabel");
const rgacDiv = document.getElementById("rgac");
const comparisonBox = document.getElementById("comparison");
const compareBtn = document.getElementById("compareBtn");
const gameBox = document.getElementById("gameBox");
const timelineBox = document.getElementById("proofHistory");

/* ========= STATE ========= */
let lastHashes = {};
let primaryHash = "SHA-256";
let beforeSnapshot = null;
let rgacBlocks = [];
let soundEnabled = false;

/* ========= THEME TOGGLE & MEMORY ========= */
document.getElementById("themeToggle").addEventListener("click", toggleTheme);

function toggleTheme() {
  const html = document.documentElement;
  html.dataset.theme = html.dataset.theme === "dark" ? "light" : "dark";
  localStorage.setItem("theme", html.dataset.theme);
}

(function initTheme() {
  const saved = localStorage.getItem("theme");
  if (saved) document.documentElement.dataset.theme = saved;
})();

/* ========= AUDIENCE TEXT ========= */
const audienceText = {
  public: {
    desc: "NOVAK proves data integrity instantly ‚Äî no tech degree required.",
    hash: "Integrity Fingerprints",
    timeline: "Proof History"
  },
  government: {
    desc: "NOVAK enforces proof-before-payment, stopping improper decisions.",
    hash: "Regulatory Fingerprints",
    timeline: "Audit & Compliance Trail"
  },
  investor: {
    desc: "Tampering becomes mathematically impossible to hide ‚Äî reducing systemic risk.",
    hash: "Business Integrity Outputs",
    timeline: "Accountability Timeline"
  },
  cyber: {
    desc: "Ideal for SOC, DFIR, DevSecOps, zero-trust, and supply chain integrity.",
    hash: "Cryptographic Hash Outputs",
    timeline: "Security Event Timeline"
  },
  academic: {
    desc: "Deterministic hashing ‚Äî perfect for demonstrations & research.",
    hash: "Cryptographic Fingerprints",
    timeline: "Research Log"
  }
};

function setAudience(a) {
  document.getElementById("description").innerText = audienceText[a].desc;
  document.getElementById("hashHeader").innerText = audienceText[a].hash;
  document.getElementById("timelineHeader").innerText = audienceText[a].timeline;
  document.querySelectorAll(".nav button").forEach(btn => btn.classList.remove("active"));
  document.getElementById(`btn-${a}`).classList.add("active");
  addTimeline(`Audience changed to: ${a}`);
}

/* ========= WHY NOVAK MEMORY ========= */
function dismissWhyNovak() {
  document.getElementById("whyNovakCard").style.display = "none";
  localStorage.setItem("hideWhyNovak", "1");
  addTimeline("User dismissed Why NOVAK section");
}

(function restoreWhyNovak() {
  if (localStorage.getItem("hideWhyNovak") === "1") {
    document.getElementById("whyNovakCard").style.display = "none";
  }
})();

/* ========= HASHING ENGINE ========= */
const algorithms = [
  "SHA-1",
  "SHA-256",
  "SHA-384",
  "SHA-512",
  "SHA3-256",
  "SHA3-512"
];

async function compute() {
  const encoder = new TextEncoder();
  const data = encoder.encode(input.value);

  lastHashes = {};
  let html = "";

  for (const algo of algorithms) {
    try {
      const digest = await crypto.subtle.digest(algo, data);
      const hex = [...new Uint8Array(digest)]
        .map(x => x.toString(16).padStart(2, "0"))
        .join("");

      lastHashes[algo] = hex;

      html += `
        <div class="hash-row">
          <span class="hash-label">${algo}</span>
          <span class="hash-value">${hex}</span>
          <label style="font-size:11px;">
            <input type="radio" name="primary" value="${algo}"
            ${algo === primaryHash ? "checked" : ""}
            onclick="setPrimary('${algo}')"> primary
          </label>
        </div>`;
    } catch {
      html += `<div class="hash-row">${algo} not supported on this browser.</div>`;
    }
  }

  hashesDiv.innerHTML = html;
  primaryLabel.innerText = primaryHash;
  updateRGAC(lastHashes[primaryHash]);
  addTimeline("Hashes updated");
}

input.addEventListener("input", compute);

/* ========= PRIMARY HASH SELECTOR ========= */
function setPrimary(algo) {
  primaryHash = algo;
  primaryLabel.innerText = algo;
  addTimeline(`Primary hash changed to ${algo}`);
}

/* ========= RGAC DEMO ========= */
function updateRGAC(hash) {
  if (!hash) return;
  rgacBlocks.push(hash.slice(0, 10));
  if (rgacBlocks.length > 7) rgacBlocks.shift();
  rgacDiv.innerHTML = rgacBlocks.map(h => `<div class="block">${h}</div>`).join("");
}

/* ========= EXPLANATION PANEL TOGGLER ========= */
function toggleExplainer(id) {
  document.querySelectorAll(".explainer")
    .forEach(e => e.style.display = e.id === id && e.style.display !== "block" ? "block" : "none");

  const box = document.getElementById(id);
  if (box.style.display === "block") {
    box.scrollIntoView({ behavior: "smooth", block: "center" });
    addTimeline(`Opened explainer: ${id}`);
  } else {
    addTimeline(`Collapsed explainer: ${id}`);
  }
}

/* ========= EXAMPLE DATASETS ========= */
const examples = {
  va: `Veteran: John Sample
Claim Type: Lumbar Spine
Requested Rating: 40%
C&P Exam: Completed`,
  medical: `Patient: 54M
Diagnosis: Atrial fibrillation
Medication: Metoprolol 25mg BID`,
  finance: `Transaction ID: 8893-A
Amount: $248,932.17
Purpose: Federal payment release`,
  ai: `AI Output:
Confidence: 0.92
Action: Approve Case`,
  robot: `Robot Command:
Move: 3.2mm posterior
Safety Lock: Enabled`,
  legal: `Directive ID: SEC-724
Policy: Data Integrity Enforcement
Effective: March 2025`
};

function loadExample(x) {
  input.value = examples[x];
  compute();
  addTimeline(`Loaded dataset example: ${x}`);
}

/* ========= FILE DROP HASHING ========= */
dropzone.addEventListener("dragover", e => e.preventDefault());
dropzone.addEventListener("drop", async e => {
  e.preventDefault();
  const file = e.dataTransfer.files[0];
  if (!file) return;
  input.value = await file.text();
  compute();
  addTimeline(`File imported: ${file.name}`);
});

/* ========= TAMPER TEST ========= */
function tamperTest() {
  input.value += "\nüö® UNAUTHORIZED CHANGE DETECTED";
  compute();
  addTimeline("Tamper test executed");
}

/* ========= BEFORE/AFTER COMPARISON ========= */
function toggleCompareMode() {
  if (!beforeSnapshot) {
    beforeSnapshot = {
      input: input.value,
      hashes: { ...lastHashes },
      time: new Date().toLocaleTimeString()
    };
    compareBtn.innerText = "Finish Comparison";
    addTimeline("Before-state captured ‚Äî modify input");
  } else {
    let html = `<strong>BEFORE:</strong> ${beforeSnapshot.time}<br>
                <strong>AFTER:</strong> ${new Date().toLocaleTimeString()}<hr><br>`;

    for (const algo of algorithms) {
      const changed = beforeSnapshot.hashes[algo] !== lastHashes[algo];
      html += `<div class="compare-row">
        <span>${algo}</span>
        <span>${beforeSnapshot.hashes[algo]}</span>
        <span style="color:${changed ? "#c42121" : "#159b4c"};">
          ${lastHashes[algo]}
        </span>
      </div>`;
    }

    comparisonBox.innerHTML = html;
    comparisonBox.style.display = "block";
    compareBtn.innerText = "Start Before/After Capture";
    beforeSnapshot = null;
    addTimeline("Before/After comparison completed");
  }
}

/* ========= TIMELINE LOGGER ========= */
function addTimeline(msg) {
  timelineBox.textContent += `[${new Date().toLocaleTimeString()}] ${msg}\n`;
  timelineBox.scrollTop = timelineBox.scrollHeight;
}

/* ========= MINI-GAMES ========= */
function startTamperGame() {
  gameBox.style.display = "block";
  gameBox.innerHTML = `
    <h3>Spot the Tamper üïµÔ∏è</h3>
    <p>One of these changed ‚Äî which?</p>
    <button class="action-btn" onclick="wrong()">Claim A</button>
    <button class="action-btn" onclick="correct()">Claim B</button>`;
  gameBox.scrollIntoView({ behavior: "smooth", block: "center" });
  addTimeline("Tamper game started");
}

function correct() {
  alert("‚úÖ Correct ‚Äî NOVAK would flag this instantly.");
  addTimeline("User answered correctly in Tamper Game");
}

function wrong() {
  alert("‚ùå Not quite ‚Äî try again.");
  addTimeline("User answered incorrectly in Tamper Game");
}

/* ========= KEY GAME ========= */
function startKeyGame() {
  gameBox.style.display = "block";
  gameBox.innerHTML = `
    <h3>Find the Valid Key üîê</h3>
    <p>Only one dataset produces the certified hash. Choose wisely.</p>
    <button class="action-btn" onclick="correct()">Dataset #3</button>
    <button class="action-btn" onclick="wrong()">Dataset #1</button>
    <button class="action-btn" onclick="wrong()">Dataset #2</button>`;
  gameBox.scrollIntoView({ behavior: "smooth", block: "center" });
  addTimeline("Key game started");
}

/* ========= FRAUD DETECTIVE ========= */
function startFraudDetective() {
  gameBox.style.display = "block";
  gameBox.innerHTML = `
    <h3>Fraud Detective üö®</h3>
    <p>Modify input until NOVAK detects tampering ‚Äî watch fingerprints change.</p>`;
  gameBox.scrollIntoView({ behavior: "smooth", block: "center" });
  addTimeline("Fraud Detective mode enabled");
}

/* ========= JSON EXPORT ========= */
function exportJSON() {
  const data = {
    timestamp: new Date().toISOString(),
    primaryHash,
    hashes: lastHashes,
    input: input.value
  };
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
  const url = URL.createObjectURL(blob);

  const a = document.createElement("a");
  a.href = url;
  a.download = "novak-proof.json";
  a.click();
  addTimeline("JSON export generated");
}

/* ========= GLORY SECTION ========= */
function toggleGlory() {
  const box = document.getElementById("glorySection");
  box.style.display = box.style.display === "none" ? "block" : "none";
  box.scrollIntoView({ behavior: "smooth", block: "center" });
  addTimeline("Glory to God section toggled");
}

/* ========= INIT ========= */
setAudience("public");
compute();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>NOVAK Integrity Verification Demo</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet" />
</head>

<body>
<div class="container">

  <!-- HEADER -->
  <header class="header">
    <div class="logo">NOVAK Protocol</div>

    <a href="http://www.novakprotocol.com" target="_blank" class="home-link">
      http://www.novakprotocol.com
    </a>

    <button class="theme-toggle" id="themeToggle">Light/Dark</button>
  </header>

  <!-- AUDIENCE NAVIGATION -->
  <nav class="nav">
    <button id="btn-public" class="active" onclick="setAudience('public')">Public</button>
    <button id="btn-government" onclick="setAudience('government')">Government</button>
    <button id="btn-investor" onclick="setAudience('investor')">Investor</button>
    <button id="btn-cyber" onclick="setAudience('cyber')">Cybersecurity</button>
    <button id="btn-academic" onclick="setAudience('academic')">Academic</button>
  </nav>

  <!-- WHY NOVAK ‚Äî WHY NOW -->
  <section id="whyNovakCard" class="card dismissible">
    <h2>Why NOVAK ‚Äî Why Now?</h2>
    <p>
      Automated systems approve loans, deny medical claims, move money,
      assign benefits, navigate vehicles, and operate robots ‚Äî
      often without proof, transparency, or accountability.
    </p>
    <p>
      NOVAK requires every automated action to generate mathematical
      proof of legality <strong>before execution</strong>.
    </p>
    <p>
      If data changes, rules are altered, or tampering occurs,
      NOVAK detects it instantly ‚Äî and blocks the action safely.
    </p>

    <p class="tight">
      ‚úÖ Every input generates a unique fingerprint<br>
      ‚úÖ Change anything ‚Äî fingerprint changes instantly
    </p>

    <p class="analogy">
      SHA-256 is the steel the NSA engineered ‚Äî NOVAK is the vault door that
      refuses to open unless everything matches.
    </p>

    <button class="dismiss-btn" onclick="dismissWhyNovak()">‚úÖ Don‚Äôt show this again</button>
    <button class="close-x" onclick="dismissWhyNovak()">‚úï</button>
  </section>

  <!-- AUDIENCE-AWARE DESCRIPTION -->
  <p id="description" class="description">
    NOVAK generates a mathematical fingerprint of data. If anything changes ‚Äî
    even slightly ‚Äî the fingerprint changes instantly. Try it below.
  </p>

  <!-- EXPLAINER BUTTON ROW -->
  <div class="explain-btn-row">
    <button class="action-btn" onclick="toggleExplainer('exp1')">I don‚Äôt get it</button>
    <button class="action-btn" onclick="toggleExplainer('exp2')">I‚Äôm still not getting it</button>
    <button class="action-btn" onclick="toggleExplainer('expColor')">Colored Pencil Analogy</button>
    <button class="action-btn" onclick="toggleExplainer('expKey')">Key Analogy</button>
    <button class="action-btn" onclick="toggleExplainer('expGov')">Government Savings</button>
    <button class="action-btn" onclick="toggleExplainer('expHow')">Show Me How This Works</button>
  </div>

  <!-- EXPLAINER PANELS (COLLAPSIBLE) -->
  <section id="exp1" class="card explainer"></section>
  <section id="exp2" class="card explainer"></section>
  <section id="expColor" class="card explainer"></section>
  <section id="expKey" class="card explainer"></section>
  <section id="expGov" class="card explainer"></section>
  <section id="expHow" class="card explainer"></section>

  <!-- EXAMPLE DATASETS -->
  <section class="card">
    <h3>Select an example dataset:</h3>
    <div class="example-grid">
      <div class="example" onclick="loadExample('va')">VA Disability Claim</div>
      <div class="example" onclick="loadExample('medical')">Clinical Note</div>
      <div class="example" onclick="loadExample('finance')">Financial Transaction</div>
      <div class="example" onclick="loadExample('ai')">AI Decision Log</div>
      <div class="example" onclick="loadExample('robot')">Robotics Command</div>
      <div class="example" onclick="loadExample('legal')">Legal Directive</div>
    </div>
  </section>

  <!-- TEXT INPUT + DROPZONE -->
  <section class="card">
    <textarea id="input" placeholder="Type, paste, or modify data here..."></textarea>

    <div id="dropzone" class="dropzone">
      ‚¨áÔ∏è Drag & drop a file here to verify integrity
    </div>

    <button class="action-btn" onclick="tamperTest()">Run Tamper Test</button>
    <button class="action-btn" id="compareBtn" onclick="toggleCompareMode()">
      Start Before/After Capture
    </button>
  </section>

  <!-- HASH OUTPUT -->
  <section class="card">
    <h3 id="hashHeader">Integrity Fingerprints</h3>
    <p class="micro">All supported hashes shown ‚Äî select one as primary.</p>

    <div id="hashes" class="hash-list"></div>

    <p class="micro">
      Primary Hash for certificate:
      <strong id="primaryLabel">SHA-256</strong>
    </p>

    <h4>RGAC Chain (Conceptual Demo)</h4>
    <div id="rgac" class="rgac"></div>

    <button class="action-btn" onclick="exportCertificate()">Export Integrity Certificate (PDF)</button>
  </section>

  <button class="action-btn" onclick="printOnePager()">
    Generate Executive Preview (PDF)
  </button>

  <!-- BEFORE / AFTER COMPARISON -->
  <section class="card">
    <h3>Before / After Comparison</h3>
    <p class="micro">Capture, modify, then compare fingerprints</p>
    <div id="comparison" class="compare-box" style="display:none;"></div>
  </section>

  <!-- GAME LAUNCHER -->
  <section class="card" id="gamesCard">
    <h3>Interactive NOVAK Mini-Games</h3>
    <p class="micro">Learn NOVAK through real-world integrity scenarios</p>

    <div class="game-btn-row">
      <button class="action-btn" onclick="startTamperGame()">Spot the Tamper</button>
      <button class="action-btn" onclick="startHashMatch()">Hash Match Memory</button>
      <button class="action-btn" onclick="startKeyGame()">Find the Valid Key</button>
      <button class="action-btn" onclick="startFraudDetective()">Fraud Detective</button>
    </div>
  </section>

  <!-- GAME DISPLAY / INTERACTION AREA -->
  <section id="gameBox" class="card" style="display:none;"></section>

  <!-- TIMELINE -->
  <section class="card">
    <h3 id="timelineHeader">Proof History</h3>
    <div id="proofHistory" class="history-box"></div>
  </section>

  <!-- Blockchain comparison, glossary, compliance, visual diagrams remain here ‚Äî
       included in Part 2 -->
<style>
/* RESET + BASE */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Inter", sans-serif;
}

html, body {
  scroll-behavior: smooth;
}

body {
  background: var(--bg);
  color: var(--text);
  padding: 24px;
}

.container {
  max-width: 1100px;
  margin: auto;
}

/* COLOR SYSTEM */
:root {
  --blue: #1a4fb3;
  --blue-hover: #0f357f;
  --green: #159b4c;
  --red: #c42121;
  --yellow: #e6b800;
  --accent: var(--blue);

  --bg-light: #f8fafc;
  --bg-dark: #0f172a;

  --text-light: #0b1326;
  --text-dark: #e6edf5;

  --card-light: #ffffff;
  --card-dark: #1e293b;

  --border-light: #d4d8e1;
  --border-dark: #334155;
}

html[data-theme="light"] {
  --bg: var(--bg-light);
  --text: var(--text-light);
  --card: var(--card-light);
  --border: var(--border-light);
}

html[data-theme="dark"] {
  --bg: var(--bg-dark);
  --text: var(--text-dark);
  --card: var(--card-dark);
  --border: var(--border-dark);
}

/* HEADER */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 14px;
  flex-wrap: wrap;
  margin-bottom: 12px;
}

.logo {
  font-size: 34px;
  font-weight: 700;
  color: var(--blue);
}

/* Site link */
.home-link {
  font-size: 15px;
  color: var(--blue);
  text-decoration: none;
  font-weight: 600;
  border-bottom: 2px solid transparent;
  transition: 0.25s;
}
.home-link:hover {
  border-bottom: 2px solid var(--blue);
}

/* THEME TOGGLE */
.theme-toggle {
  cursor: pointer;
  font-size: 14px;
  border: 1px solid var(--blue);
  padding: 7px 14px;
  border-radius: 6px;
  background: transparent;
  color: var(--blue);
  transition: 0.25s;
}
.theme-toggle:hover {
  background: var(--blue);
  color: white;
}

/* AUDIENCE NAV */
.nav {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 16px 0;
}
.nav button {
  border: 1px solid var(--blue);
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  background: transparent;
  color: var(--blue);
  transition: 0.25s;
  font-size: 14px;
}
.nav button:hover,
.nav button.active {
  background: var(--blue);
  color: white;
}

/* CARD */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 22px;
  margin-top: 22px;
  animation: fadeIn 0.45s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

/* COLLAPSIBLE EXPLAINERS */
.explainer {
  display: none;
  overflow: hidden;
  padding: 22px;
  animation: expand 0.35s ease;
}

@keyframes expand {
  from { opacity: 0; transform: scale(0.98); }
  to { opacity: 1; transform: scale(1); }
}

/* BUTTON ROW */
.explain-btn-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 18px;
}

/* ACTION BUTTONS */
.action-btn {
  background: var(--blue);
  color: white;
  border: none;
  padding: 9px 16px;
  border-radius: 7px;
  cursor: pointer;
  font-size: 14px;
  transition: 0.25s;
  display: flex;
  align-items: center;
  gap: 6px;
}
.action-btn:hover {
  background: var(--blue-hover);
}

/* BUTTON ICONS ‚Äî SPACE RESERVED */
.action-btn::before {
  font-family: "JetBrains Mono", monospace;
  font-size: 15px;
}

/* Assigned icons */
.explain-btn-row button:nth-child(1)::before { content: "ü§î"; }
.explain-btn-row button:nth-child(2)::before { content: "üòï"; }
.explain-btn-row button:nth-child(3)::before { content: "üñçÔ∏è"; }
.explain-btn-row button:nth-child(4)::before { content: "üîë"; }
.explain-btn-row button:nth-child(5)::before { content: "üèõÔ∏è"; }
.explain-btn-row button:nth-child(6)::before { content: "üëÄ"; }

/* EXAMPLE DATA */
.example-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 14px;
  margin-top: 14px;
}

.example {
  background: var(--card);
  border: 1px solid var(--border);
  padding: 14px;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.25s;
}
.example:hover {
  border-color: var(--blue);
  background: rgba(26, 79, 179, 0.1);
}

/* TEXTAREA */
textarea {
  width: 100%;
  height: 180px;
  border-radius: 7px;
  border: 1px solid var(--border);
  padding: 12px;
  background: transparent;
  font-family: "JetBrains Mono", monospace;
  font-size: 14px;
  resize: vertical;
  color: var(--text);
}

/* DROPZONE */
.dropzone {
  margin-top: 16px;
  border: 2px dashed var(--blue);
  padding: 34px;
  border-radius: 8px;
  text-align: center;
  transition: 0.25s;
  cursor: pointer;
}
.dropzone:hover {
  background: rgba(26, 79, 179, 0.08);
}

/* HASH LIST */
.hash-list {
  margin-top: 10px;
}
.hash-row {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  border-bottom: 1px solid var(--border);
}
.hash-label {
  width: 80px;
  font-weight: 600;
  font-family: "JetBrains Mono", monospace;
}
.hash-value {
  flex: 1;
  word-break: break-all;
  font-family: "JetBrains Mono", monospace;
}
.copy {
  font-size: 11px;
  padding: 4px 7px;
  border-radius: 5px;
  background: var(--blue);
  color: white;
  border: none;
  cursor: pointer;
}

/* RGAC BLOCKS */
.rgac {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  margin-top: 10px;
}
.block {
  border: 1px solid var(--blue);
  padding: 4px 6px;
  border-radius: 6px;
  font-size: 11px;
  font-family: "JetBrains Mono", monospace;
}

/* COMPARISON */
.compare-box {
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 10px;
  max-height: 230px;
  overflow-y: auto;
  font-family: "JetBrains Mono", monospace;
}

/* TIMELINE */
.history-box {
  border: 1px solid var(--border);
  background: rgba(0,0,0,0.04);
  padding: 14px;
  border-radius: 6px;
  max-height: 230px;
  overflow-y: auto;
  font-family: "JetBrains Mono", monospace;
  font-size: 13px;
}
html[data-theme="dark"] .history-box {
  background: #0e1525;
}

/* GAME BUTTON ROW */
.game-btn-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 14px;
}
.game-btn-row button:nth-child(1)::before { content: "üïµÔ∏è"; }
.game-btn-row button:nth-child(2)::before { content: "üß©"; }
.game-btn-row button:nth-child(3)::before { content: "üîê"; }
.game-btn-row button:nth-child(4)::before { content: "üö®"; }

/* GAME DISPLAY BOX */
#gameBox {
  font-size: 15px;
  line-height: 1.55;
  animation: fadeIn 0.35s ease;
}

/* DISMISS X BUTTON */
.close-x {
  background: none;
  border: none;
  font-size: 22px;
  cursor: pointer;
  position: absolute;
  top: 14px;
  right: 14px;
  color: var(--text);
  opacity: 0.7;
}
.close-x:hover {
  opacity: 1;
}

/* MOBILE */
@media (max-width: 600px) {
  body { padding: 14px; }
  .logo { font-size: 26px; }
}
</style>

<script>
/* ========= GLOBAL DOM HOOKS ========= */
const input = document.getElementById("input");
const hashesDiv = document.getElementById("hashes");
const primaryLabel = document.getElementById("primaryLabel");
const rgacDiv = document.getElementById("rgac");
const comparisonBox = document.getElementById("comparison");
const compareBtn = document.getElementById("compareBtn");
const gameBox = document.getElementById("gameBox");

/* ========= STATE ========= */
let lastHashes = {};
let primaryHash = "SHA-256";
let beforeSnapshot = null;
let rgacBlocks = [];
let soundEnabled = false;

/* ========= SOUNDS (disabled by default) ========= */
const sCorrect = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3");
const sWrong   = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-buzz-960.mp3");

function playSound(type) {
  if (!soundEnabled) return;
  if (type === "correct") sCorrect.play();
  if (type === "wrong") sWrong.play();
}

/* ========= THEME PERSISTENCE ========= */
function toggleTheme() {
  const html = document.documentElement;
  html.dataset.theme =
    html.dataset.theme === "dark" ? "light" : "dark";
  localStorage.setItem("theme", html.dataset.theme);
}

(function initTheme() {
  const saved = localStorage.getItem("theme");
  if (saved) document.documentElement.dataset.theme = saved;
})();

/* ========= AUDIENCE ADAPTIVE TEXT ========= */
const audienceText = {
  public: {
    desc: "NOVAK proves data integrity instantly ‚Äî no tech degree required.",
    hash: "Integrity Fingerprints",
    timeline: "Proof History"
  },
  government: {
    desc: "NOVAK enforces proof-before-payment, stopping improper decisions.",
    hash: "Regulatory Integrity Fingerprints",
    timeline: "Audit & Compliance Trail"
  },
  investor: {
    desc: "Tampering becomes mathematically impossible to hide ‚Äî reducing risk.",
    hash: "Business Integrity Outputs",
    timeline: "Accountability Timeline"
  },
  cyber: {
    desc: "Ideal for SOC, DFIR, supply chain integrity & zero-trust enforcement.",
    hash: "Cryptographic Hash Outputs",
    timeline: "Security Event Timeline"
  },
  academic: {
    desc: "Deterministic, collision-resistant hash demonstrations for research.",
    hash: "Cryptographic Fingerprints",
    timeline: "Research Log"
  }
};

function setAudience(a) {
  document.getElementById("description").innerText = audienceText[a].desc;
  document.getElementById("hashHeader").innerText = audienceText[a].hash;
  document.getElementById("timelineHeader").innerText = audienceText[a].timeline;
  document.querySelectorAll(".nav button").forEach(btn => btn.classList.remove("active"));
  document.getElementById(`btn-${a}`).classList.add("active");
}

/* ========= WHY NOVAK MEMORY ========= */
function dismissWhyNovak() {
  document.getElementById("whyNovakCard").style.display = "none";
  localStorage.setItem("hideWhyNovak", "1");
}
if (localStorage.getItem("hideWhyNovak") === "1") {
  const card = document.getElementById("whyNovakCard");
  if (card) card.style.display = "none";
}

/* ========= HASHING ENGINE ========= */
const algorithms = ["SHA-256", "SHA-512", "SHA3-256"];

async function compute() {
  const encoder = new TextEncoder();
  const data = encoder.encode(input.value);

  lastHashes = {};
  let html = "";

  for (const algo of algorithms) {
    const digest = await crypto.subtle.digest(algo, data);
    const hex = [...new Uint8Array(digest)]
      .map(x => x.toString(16).padStart(2, "0"))
      .join("");

    lastHashes[algo] = hex;

    html += `
      <div class="hash-row">
        <span class="hash-label">${algo}</span>
        <span class="hash-value">${hex}</span>
        <label style="font-size:11px;">
          <input type="radio" name="primary" value="${algo}"
          ${algo === primaryHash ? "checked" : ""}
          onclick="setPrimary('${algo}')"> primary
        </label>
      </div>`;
  }

  hashesDiv.innerHTML = html;
  primaryLabel.innerText = primaryHash;
  updateRGAC(lastHashes[primaryHash]);
}
input.addEventListener("input", compute);

/* ========= PRIMARY HASH SELECT ========= */
function setPrimary(algo) {
  primaryHash = algo;
  primaryLabel.innerText = algo;
}

/* ========= RGAC MINI-CHAIN ========= */
function updateRGAC(hash) {
  if (!hash) return;
  rgacBlocks.push(hash.slice(0, 10));
  if (rgacBlocks.length > 7) rgacBlocks.shift();
  rgacDiv.innerHTML = rgacBlocks.map(h => `<div class="block">${h}</div>`).join("");
}

/* ========= BEFORE/AFTER MODE ========= */
function toggleCompareMode() {
  if (!beforeSnapshot) {
    beforeSnapshot = {
      input: input.value,
      hashes: { ...lastHashes },
      time: new Date().toLocaleTimeString()
    };
    compareBtn.innerText = "Finish Comparison";
  } else {
    const after = {
      input: input.value,
      hashes: { ...lastHashes },
      time: new Date().toLocaleTimeString()
    };

    let html = `<strong>BEFORE:</strong> ${beforeSnapshot.time}<br>
                <strong>AFTER:</strong> ${after.time}<hr><br>`;

    for (const algo of algorithms) {
      const changed = beforeSnapshot.hashes[algo] !== after.hashes[algo];
      html += `
      <div class="compare-row">
        <span>${algo}</span>
        <span>${beforeSnapshot.hashes[algo]}</span>
        <span style="color:${changed ? "#c42121" : "#159b4c"}">
          ${after.hashes[algo]}
        </span>
      </div>`;
    }

    comparisonBox.innerHTML = html;
    comparisonBox.style.display = "block";
    compareBtn.innerText = "Start Comparison";
    beforeSnapshot = null;
  }
}

/* ========= EXAMPLE DATASETS ========= */
const examples = {
  va: `Veteran: John Sample
Rating: 40%
Condition: Lumbar Disc Disease
Requested Increase: 10% ‚Üí 40%`,
  medical: `Patient: 54M
Diagnosis: Atrial fibrillation
Medication: Metoprolol 25mg BID`,
  finance: `Transaction ID: 99837-A
Amount: $248,932.17
Purpose: Federal subcontract payment`
};
function loadExample(x) {
  input.value = examples[x];
  compute();
}

/* ========= TAMPER TEST ========= */
function tamperTest() {
  input.value += "\nüö® UNAUTHORIZED CHANGE DETECTED";
  compute();
}

/* ========= COLLAPSIBLE EXPLAINER LOGIC ========= */
function toggleExplainer(id) {
  document.querySelectorAll(".explainer")
    .forEach(e => {
      if (e.id !== id) e.style.display = "none";
    });

  const box = document.getElementById(id);
  box.style.display = box.style.display === "block" ? "none" : "block";
  if (box.style.display === "block") box.scrollIntoView({ behavior: "smooth", block: "center" });
}

/* ========= ANALOGIES ========= */
function showPuzzleAnalogy() {
  toggleExplainer("puzzleExplain");
}
function showColorPencilAnalogy() {
  toggleExplainer("pencilExplain");
}
function showKeyAnalogy() {
  toggleExplainer("keyExplain");
}
function showGovSavings() {
  toggleExplainer("govExplain");
}
function showHowWorks() {
  toggleExplainer("howWorksExplain");
}

/* ========= MINI-GAMES (fully interactive) ========= */
function playTamperGame() {
  gameBox.style.display = "block";
  gameBox.innerHTML = `
    <h3>Spot the Tampered Claim üïµÔ∏è</h3>
    <p>One of these changed ‚Äî which?</p>
    <button class="action-btn" onclick="wrong()">Claim A</button>
    <button class="action-btn" onclick="correct()">Claim B</button>`;
  gameBox.scrollIntoView({ behavior: "smooth", block: "center" });
}
function wrong() {
  playSound("wrong");
  alert("‚ùå Not quite ‚Äî try again.");
}
function correct() {
  playSound("correct");
  alert("‚úÖ Correct ‚Äî NOVAK would flag this instantly.");
}

/* ========= GOVERNMENT BUTTON PHRASE ========= */
document.querySelector("button[action-gov]")?.addEventListener("click", showGovSavings);

/* ========= SIMPLE SOUND TOGGLE ========= */
function toggleSound() {
  soundEnabled = !soundEnabled;
}

/* ========= DEEP-LINK SYSTEM (#key, #pencil, #gov, etc.) ========= */
window.addEventListener("load", () => {
  const h = location.hash.replace("#", "");
  if (!h) return;
  const map = {
    key: showKeyAnalogy,
    pencil: showColorPencilAnalogy,
    puzzle: showPuzzleAnalogy,
    gov: showGovSavings,
    how: showHowWorks
  };
  if (map[h]) map[h]();
});

/* ========= INIT ========= */
setAudience("public");
compute();
</script>

  

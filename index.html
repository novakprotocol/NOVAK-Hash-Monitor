<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NOVAK Protocol ‚Äî Proof-Before-Action Integrity</title>

  <meta name="description"
        content="NOVAK Protocol ‚Äî execution integrity, fraud prevention, cryptographic proof-before-action verification for government, finance, healthcare, AI, robotics, and national security." />

  <link rel="icon" type="image/png" href="favicon.png" />

  <!-- ‚úÖ Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono&display=swap"
        rel="stylesheet" />

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/blake3/browser/blake3.min.js"></script>

  <style>

#govPreview {
  display: none;
  max-width: 100%;
  max-height: 100vh;
  overflow-x: auto;
  overflow-y: auto;
  border: 1px solid #333;
  background: #fafafa;
}

/* Bottom-right collapse button */
.collapse-bottom-btn {
  position: absolute;
  bottom: 12px;
  right: 14px;
  padding: 6px 12px;
  font-size: 13px;
  border: 1px solid var(--border);
  background: var(--card);
  border-radius: 6px;
  cursor: pointer;
  opacity: 0.85;
  transition: 0.2s;
}

.collapse-bottom-btn:hover {
  opacity: 1;
  background: var(--border);
}

/* FIX LEFT SIDE STANDARDS DROPDOWN */
.standards-menu {
  left: 0 !important;
  right: auto !important;
  width: 320px !important;
  max-height: 520px;
  overflow-y: auto;
  padding: 10px 0;
  text-align: left;
}

.standards-menu a {
  padding: 10px 16px !important;
  font-size: 14px;
  white-space: normal !important;
  line-height: 1.3;
}

.standards-menu .dropdown-header {
  padding: 12px 16px !important;
  font-weight: 700;
  background: var(--card);
  position: sticky;
  top: 0;
  z-index: 5;
}

/* ======================================================= */
/*  FIX RIGHT-SIDE LIBRARY MENU ‚Äî MATCH LEFT SIDE EXACTLY  */
/* ======================================================= */

#docsMenu {
  max-height: 520px !important;     /* identical to left scroll height */
  overflow-y: auto !important;       /* enables scrolling */
  width: 320px !important;           /* matches left menu width */
  left: auto !important;             /* anchored to right edge */
  right: 0 !important;
  padding: 10px 0 !important;
  text-align: left !important;
}

/* sticky section headers inside the Library menu */
#docsMenu .dropdown-header {
  position: sticky !important;
  top: 0 !important;
  background: var(--card);
  z-index: 10;
}

/* optional: reduce whitespace on items, matches left */
#docsMenu a {
  white-space: normal !important;
  padding: 10px 16px !important;
}

/* =============================== */
/* NOVAK Documentation Dropdown    */
/* =============================== */

/* SHA Education Suite Styling */
.diagram-box {
  background: var(--card);
  border: 1px solid var(--border);
  padding: 14px;
  border-radius: 8px;
  font-family: 'JetBrains Mono', monospace;
  white-space: pre-wrap;
  margin-top: 12px;
  text-align: center;   /* ‚úÖ FIX ALIGNMENT */
}

.diagram-box pre { 
  text-align: center; 
}

.diagram-box { 
  text-align: center; 
}

.sha-table { margin-top: 14px; }
.sha-row { display: flex; gap: 14px; margin-bottom: 8px; }
.sha-name { width: 110px; font-weight: 700; padding:6px 10px; border-radius:6px; text-align:center; }
.sha-desc { flex: 1; padding:6px 0; }

.sha-broken { background:#ffdddd; border:1px solid #cc6666; }
.sha-good   { background:#e2f4ff; border:1px solid #6aa7ff; }
.sha-new    { background:#eae1ff; border:1px solid #a78bfa; }

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-btn {
  padding: 7px 16px;
  font-size: 14px;
  border-radius: 999px;
  border: 1px solid var(--blue);
  background: transparent;
  cursor: pointer;
  color: var(--blue);
  transition: 0.25s;
  white-space: nowrap;
}

.dropdown-btn:hover {
  background: var(--blue);
  color: #fff;
}

.dropdown-content {
  display: none;
  position: absolute;
  top: 42px;
  right: 0;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  min-width: 310px;
  box-shadow: 0 4px 18px rgba(0,0,0,.25);
  z-index: 99999;
  padding: 10px 0;
}

.dropdown-header {
  font-weight: 700;
  padding: 12px 18px;
  border-bottom: 1px solid var(--border);
}

.dropdown-content a {
  display: block;
  padding: 10px 18px;
  font-size: 14px;
  color: var(--text);
  text-decoration: none;
  transition: 0.12s;
  white-space: nowrap;
}

.dropdown-content a:hover {
  background: rgba(26,79,179,0.10);
}

.dropdown-divider {
  margin: 10px 0;
  border-bottom: 1px solid var(--border);
}

/* =======================================================
   DARK MODE BUTTON CONTRAST FIX ‚Äî FULL SITE
   ======================================================= */

html[data-theme="dark"] .pill-btn,
html[data-theme="dark"] .explain-btn,
html[data-theme="dark"] .action-btn,
html[data-theme="dark"] .digest-btn,
html[data-theme="dark"] .dropdown-btn {
  background: #1e293b !important;   /* dark card */
  color: #ffffff !important;         /* white text */
  border-color: #94a3b8 !important;  /* light gray border */
}

html[data-theme="dark"] .pill-btn:hover,
html[data-theme="dark"] .explain-btn:hover,
html[data-theme="dark"] .action-btn:hover,
html[data-theme="dark"] .digest-btn:hover,
html[data-theme="dark"] .dropdown-btn:hover {
  background: #334155 !important;   /* slightly brighter */
  color: #ffffff !important;
}

html[data-theme="dark"] .action-btn {
  background: #3b82f6 !important;   /* blue CTA */
  color: #ffffff !important;
  border: none !important;
}

html[data-theme="dark"] .action-btn:hover {
  background: #2563eb !important;
}

html[data-theme="dark"] .pill-btn.active {
  background: #ffffff !important;
  color: #000000 !important;
  border-color: #ffffff !important;
}

/* ========== FIX TOP GAP (B) ========== */
html {
  scroll-padding-top: 50px; /* header height */
}

body {
  padding-top: 50px;  /* match header height exactly */
}

/* prevent double stacking */
.card,
#audienceContent,
#explainerOutput,
#whatChangesCard,
#whyNovakCard,
#whatIsNovakCard,
#hashOutputList,
#rgac,
#gameBox,
#transparencyView,
#storyPanel {
  scroll-margin-top: 80px; /* 80 is perfect spacing */
}
   
    /* ====================================================================== */
    /* ‚úÖ GLOBAL RESET + TYPOGRAPHY                                           */
    /* ====================================================================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Inter", sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      line-height: 1.55;
      -webkit-font-smoothing: antialiased;
      font-size: 16px;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px;
    }

    /* ====================================================================== */
    /* ‚úÖ COLOR SYSTEM ‚Äî THEME VARIABLES                                      */
    /* ====================================================================== */
    :root {
      --blue: #1a4fb3;
      --blue-hover: #0f357f;
      --green: #059669;
      --red: #dc2626;
      --yellow: #e8b400;

      --bg-light: #f8fafc;
      --bg-dark: #0f172a;

      --text-light: #0b1326;
      --text-dark: #e6edf5;

      --card-light: #ffffff;
      --card-dark: #1e293b;

      --border-light: #d4d8e1;
      --border-dark: #334155;
    }

    /* Light Mode */
    html[data-theme="light"] {
      --bg: var(--bg-light);
      --text: var(--text-light);
      --card: var(--card-light);
      --border: var(--border-light);
    }

   /* Dark Mode */
html[data-theme="dark"] {
  --bg: var(--bg-dark);
  --text: var(--text-dark);
  --card: var(--card-dark);
  --border: var(--border-dark);
}

/* Ensure readable buttons in Dark Mode */
html[data-theme="dark"] .explain-btn,
html[data-theme="dark"] .action-btn,
html[data-theme="dark"] .theme-toggle,
html[data-theme="dark"] .aud-btn {
  color: #ffffff !important;
  border-color: #ffffff !important;
}

html[data-theme="dark"] .theme-toggle:hover {
  background: #ffffff;
  color: #000000 !important;
}

html[data-theme="dark"] .card {
  color: var(--text-dark);
}

/* ‚úÖ NEW: keep active audience button readable in dark mode */
html[data-theme="dark"] .aud-btn.active {
  background: #ffffff;
  color: #000000 !important;   /* dark text on white pill */
  border-color: #ffffff;
  box-shadow: 0 0 0 2px #ffffff;
}

    /* ====================================================================== */
    /* ‚úÖ STICKY HEADER ‚Äî CENTERED BRAND + SITE + THEME TOGGLE                */
    /* ====================================================================== */
    #mainHeader {
      display: flex;
      align-items: center;
      padding: 14px 28px;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 9999;
    }

    .header-left {
      width: 80px; /* spacer, can stay mostly empty */
    }

    .header-center {
      flex: 1;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    #novakBrand {
      font-size: 26px;
      font-weight: 700;
      color: var(--blue);
      white-space: nowrap;
      user-select: none;
    }

    #novakTagline {
      font-size: 13px;
      opacity: 0.85;
    }

    #novakSiteLink {
      font-size: 14px;
      color: var(--blue);
      text-decoration: none;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    #headerControls {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .theme-toggle {
      cursor: pointer;
      font-size: 14px;
      padding: 7px 14px;
      border-radius: 999px;
      border: 1px solid var(--blue);
      background: transparent;
      color: var(--blue);
      transition: 0.25s;
    }

    .theme-toggle:hover {
      background: var(--blue);
      color: #fff;
    }

    /* Mobile Menu */
    #mobileMenuBtn {
      display: none;
      font-size: 26px;
      background: none;
      border: none;
      cursor: pointer;
    }

    #mobileMenuPanel {
      display: none;
      flex-direction: column;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      padding: 10px 22px 14px;
      gap: 8px;
    }

    /* ====================================================================== */
    /* ‚úÖ SHARED UI ‚Äî CARDS, TITLES, BUTTONS                                  */
    /* ====================================================================== */
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 26px;
      margin-top: 28px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 14px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    .pill-btn {
      border-radius: 999px;
      border: 1px solid var(--blue);
      background: #ffffff;
      padding: 8px 18px;
      cursor: pointer;
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--blue);
      transition: 0.18s ease;
      white-space: nowrap;
    }

    .pill-btn:hover {
      background: rgba(26, 79, 179, 0.06);
    }

    .aud-btn.active {
      border-color: #000000;
      box-shadow: 0 0 0 2px #000000;
      background: #ffffff;
      color: #000000;
    }

    /* Primary CTA */
    .action-btn {
      padding: 9px 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      background: var(--blue);
      color: #fff;
      font-size: 14px;
      transition: 0.25s;
    }

    .action-btn:hover {
      background: var(--blue-hover);
    }

    /* ‚úÖ Audience Selector Buttons ‚Äî Match Explainer Style */
.aud-btn {
  border: 2px solid var(--blue);
  background: transparent;
  padding: 10px 22px;
  border-radius: 26px;
  font-size: 16px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  transition: 0.25s;
  color: var(--blue);
}

.aud-btn:hover {
  background: rgba(26,79,179,0.10);
}

/* ‚úÖ Active (selected) state */
.aud-btn.active {
  background: var(--blue);
  color: #ffffff;
  border-color: var(--blue);
}

/* ‚úÖ Dark Mode readability */
html[data-theme="dark"] .aud-btn {
  color: #ffffff;
  border-color: #ffffff;
}

html[data-theme="dark"] .aud-btn.active {
  background: #ffffff;
  color: #000000;
}

    /* Restore buttons under cards */
    .restore-btn {
      padding: 8px 18px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--card);
      cursor: pointer;
      font-size: 14px;
    }

    /* ====================================================================== */
    /* ‚úÖ ACCESSIBILITY                                                        */
    /* ====================================================================== */
    :focus-visible {
      outline: 3px solid var(--blue);
      border-radius: 6px;
    }

    /* ====================================================================== */
    /* ‚úÖ RESPONSIVE                                                           */
    /* ====================================================================== */
    @media (max-width: 720px) {
      #mainHeader {
        padding: 10px 14px;
      }

      .header-left {
        display: none;
      }

      .header-right {
        gap: 6px;
      }

      #novakBrand {
        font-size: 22px;
      }

      #novakTagline {
        font-size: 12px;
      }

      .container {
        padding: 18px;
      }

      #headerControls {
        display: none;
      }

      #mobileMenuBtn {
        display: block;
      }
    }

    /* =============================== */
/* Expert Mode Buttons & Heatmap   */
/* =============================== */

.digest-btn {
  margin-right: 8px;
  padding: 6px 14px;
  border: 1px solid var(--border);
  background: none;
  color: var(--text);
  border-radius: 6px;
  cursor: pointer;
}

.digest-btn:hover {
  background: var(--border);
}

/* Heatmap Colors */
.bit-same {
  width: 100%;
  height: 12px;
  background: #4ade80; /* green */
}

.bit-diff {
  width: 100%;
  height: 12px;
  background: #ef4444; /* red */
}

  </style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- ‚≠ê NOVAK 12-LAYER ENGINE: REQUIRED LIBRARIES ‚≠ê -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;400;700&family=JetBrains+Mono&display=swap" rel="stylesheet">

</head>

<body>

<!-- ‚úÖ GLOBAL HEADER -->
<header id="mainHeader">
<!-- ===== NOVAK Standards Dropdown (Left Side) ===== -->
<div class="dropdown" style="margin-right: 12px;">
  <button class="dropdown-btn" onclick="toggleStandardsMenu()">Standards ‚ñº</button>

<div id="standardsMenu" class="dropdown-content standards-menu">

<input id="standardsSearch"
       type="text"
       placeholder="Search‚Ä¶"
       style="
         width: 88%;
         margin: 10px auto 14px auto;
         padding: 8px 12px;
         display:block;
         border-radius:8px;
         border:1px solid var(--border);
         font-size:14px;
       ">

  <div class="dropdown-header">Cryptography 101</div>
  <a href="docs/standards/SP-2 ‚Äî HVET EIR RGAC Cryptographic Standard.pdf" target="_blank">Cryptography 101</a>

  <div class="dropdown-divider"></div>
    <div class="dropdown-header">NOVAK Standards (SP-1 ‚Üí SP-9)</div>
  <a href="docs/standards/SP-1 ‚Äî NOVAK Execution Integrity Standard.pdf" target="_blank">SP-1 ‚Äî Execution Integrity</a>
  <a href="docs/standards/SP-2 ‚Äî HVET EIR RGAC Cryptographic Standard.pdf" target="_blank">SP-2 ‚Äî HVET / EIR / RGAC</a>
  <a href="docs/standards/SP-3 ‚Äî Safety Gate + PL-X + PS-X Standard.pdf" target="_blank">SP-3 ‚Äî Safety Gate + PL-X</a>
  <a href="docs/standards/SP-4 ‚Äî NOVAK Implementation Requirements.pdf" target="_blank">SP-4 ‚Äî Implementation Spec</a>
  <a href="docs/standards/SP-5 ‚Äî NOVAK CERTIFICATION STANDARD.pdf" target="_blank">SP-5 ‚Äî Certification Model</a>
  <a href="docs/standards/SP-6 ‚Äî NOVAK Conformance Testing Suite.pdf" target="_blank">SP-6 ‚Äî Conformance Levels</a>
  <a href="docs/standards/SP-7 ‚Äî NOVAK Federal Adoption & Compliance Guide.pdf" target="_blank">SP-7 ‚Äî Federal Adoption</a>
  <a href="docs/standards/SP-8 ‚Äî NOVAK Interoperability & Integration Standard.pdf" target="_blank">SP-8 ‚Äî Interoperability</a>
  <a href="docs/standards/SP-9 ‚Äî NOVAK Federal Multi-Agency Deployment Standard.pdf" target="_blank">SP-9 ‚Äî Multi-Domain Compliance</a>

  <div class="dropdown-divider"></div>
  <div class="dropdown-header">Threat Models (NTM-1 ‚Üí NTM-3)</div>
  <a href="docs/threat-models/NTM-1 ‚Äî NOVAK THREAT MODEL.pdf" target="_blank">NTM-1 ‚Äî Base Threat Model</a>
  <a href="docs/threat-models/NTM-2 ‚Äî NOVAK Red Team Adversarial Test Suite.pdf" target="_blank">NTM-2 ‚Äî Red Team Test Suite</a>
  <a href="docs/threat-models/NTM-3 ‚Äî NOVAK Adversarial AI Test Suite.pdf.pdf" target="_blank">NTM-3 ‚Äî Adversarial Model</a>
  <a href="docs/threat-models/NTM-3 ‚Äî NOVAK Adversarial AI Test Suite (Full Formal Edition).pdf" target="_blank">NTM-3 ‚Äî Adversarial Model</a>

  <div class="dropdown-divider"></div>
  <div class="dropdown-header">Whitepapers</div>
  <a href="docs/whitepapers/PART_1__Executive_Summary.pdf" target="_blank">PART 1 ‚Äî Executive Summary</a>
  <a href="docs/whitepapers/PART 2 ‚Äî WHAT NOVAK IS.pdf" target="_blank">PART 2 ‚Äî What NOVAK Is</a>
  <a href="docs/whitepapers/PART 3 ‚Äî SCIENTIFIC FOUNDATIONS OF THE NOVAK PROTOCOL.pdf" target="_blank">PART 3 ‚Äî Scientific Foundations</a>
  <a href="wdocs/hitepapers/PART 4 ‚Äî CRYPTOGRAPHIC ARCHITECTURE OF THE NOVAK PROTOCOL.pdf" target="_blank">PART 4 ‚Äî Cryptographic Framework</a>
  <a href="docs/whitepapers/PART 5 ‚Äî SYSTEM MODEL & EXECUTION FLOW.pdf" target="_blank">PART 5 ‚Äî System Model</a>
  <a href="docs/whitepapers/PART 6 ‚Äî IMPLEMENTATION LAYERS.pdf" target="_blank">PART 6 ‚Äî Implementation Layers</a>
  <a href="docs/whitepapers/PART 7 ‚Äî SECURITY MODEL & THREAT SURFACES.pdf" target="_blank">PART 7 ‚Äî Security Model</a>
  <a href="docs/whitepapers/PART 8 ‚Äî GOVERNANCE, COMPLIANCE & CROSS-JURISDICTIONAL ENFORCEMENT.pdf" target="_blank">PART 8 ‚Äî Governance & Compliance</a>
  <a href="docs/whitepapers/PART 9 ‚Äî FORMAL TECHNICAL WHITEPAPER.pdf" target="_blank">PART 9 ‚Äî Formal Technical</a>
  <a href="docs/whitepapers/PART_10__Final_Summary.pdf" target="_blank">PART 10 ‚Äî Final Summary</a>

  <div class="dropdown-divider"></div>
  <div class="dropdown-header">Appendices</div>
  <a href="docs/apendices/apendices/Appendix A ‚Äî Adversarial Prompt Library.pdf" target="_blank">Appendix A ‚Äî Glossary</a>
  <a href="docs/apendices/APPENDIX B GRADIENT-SPACE ADVERSARIAL SIMULATION VECTORS.pdf" target="_blank">Appendix B ‚Äî Math Notation</a>
  <a href="docs/apendices/APPENDIX C REGULATORY MAPPING.pdf" target="_blank">Appendix C ‚Äî Regulatory Mapping</a>
  <a href="docs/apendices/APPENDIX D THREAT MODEL AND SECUIRTY PROOF SKETCH.pdf" target="_blank">Appendix D ‚Äî Threat Model</a>
  <a href="docs/apendices/ppendix_E_Pitch_Deck.pdf" target="_blank">Appendix E ‚Äî Pitch Deck</a>

</div>

</div>

  <div class="header-center">
    <div id="novakBrand">NOVAK Protocol</div>

    <a id="novakSiteLink"
       href="https://www.novakprotocol.com"
       target="_blank"
       rel="noopener noreferrer">
      www.novakprotocol.com
    </a>
  </div>

  <div class="header-right">
    <div id="headerControls">
      <button class="theme-toggle" onclick="toggleTheme()">Light/Dark</button>
    </div>
    <button id="mobileMenuBtn" onclick="toggleMobileMenu()">‚ò∞</button>
  </div>

<!-- ===== NOVAK Whitepapers & Laws Dropdown ===== -->
<div class="dropdown">
  <button class="dropdown-btn" onclick="toggleDocsMenu()">Library ‚ñº</button>

  <div id="docsMenu" class="dropdown-content">

<input id="docsSearch"
       type="text"
       placeholder="Search‚Ä¶"
       style="
         width: 88%;
         margin: 10px auto 14px auto;
         padding: 8px 12px;
         display:block;
         border-radius:8px;
         border:1px solid var(--border);
         font-size:14px;
       ">

    <div class="dropdown-header">NOVAK Learning Series - LAWS Addenda</div>

    <a href="docs/learning/NOVAK Learning Series - Cryptography 101 - A NOVAK Perspective.pdf" target="_blank">Cryptography 101 - A NOVAK Perspective</a>

    <div class="dropdown-divider"></div>

    <div class="dropdown-header">NOVAK Learning Series - SPs</div>
    <a href="docs/learning/NOVAK Learning Series - SP-1 Execution Integrity Standard.pdf" target="_blank">SP-1 Execution Integrity Standard</a>
    <a href="docs/learning/NOVAK Learning Series - SP-2 Cryptographic Standard.pdf" target="_blank">SP-2 Cryptographic Standard</a>
    <a href="docs/learning/NOVAK Learning Series - SP-3 Safety Gate Standard.pdf" target="_blank">SP-3 Safety Gate Standard</a>
    <a href="docs/learning/NOVAK Learning Series - SP-4 Implementation Requirements.pdf" target="_blank">SP-4 Implementation Requirements</a>
    <a href="docs/learning/NOVAK Learning Series - SP-5 Certification Standard.pdf" target="_blank">SP-5 Certification Standard</a>
    <a href="docs/learning/NOVAK Learning Series - SP-6 Conformance Testing.pdf" target="_blank">SP-6 Conformance Testing</a>
    <a href="docs/learning/NOVAK Learning Series - SP-7 Federal Adoption.pdf" target="_blank">SP-7 Federal Adoption</a>
    <a href="docs/learning/NOVAK Learning Series - SP-8 Interoperability Standard.pdf" target="_blank">SP-8 Interoperability Standard</a>
    <a href="docs/learning/NOVAK Learning Series - SP-9 Federal Multi-Agency Deployment.pdf" target="_blank">SP-9 Federal Multi-Agency Deployment</a>

    <div class="dropdown-divider"></div>

    <div class="dropdown-header">NOVAK Learning Series - LAWS</div>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L0 The Prime Directive.pdf" target="_blank">Law L0 The Prime Directive (Zeroth Law)</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L1 Deterministic Rule Execution.pdf" target="_blank">Law L1 Deterministic Rule Execution</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L2 Rule Hash.pdf" target="_blank">Law L2 Rule Hash</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L3 Data Hash.pdf" target="_blank">Law L3 Data Hash</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L4 Output Hash.pdf" target="_blank">Law L4 Output Hash</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L5 Execution Binding.pdf" target="_blank">Law L5 Execution Binding</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L6 Execution Identity Law.pdf" target="_blank">Law L6 Execution Identity Law</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L7 Recursive Verifiability.pdf" target="_blank">Law L7 Recursive Verifiability</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L8 Temporal Ordering.pdf" target="_blank">Law L8 Temporal Ordering</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L9 Forward-Only Integrity.pdf" target="_blank">Law L9 Forward-Only Integrity</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L10 Zero Trust Execution Model.pdf" target="_blank">Law L10 Zero Trust Execution Model</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L11 No Hidden States.pdf" target="_blank">Law L11 No Hidden States</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L12 Deterministic Safety Gate.pdf" target="_blank">Law L12 Deterministic Safety Gate</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L13 Global Verifier Canon.pdf" target="_blank">Law L13 Global Verifier Canon</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L14 Identity Receipt.pdf" target="_blank">Law L14 Identity Receipt</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Law L15 Full Disclosure Rule.pdf" target="_blank">Law L15 Full Disclosure Rule</a>

    <div class="dropdown-header">NOVAK Learning Series - LAWS Addenda</div>
    <a href="docs/learning/NOVAK Learning Series - Industry Addenda PL-X & PS-X.pdf" target="_blank">Industry Addenda PL-X & PS-X</a>

    <div class="dropdown-divider"></div>
	
    <div class="dropdown-header">NOVAK Learning Series - Threat Models</div>
    <a href="docs/learning/NOVAK Learning Series - NTM-1 NOVAK Threat Model.pdf" target="_blank">NTM-1 NOVAK Threat Model</a>
    <a href="docs/learning/NOVAK Learning Series - NTM-2 Red Team Adversarial Test Suite.pdf" target="_blank">NTM-2 Red Team Adversarial Test Suite</a>
    <a href="docs/learning/NOVAK Learning Series - NTM-3 Adversarial AI Test Suite.pdf" target="_blank">NTM-3 Adversarial AI Test Suite</a>
    <a href="docs/learning/NOVAK Learning Series - Appendix 13 Multilingual Ambiguity Matrix.pdf" target="_blank">Appendix 13 Multilingual Ambiguity Matrix</a>
    <a href="docs/learning/NOVAK Learning Series - NTM-2 Red Team Adversarial Test Suite.pdf" target="_blank">NTM-2 Red Team Adversarial Test Suite</a>
    <a href="docs/learning/NOVAK Learning Series - NTM-3 Adversarial AI Test Suite.pdf" target="_blank">NTM-3 Adversarial AI Test Suite</a>

    <div class="dropdown-divider"></div>

    <div class="dropdown-header">NOVAK Learning Series - Novak Overview</div>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Part 1 Executive Summary.pdf" target="_blank">Part 1 Executive Summary</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Part 2 - What Novak Is.pdf" target="_blank">Part 2 - What Novak Is</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Part 3 Scientific Foundations.pdf" target="_blank">Part 3 Scientific Foundations</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Part 4 Cryptographic Architecture.pdf" target="_blank">Part 4 Cryptographic Architecture</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Part 5 System Model.pdf" target="_blank">Part 5 System Model</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Part 6 Implementation Layers.pdf" target="_blank">Part 6 Implementation Layers</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Part 7 Security Model.pdf" target="_blank">Part 7 Security Model</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Protocol Part 8 Governance.pdf" target="_blank">Part 8 Governance</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Part 9 Formal Whitepaper.pdf" target="_blank">Part 9 Formal Whitepaper</a>
    <a href="docs/learning/NOVAK Learning Series - NOVAK Part 10 Final Summary.pdf" target="_blank">Part 10 Final Summary</a>

    <div class="dropdown-divider"></div>

    <div class="dropdown-header">Preface and PAPERs 1‚Äì11</div>
    <a href="docs/papers/The NOVAK Foundation Papers (v1.0).pdf" target="_blank">The NOVAK Foundation Papers (v1.0)</a>
    <a href="docs/psychology/PAPER 1 ‚Äî PSYCHOLOGY.pdf" target="_blank">üß† PAPER 1 ‚Äî Psychology</a>
    <a href="docs/sociology/PAPER 2 ‚Äî SOCIOLOGY.pdf" target="_blank">üåê PAPER 2 ‚Äî Sociology</a>
    <a href="docs/law/PAPER 3 ‚Äî LAW.pdf" target="_blank">‚öñÔ∏è PAPER 3 ‚Äî Law</a>
    <a href="docs/mathematics/PAPER 4 ‚Äî MATHEMATICS & CRYPTOGRAPHY.pdf" target="_blank">üìê PAPER 4 ‚Äî Mathematics & Cryptography</a>
    <a href="docs/ai-governance/PAPER 5 ‚Äî AI & AUTONOMOUS SYSTEMS.pdf" target="_blank">ü§ñ PAPER 5 ‚Äî AI & Autonomous Systems</a>
    <a href="docs/economics/PAPER 6 ‚Äî ECONOMICS.pdf" target="_blank">üí∞ PAPER 6 ‚Äî Economics</a>
    <a href="docs/civilization/PAPER 7 ‚Äî CIVILIZATION.pdf" target="_blank">üèõ PAPER 7 ‚Äî Civilization</a>
    <a href="docs/forensics/PAPER 8 ‚Äî FORENSICS.pdf" target="_blank">üîç PAPER 8 ‚Äî Forensics</a>
    <a href="docs/national-defense/PAPER 9 ‚Äî NATIONAL DEFENSE.pdf" target="_blank">üõ° PAPER 9 ‚Äî National Defense</a>
    <a href="docs/ethics/PAPER 10 ‚Äî ETHICS & PHILOSOPHY.pdf" target="_blank">üìú PAPER 10 ‚Äî Ethics & Philosophy</a>
    <a href="docs/governance/PAPER 11 ‚Äî GOVERNANCE & POLICY.pdf" target="_blank">üèõ PAPER 11 ‚Äî Governance & Policy</a>

    <div class="dropdown-divider"></div>

    <div class="dropdown-header">Core Docs</div>
    <a href="docs/NOVAK_Architecture.pdf" target="_blank">üìê Architecture</a>
    <a href="docs/NOVAK_LightPaper.pdf" target="_blank">üí° Light Paper</a>
    <a href="docs/NOVAK_Executive_Brief.pdf" target="_blank">üìä Executive Brief</a>
    <a href="docs/NOVAK_API_Reference.pdf" target="_blank">üîß API Reference</a>

    <!-- PARTS 1‚Äì10 -->
    <a href="docs/Part-1_Executive_summary.md" target="_blank">PART 1 ‚Äî Executive Summary</a>
    <a href="docs/PART-2_What-NOVAK-Is.md" target="_blank">PART 2 ‚Äî What NOVAK Is</a>
    <a href="docs/PART-3_Scientific_Foundations.md" target="_blank">PART 3 ‚Äî Scientific Foundations</a>
    <a href="docs/PART-4_Formal_Architecture.md" target="_blank">PART 4 ‚Äî Formal Architecture</a>
    <a href="docs/PART-5_System_Model.md" target="_blank">PART 5 ‚Äî System Model</a>
    <a href="docs/PART-6_Implementation_Layers.md" target="_blank">PART 6 ‚Äî Implementation Layers</a>
    <a href="docs/PART-7_Security_Model.md" target="_blank">PART 7 ‚Äî Security Model</a>
    <a href="docs/PART-8_Governance_and_Compliance.md" target="_blank">PART 8 ‚Äî Governance & Compliance</a>
    <a href="docs/PART-9_Formal_Whitepaper.md" target="_blank">PART 9 ‚Äî Formal Whitepaper</a>
    <a href="docs/PART-10_Final_Summary_Use_Cases.md" target="_blank">PART 10 ‚Äî Final Summary + Use Cases</a>

    <div class="dropdown-divider"></div>

    <!-- APPENDICES -->
    <a href="docs/Appendix-A_Glossary.md" target="_blank">Appendix A ‚Äî Glossary</a>
    <a href="docs/Appendix-B_Mathematical_Notation_Guide.md" target="_blank">Appendix B ‚Äî Math Notation</a>
    <a href="docs/Appendix-C_Regulatory_Mapping.md" target="_blank">Appendix C ‚Äî Regulatory Mapping</a>
    <a href="docs/Appendix-D_Threat_Model_and_Security_Proof.md" target="_blank">Appendix D ‚Äî Threat Model</a>
    <a href="docs/Appendix-E_Government_Pitch_Deck.md" target="_blank">Appendix E ‚Äî Pitch Deck</a>
    <a href="docs/Appendix-F_High_School_Level_Explanation_of_the_NOVAK_PROTOCOL.md" target="_blank">Appendix F ‚Äî High School Explanation</a>

    <div class="dropdown-divider"></div>

    <!-- Legal -->
    <a href="docs/LICENSE-NOVAK.txt" target="_blank">LICENSE-NOVAK</a>
    <a href="docs/SECURITY.md" target="_blank">SECURITY.md</a>
  </div>
</div>
  
</header>

<!-- ‚úÖ MOBILE DROPDOWN -->
<div id="mobileMenuPanel">
  <button class="theme-toggle" onclick="toggleTheme()">Light/Dark Mode</button>
</div>

<!-- ‚úÖ MAIN CONTENT START -->
<div class="container">

<!-- ====================================================== -->
<!-- ‚≠ê 60-SECOND NOVAK OVERVIEW ‚Äî COLLAPSIBLE -->
<!-- ====================================================== -->
<details class="novak-collapse" style="margin-top:15px;">
  <summary style="cursor:pointer; font-size:20px; padding:14px 0;">
    ‚è±Ô∏è 60-Second NOVAK Overview (For Everyone)
  </summary>

  <div class="card" style="padding:26px; margin-top:16px; font-size:16px; line-height:1.6; position:relative;">

    <p>If we could eliminate catastrophic system failures, prevent wrongful decisions, and save the government over $100 billion a year ‚Äî not afterward, but at the moment of execution ‚Äî would you hear me out and want see how?</p><br>

    <h3 style="margin-top:0;">What NOVAK Does ‚Äî In Plain English</h3>
    <br>
    <p><strong>NOVAK prevents computers from acting on wrong information.</strong></p>
    <br>
    <p>
      Before any automated system ‚Äî VA claims, AI, robots, finance, healthcare ‚Äî
      is allowed to <em>make a decision</em>, NOVAK forces it to prove:
    </p>
    <br>
    <ul style="margin-left:20px;">
      <li>‚úî The <strong>input</strong> is unchanged</li>
      <li>‚úî The <strong>rule</strong> used is correct</li>
      <li>‚úî The <strong>output</strong> matches that rule</li>
      <li>‚úî Nothing was silently altered, corrupted, or tampered with</li>
    </ul>

    <p style="margin-top:15px;">NOVAK is the world‚Äôs first <strong>proof-before-action</strong> system.</p>

    <h3 style="margin-top:26px;">Why It Matters</h3>
    <ul style="margin-left:20px;">
      <br>
      <li>‚úî Stops fraud before it happens</li>
      <li>‚úî Stops automation errors before harm occurs</li>
      <li>‚úî Blocks corrupted data from executing</li>
      <li>‚úî Makes government systems provable and traceable</li>
      <li>‚úî Works in real time, locally, without blockchain</li>
    </ul>

    <p style="margin-top:22px; font-weight:600;">
      NOVAK is the safety layer automation should have had for 50 years.
    </p>

    <!-- ‚≠ê Bottom-right collapse button -->
    <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
      ‚ñ≤ Collapse
    </button>

  </div>
</details>

  <!-- ================================================================ -->
  <!-- ‚úÖ AUDIENCE SELECTOR + WHY NOVAK + WHAT IS NOVAK SECTION         -->
  <!-- ================================================================ -->

  <h2 style="margin-top:24px; margin-bottom:10px;">Choose Your Role or Interest:</h2>

  <!-- Audience Selector -->
  <div id="audienceNav" class="pill-row" style="margin-bottom:16px;">
    <button id="btn-public"     class="aud-btn" onclick="setAudience('public')">üåç Public</button>
    <button id="btn-government" class="aud-btn" onclick="setAudience('government')">üèõ Government</button>
    <button id="btn-investor"   class="aud-btn" onclick="setAudience('investor')">üíº Investor</button>
    <button id="btn-cyber"      class="aud-btn" onclick="setAudience('cyber')">üõ° Cybersecurity</button>
    <button id="btn-academic"   class="aud-btn" onclick="setAudience('academic')">üéì Academic</button>
  </div>

  <!-- Audience messaging output -->
  <div id="audienceContent"
       class="card"
       style="margin-top:0; font-size:16px; line-height:1.55;">
  </div>
 
 <!-- WHAT IS NOVAK? (Name + NOT Blockchain/Bitcoin/SSL) -->
  <div id="whatIsNovakCard" class="card" style="margin-top:24px; position:relative;">
    <h2 class="section-title">What is NOVAK?</h2>

    <p style="margin-bottom:10px;">
      <strong>NOVAK</strong> stands for
      <strong>Novak Objective Verification of Autonomous Knowledge</strong>.
      It is a cryptographic ‚Äúgovernor‚Äù that forces any automated system to prove integrity
      <em>before</em> it is allowed to act.
    </p>

    <ul style="margin-left:20px; margin-bottom:14px;">
      <li><strong></strong>Humans, AI, or malware cannot silently bypass it.</li>
      <li><strong></strong>Every decision has a math-checkable receipt.</li>
      <li><strong></strong>A small, hardened layer that sits beside existing systems and
          enforces proof-before-action.</li>
    </ul>

    <p style="margin-bottom:8px; font-weight:600;">
      NOVAK is <u>not</u>:
    </p>
    <ul style="margin-left:20px; margin-bottom:6px;">
      <li>‚ùå Not a blockchain</li>
      <li>‚ùå Not a cryptocurrency or token</li>
      <li>‚ùå Not SSL/TLS or a VPN tunnel</li>
      <li>‚ùå Not a logging system that only reacts after harm</li>
    </ul>

    <p>
      Instead, NOVAK sits <em>in front</em> of critical actions and demands cryptographic proof that
      <strong>data, rules, and outputs all match</strong> what was approved. If anything is off ‚Äî it refuses
      to execute.
    </p>

<button class="action-btn" onclick="hideSection('whatIsNovakCard','hideWhatIsNovak')">
  ‚úÖ Got it ‚Äî Hide
</button>

<button onclick="hideSection('whatIsNovakCard','hideWhatIsNovak')"
  style="position:absolute; top:14px; right:14px; background:none; border:none; font-size:20px; cursor:pointer;">
  ‚úï
</button>

  </div>

    <!-- WHY NOVAK ‚Äî WHY NOW? -->
  <div id="whyNovakCard" class="card" style="margin-top:24px; position:relative;">
    <h2 class="section-title">Why NOVAK ‚Äî Why Now?</h2>

    <p>
      Automation now approves mortgages, denies veterans‚Äô benefits, sets insurance rates, steers vehicles,
      recommends surgeries, and moves trillions of dollars ‚Äî often without proof of correctness, legality, or integrity.
    </p>

    <p style="margin-top:12px;">
      NOVAK changes this ‚Äî requiring mathematical proof <strong>before</strong> any automated action occurs.
    </p>

    <ul style="margin-top:12px; margin-left:20px;">
      <li>If data changes ‚Üí NOVAK detects instantly</li>
      <li>If rule is wrong ‚Üí NOVAK blocks execution</li>
      <li>If fraud occurs ‚Üí NOVAK produces evidence</li>
      <li>If system glitches ‚Üí NOVAK prevents harm</li>
    </ul>

    <p style="margin-top:14px; font-weight:600;">
      No blockchain. No cryptocurrency. No SSL/TLS tunnel. No central authority. Just cryptographic
      proof-before-action execution integrity.
    </p>

<button class="action-btn" onclick="hideSection('whyNovakCard','hideWhyNovak')">
  ‚úÖ Got it ‚Äî Hide
</button>

<button onclick="hideSection('whyNovakCard','hideWhyNovak')"
  style="position:absolute; top:14px; right:14px; background:none; border:none; font-size:20px; cursor:pointer;">
  ‚úï
</button>

  </div>

 <!-- WHAT CHANGES WITH NOVAK -->
  <div id="whatChangesCard" class="card" style="margin-top:32px; position:relative;">
    <h2 class="section-title">What Changes With NOVAK?</h2>

    <p>
      Most systems today rely on logging <strong>after</strong> something already happened.
      NOVAK requires proof <strong>before</strong> action.
    </p>

    <div style="margin-top:14px;">
      <p style="color:var(--red); font-weight:600; margin-bottom:6px;">‚ùå Without NOVAK</p>
      <p style="margin-bottom:14px;">
        System executes even if data is wrong ‚Äî Hash exists but cannot stop harm ‚Äî Fraud discovered weeks or years later ‚Äî
        No mathematical guarantee of legality ‚Äî Human trust required.
      </p>

      <p style="color:var(--green); font-weight:600; margin-bottom:6px;">‚úÖ With NOVAK</p>
      <p>
        Proof required before action ‚Äî Data, rules &amp; output cryptographically bound ‚Äî
        Fraud blocked instantly ‚Äî Evidence auto-generated ‚Äî
        Trust replaced with math.
      </p>
    </div>

<button class="action-btn" onclick="hideSection('whatChangesCard','hideWhatChanges')">
  ‚úÖ Got it ‚Äî Hide
</button>

<button onclick="hideSection('whatChangesCard','hideWhatChanges')"
  style="position:absolute; top:14px; right:14px; background:none; border:none; font-size:20px; cursor:pointer;">
  ‚úï
</button>

</div> <!-- closes WHAT CHANGES WITH NOVAK only -->

<!-- EXPLAINER BUTTONS ‚Äî MUST STAY INSIDE .container -->
<div class="pill-row" style="margin-top:26px;">
  <button class="pill-btn explain-btn" onclick="showExplain('simple')">ü§Ø I don't get it</button>
  <button class="pill-btn explain-btn" onclick="showExplain('milkshake')">ü•§ Shake Analogy</button>
  <button class="pill-btn explain-btn" onclick="showExplain('pencil')">üñçÔ∏è Pencil Analogy</button>
  <button class="pill-btn explain-btn" onclick="showExplain('key')">üîë Key Analogy</button>
  <button class="pill-btn explain-btn" onclick="showExplain('gov')">üèõ Federal Savings</button>
  <button class="pill-btn explain-btn" onclick="showExplain('how')">üëÅÔ∏è How This Works</button>
</div> <!-- closes ONLY the analogy button row -->

<div id="explainerOutput" class="card" style="display:none; margin-top:22px;"></div>

  <!-- ==================================================================== -->
  <!--  END OF PART 1 ‚Äî NEXT MESSAGE (PART 2) STARTS WITH TRY-IT HASH AREA  -->
  <!-- ==================================================================== -->

<!-- ‚úÖ STORY PANEL -->
<div id="storyPanel"
     class="card"
     style="display:none; margin-top:20px; font-size:15px; line-height:1.6;">
</div>
<!-- STORY PANEL ends, container stays open -->

<!-- ‚úÖ PART 2 ‚Äî Try It + Hash Engine + Example Data + File Drop + Games -->

<!-- EIR + QR INSTANT CERTIFICATES -->
<div class="card"
     style="
       margin-top:28px;
       padding:20px;
       background:rgba(0, 200, 0, 0.06);       /* faint green verification tint */
       border:1px solid rgba(0, 160, 0, 0.18); /* subtle green verification border */
       box-shadow:0 2px 6px rgba(0,0,0,0.04);  /* gentle lift */
       border-radius:14px;
       position:relative;                     /* required for bottom-right collapse */
     ">

  <details class="novak-collapse">
    <summary style="cursor:pointer; font-size:20px; padding:6px 0;">
      üîê EIR + QR Instant Certificates
      <span style="opacity:0.6; font-size:0.85em;">(For those that already know)</span>
    </summary>

    <div style="margin-top:14px;">

      <p style="margin-top:8px;">
        Upload any file. NOVAK will compute a SHA-256 HVET, build a local
        Execution Identity Receipt (EIR), and generate a QR code that binds
        the file + HVET + timestamp ‚Äî all <strong>local in your browser</strong>,
        no server calls.
      </p>

      <p style="margin-top:6px; font-size:13px; opacity:0.85;">
        üö´ This public demo is for educational purposes only ‚Äî NOT for HIPAA-regulated environments.
        Never use real patients, real claims, or real medical documents here ‚Äî training data only.
        NOVAK does not collect, store, transmit, or retain data, but user responsibility applies.
      </p>

      <!-- File picker -->
      <div style="margin-top:18px;">
        <input type="file" id="eirFileInput" />
        <button class="action-btn" style="margin-left:10px;"
                onclick="handleEirFile()">
          ‚öôÔ∏è Generate HVET + EIR + QR
        </button>
      </div>

      <!-- Results -->
      <div id="eirResultBlock" style="margin-top:24px; display:none;">

        <h3 style="font-size:17px;">üîê NOVAK HVET</h3>
        <pre id="eirHvet"
             style="
               margin-top:8px;
               font-family:'JetBrains Mono', monospace;
               font-size:13px;
               white-space:pre-wrap;
               overflow-wrap:anywhere;
               word-break:break-all;
               background:var(--card);
               padding:10px;
               border-radius:8px;
               border:1px solid var(--border);
             ">
        </pre>


        <h3 style="font-size:17px; margin-top:18px;">üìú Execution Identity Receipt (EIR)</h3>
        <pre id="eirText"
             style="
               margin-top:8px;
               font-family:'JetBrains Mono', monospace;
               font-size:13px;
               white-space:pre-wrap;
               overflow-wrap:anywhere;   /* ‚úÖ allow long hashes to wrap */
               word-break:break-all;     /* ‚úÖ force-break long tokens if needed */
               background:var(--card);
               padding:10px;
               border-radius:8px;
               border:1px solid var(--border);
             ">
        </pre>

        <h3 style="font-size:17px; margin-top:18px;">üì° QR Binding (File ‚Üí HVET ‚Üí EIR)</h3>
        <canvas id="eirQrCanvas"
                style="margin-top:8px; border-radius:8px; background:#fff;"></canvas>

        <p style="margin-top:12px; font-size:13px; opacity:0.8;">
          Scan this QR from any device. It encodes the full EIR JSON, including
          filename, size, HVET (SHA-256), and ISO-8601 timestamp.
        </p>

        <button class="action-btn" style="margin-top:12px;" onclick="downloadEirPdf()">
          üìÑ Download Professional Certificate (PDF)
        </button>

      </div>

      <!-- ‚≠ê Bottom-right collapse button -->
      <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
        ‚ñ≤ Collapse
      </button>

    </div> <!-- end inner -->
  </details>
</div>

<!-- ======================================================= -->
<!-- ‚≠ê GOVERNMENT-GRADE NOVAK CERTIFICATE ENGINE (COLLAPSIBLE) -->
<!-- ======================================================= -->

<div class="card" style="margin-top:28px; padding:20px;">

  <details id="govCollapse">
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üèõ NOVAK Government-Grade Certificate Generator ‚Äî Click to Expand
    </summary>

    <div style="padding:4px 0 0 0; margin-top:8px; position:relative;">

      <p style="margin-bottom:18px; font-size:16px; line-height:1.6;">
This engine generates a Treasury-Grade NOVAK Execution Identity Receipt (EIR) entirely in HTML5 Canvas. It includes: multi-algorithm HVET (SHA-256/384/512 + SHA-3-256/512), HVET-derived guilloch√© curves, spectral holographic foil strip, hologram stamp, microtext border (L0‚ÄìL15 ‚Ä¢ PL-X ‚Ä¢ PS-X), triquetra weave, dual forensic substrates, watermark tamper-reveal layer, HVET diagonal microtext mesh, PS-X metallic corner seals, registry anchors, bound QR payload, and the full EIR identity block ‚Äî all rendered with no external libraries.
      </p>

      <!-- ======================================= -->
      <!-- FILE INPUT + BUTTONS -->
      <!-- ======================================= -->
      <div style="margin-bottom:16px;">
        <input type="file" id="govFileInput" />

        <button class="action-btn" onclick="NOVAK_GOV.generate()">
          ‚öôÔ∏è Generate Government-Grade Certificate
        </button>

        <button id="govDownloadBtn"
                class="action-btn"
                style="margin-top:16px; display:none;"
                onclick="NOVAK_GOV.downloadPDF()">
          üìÑ Download Government-Grade Certificate (PDF)
        </button>
      </div>

      <!-- ======================================= -->
      <!-- SCROLLABLE PREVIEW WINDOW -->
      <!-- ======================================= -->
      <div id="govPreview"
           style="
             margin-top:22px;
             display:none;
             max-height:1200px;
             overflow-y:auto;
             overflow-x:auto;
             border:1px solid var(--border);
             border-radius:12px;
             padding:10px;
             background:var(--card);
           ">

        <canvas id="govCanvas"
                width="3000"
                height="4200"
                style="
                  display:block;
                  margin:auto;
                  background:#ffffff;
                  border-radius:8px;
                ">
        </canvas>

        <!-- OPTIONAL DEBUG -->
        <pre id="govDebug"
             style="
               margin-top:16px;
               font-family:'JetBrains Mono';
               font-size:12px;
               background:var(--card);
               padding:14px;
               border:1px solid var(--border);
               border-radius:8px;
               display:none;
               white-space:pre-wrap;
               overflow-wrap:anywhere;
             "></pre>

      </div>

<!-- ======================================= -->
<!-- ‚≠ê SECURITY LAYERS (UPDATED TO MATCH ENGINE) -->
<!-- ======================================= -->

<h3 style="margin-top:32px; font-size:18px; font-weight:600;">
  üîê What Do All These NOVAK Security Layers Mean?
</h3>

<p style="margin-bottom:18px; font-size:16px; line-height:1.6;">
  NOVAK certificates implement a <strong>multi-layer cryptographic, forensic, holographic, and 
  execution-integrity security stack</strong>.  
  Each layer provides a different form of tamper evidence, correctness assurance, or 
  anti-counterfeit protection.  
  The current <strong>Government-Grade Certificate Generator</strong> includes all of the following components:
</p>

<!-- üîΩ INDIVIDUAL EXPANDABLE SECURITY LAYERS -->
<!-- ================================================= -->

<details class="sub-collapse">
  <summary>üî¢ Multi-Algorithm HVET Suite (SHA-2 ‚Üí SHA-3)</summary>
  <div class="sub-card">
    <p>
      Every file is hashed with <strong>five</strong> algorithms: SHA-256, SHA-384, 
      SHA-512, SHA-3-256, and SHA-3-512.  
      Together they form the <strong>Multi-Algorithm HVET Suite</strong>, providing 
      cryptographic redundancy and long-term post-quantum resilience.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üåÄ Derived Guilloch√© (Primary Pattern)</summary>
  <div class="sub-card">
    <p>
      A classical banknote curve, but driven directly by the HVET digest.  
      A <strong>single-bit change</strong> in the file mutates the entire geometry.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üß© Interference Guilloch√© (Secondary Pattern)</summary>
  <div class="sub-card">
    <p>
      A secondary multi-frequency wave superimposed on the primary curve.  
      Impossible to replicate without the underlying HVET.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üî∑ Triquetra Security Weave</summary>
  <div class="sub-card">
    <p>
      A geometric interlock pattern distorted by HVET phase offsets.  
      Used to detect scaling, stretching, or recompression attacks.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üìê HVET Diagonal Microtext Mesh</summary>
  <div class="sub-card">
    <p>
      Tens of thousands of diagonal text lines generated from the HVET.  
      Reflows under compression ‚Üí instantly reveals tampering.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>ü´• Dual-Layer Forensic Substrate</summary>
  <div class="sub-card">
    <p>
      Two independent blurring/noise fields that break under screenshotting, 
      color shifts, printer drift, or AI super-resolution.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üî• Watermark Heatmap Tamper-Reveal Layer</summary>
  <div class="sub-card">
    <p>
      A per-pixel HVET-modulated heatmap that exposes any re-render, 
      recompress, or rescan.  
      Functions like a digital watermark + forensic dye.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üåà Vertical Spectral Foil Strip</summary>
  <div class="sub-card">
    <p>
      A full-height woven holofoil strip with cyclic spectral gradients, 
      HVET-driven displacement fields, woven fibers, and diffraction noise.  
      This is a <strong>Treasury-grade foil effect</strong>.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>ü™© NOVAK Hologram Stamp</summary>
  <div class="sub-card">
    <p>
      A C1-style hologram with HVET-seeded concentric interference rings.  
      Behaves like a pseudo-optical hologram under zoom.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üîç Microtext Border (L0‚ÄìL15 ‚Ä¢ PL-X ‚Ä¢ PS-X)</summary>
  <div class="sub-card">
    <p>
      Continuous perimeter microtext containing the <strong>15 NOVAK Laws</strong> 
      and <strong>Industry Addenda PL-X / PS-X</strong>.  
      Breaks immediately if the certificate is altered or cropped.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üõ° PS-X / SP-2 Metallic Corner Seals</summary>
  <div class="sub-card">
    <p>
      Four HVET-derived metallic seals with guilloch√© micro-engraving and 
      text halos.  
      Designed to mimic high-end government document seals.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üîó Registry Anchors (SHA-512 + BLAKE3)</summary>
  <div class="sub-card">
    <p>
      A chained cryptographic anchor that binds file name, size, 
      timestamps, serial, and the full HVET suite.  
      Fully verifiable with the public NOVAK Verifier.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üìÑ Execution Identity Receipt (EIR Block)</summary>
  <div class="sub-card">
    <p>
      The machine-verifiable execution record proving deterministic, 
      rule-compliant processing.  
      Includes serial, metadata, timestamps, and HVET summary.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üì± EIR QR Payload (Level-H Redundancy)</summary>
  <div class="sub-card">
    <p>
      A high-redundancy QR code with a cryptographically bound payload.  
      Survives distortion, cropping, and print degradation.
    </p>
  </div>
</details>

<details class="sub-collapse">
  <summary>üñº Refractive Gradient Frame</summary>
  <div class="sub-card">
    <p>
      A full-bleed gradient frame with non-linear spectral color stops.  
      Hard to clone, easy to verify visually.
    </p>
  </div>
</details>

<!-- ================================================= -->
<!-- Bottom collapse button -->
<!-- ================================================= -->
<button class="collapse-bottom-btn"
        onclick="document.getElementById('govCollapse').open = false;"
        style="margin-top:18px;">
  ‚ñ≤ Collapse
</button>

    </div>
  </details>
</div>

<!-- ====================================================== -->
<!-- ‚≠ê PUBLIC VERIFIER ‚Äî CHECK ANY NOVAK CERTIFICATE       -->
<!-- ====================================================== -->
<details class="novak-collapse"
         style="
           margin-top:26px;
           padding:0;
           border-radius:18px;
           
           /* ‚≠ê Blue Outer Container (matches EIR+QR green style) */
           background:rgba(0, 120, 255, 0.06);
           border:1px solid rgba(0, 120, 255, 0.18);
         ">

  <summary style="cursor:pointer; font-size:20px; padding:14px 0 14px 14px;">
    üîé Public NOVAK Certificate Verifier (Instant, Local)
  </summary>

  <div class="card"
       style="
         padding:26px;
         margin-top:0;           /* removes gap so card sits flush */
         font-size:16px;
         line-height:1.6;
         position:relative;
         border:none;            /* no internal card border */
         background:transparent; /* keeps blue container visible */
       ">

    <p>
      Anyone can independently verify a NOVAK certificate ‚Äî no servers, no blockchain,
      no network calls. Everything happens locally in your browser using:
    </p>

    <ul style="margin-left:20px; margin-top:10px;">
      <li>‚úî HVET (SHA-256)</li>
      <li>‚úî Registry Anchor (BLAKE3-512)</li>
      <li>‚úî Serial / Timestamp integrity</li>
      <li>‚úî Full EIR JSON payload</li>
    </ul>

    <p style="margin-top:12px;">
      Upload a NOVAK EIR JSON file or drag-in the QR payload. The verifier will show:
    </p>

    <ul style="margin-left:20px;">
      <li>üü¢ Verified ‚Äî if HVET + Anchor + Serial + Timestamp all match</li>
      <li>üî¥ Failed ‚Äî if anything has been altered or corrupted</li>
    </ul>

    <!-- INPUT PANEL -->
    <div style="margin-top:22px;">
      <input type="file" id="publicVerifierInput" accept=".json" />
      <button class="action-btn" style="margin-left:10px;"
              onclick="NOVAK_PublicVerifier.run()">
        ‚öôÔ∏è Verify Certificate
      </button>
    </div>

    <!-- RESULT -->
    <div id="publicVerifierResult"
         style="
           display:none;
           margin-top:24px;
           font-family:'JetBrains Mono', monospace;
           font-size:15px;
           white-space:pre-wrap;
           overflow-wrap:anywhere;
           border:1px solid var(--border);
           border-radius:8px;
           padding:16px;
           background:var(--card);
         ">
    </div>

    <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
      ‚ñ≤ Collapse
    </button>

  </div>
</details>
<div>

<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üß™ TEST Example ‚Äî Click to Expand
    </summary>

    <div style="padding:4px 0 0 0; margin-top:8px; position:relative;">

      <p style="margin-top:8px; font-size:16px; line-height:1.6;">
        If you type <strong>TEST</strong> (all caps) below example datasets in the "Try It Locally ‚Äî Hash Any Dataset", NOVAK produces the following results.
        Change one letter and everything changes ‚Äî this is known as the <em>avalanche effect</em>.
      </p>

      <!-- ================================================= -->
      <!-- MAIN SHA-256 EXAMPLE -->
      <!-- ================================================= -->

      <div style="margin-top:26px;">
        <strong style="font-size:17px;">TEST ‚Üí SHA-256</strong>

        <div class="hash-box">
          <span class="hash-value">
            94ee059335e587e501cc4bf90613e0814f00a7b08bc7c648fd865a2af6a22c2
          </span>
          <button class="copy-btn" onclick="copyHash(this)">üìã</button>
        </div>

        <div class="hash-meta">
          <span>üî¢ 64 hex chars</span>
          <span>üìè 256 bits</span>
          <span>‚öôÔ∏è SHA-256</span>
        </div>
      </div>

      <!-- ====================================================== -->
      <!-- 2. CLICKABLE DEFINITIONS -->
      <!-- ====================================================== -->
      <br>
      <details class="sub-collapse">
        <summary>üî¢ What is ‚Äú64 hex characters‚Äù?</summary>
        <div class="sub-card">
          <p>
            A SHA-256 hash is 64 characters long, using digits 0‚Äì9 and letters a‚Äìf.
            These represent 256 bits of mathematical output.
          </p>
        </div>
      </details>

      <br>
      <details class="sub-collapse">
        <summary>üìè What are ‚Äú256 bits‚Äù?</summary>
        <div class="sub-card">
          <p>
            ‚ÄúBits‚Äù measure information.  
            256 bits is astronomically large ‚Äî impossible to brute force.
          </p>
        </div>
      </details>

      <br>
      <details class="sub-collapse">
        <summary>‚öôÔ∏è What is SHA-256?</summary>
        <div class="sub-card">
          <p>
            SHA-256 is the most widely trusted secure hash in government, banking,  
            healthcare, cybersecurity, and NOVAK.
          </p>
        </div>
      </details>

      <!-- ================================================= -->
      <!-- VARIANTS THAT SHOW AVALANCHE EFFECT -->
      <!-- ================================================= -->

      <p style="margin-top:26px; font-weight:600; font-size:16px;">
        Change one letter ‚Äî watch the avalanche effect:
      </p>

      <div class="variant-block">
        <strong>Test ‚Üí</strong>
        <div class="hash-box hash-warn">
          <span class="hash-value">
            532eaabd9574880dbf76b9b8cc00832c20a6ec113d682299550d7a6e0f345e25
          </span>
          <button class="copy-btn" onclick="copyHash(this)">üìã</button>
        </div>
      </div>

      <div class="variant-block">
        <strong>test ‚Üí</strong>
        <div class="hash-box hash-warn">
          <span class="hash-value">
            9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08
          </span>
          <button class="copy-btn" onclick="copyHash(this)">üìã</button>
        </div>
      </div>

      <div class="variant-block">
        <strong>tEsT ‚Üí</strong>
        <div class="hash-box hash-warn">
          <span class="hash-value">
            876c5e143c421959adff3ed91b82556c433a279b6369e70592d2c9dc73455ce
          </span>
          <button class="copy-btn" onclick="copyHash(this)">üìã</button>
        </div>
      </div>

      <!-- ================================================= -->
      <!-- EXPERT MODE: MULTI-HASH COMPARISON -->
      <!-- ================================================= -->

      <div id="expertPanel" style="display:none; margin-top:34px;">
        <h3 style="margin-bottom:12px;">üî¨ Multi-Algorithm Comparison</h3>

        <p>Select an algorithm below:</p>

        <div style="display:flex; gap:12px; margin-top:10px;">
          <button class="pill-btn" onclick="showAlgo('sha256')">SHA-256</button>
          <button class="pill-btn" onclick="showAlgo('sha512')">SHA-512</button>
          <button class="pill-btn" onclick="showAlgo('sha384')">SHA-384</button>
        </div>

        <div id="algoResult" style="margin-top:20px;"></div>
      </div>

      <!-- ================================================= -->
      <!-- Animated Avalanche Demo -->
      <!-- ================================================= -->

      <div style="margin-top:42px;">
        <h3>‚ö° Avalanche Effect Visualizer</h3>
        <p style="margin-bottom:8px;">Click to flip one bit and watch the entire hash explode.</p>

        <button onclick="runAvalanche()" style="padding:10px 18px; border-radius:8px; border:1px solid var(--border); cursor:pointer;">
          üî• Flip 1 Bit
        </button>

        <pre id="avalancheOutput"
             style="margin-top:14px; padding:14px; background:var(--card);
                    border:1px solid var(--border); font-family:'JetBrains Mono';
                    min-height:80px; white-space:pre-wrap;"></pre>
        
      </div>

      <!-- ‚≠ê Bottom-right collapse button -->
      <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
        ‚ñ≤ Collapse
      </button>

    </div>
  </details>
</div>

<!-- ======================================================= -->
<!-- ‚≠ê NOVAK SHA EDUCATION SUITE ‚Äî SINGLE EXPANDABLE MODULE -->
<!-- ======================================================= -->

<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üîê NOVAK SHA Knowledge Center ‚Äî Simple ‚Üí Deep ‚Üí Interactive ‚Üí Technical ‚Üí Diagrams ‚Üí NOVAK Use
    </summary>

    <div style="padding:2px 0 0 0; margin-top:10px; font-size:16px; line-height:1.6; position:relative;">

      <!-- =================================================== -->
      <!-- 1. SIMPLE EXPLANATION -->
      <!-- =================================================== -->
      <h2 style="margin-top:0;">üü¶ 1. SHA Explained (Simple Terms)</h2>

      <p>
        <strong>SHA</strong> stands for <strong>Secure Hash Algorithm</strong>.
        Think of it like putting information into a magic blender:
      </p>

      <pre class="diagram-box">
INPUT  ‚Üí  [ SHA Blender ]  ‚Üí  UNIQUE OUTPUT
      </pre>
<br>
      <p>
        You can put in:
        <br>‚Ä¢ A word<br>
        ‚Ä¢ A VA claim<br> 
        ‚Ä¢ A VIN<br>  
        ‚Ä¢ A PDF<br>  
        ‚Ä¢ A medical note<br>  
        ‚Ä¢ A whole book
      </p>
<br>
      <p>
        SHA turns it all into a <strong>64 hex character one-way fingerprint</strong>.
      </p>
<br>
      <p style="font-weight:600;">
        Change even ONE letter ‚Üí the entire fingerprint becomes totally different.
      </p>
<br>
      <p>
        One tiny change gives a totally different fingerprint.  
        This is how NOVAK spots invisible tampering.
      </p>
    
      <!-- ====================================================== -->
      <!-- 2. CLICKABLE DEFINITIONS -->
      <!-- ====================================================== -->
<br>
<details class="sub-collapse">
  <summary>üî¢ What is ‚Äú64 hex characters‚Äù?</summary>
  <div class="sub-card">
    <p>
      A SHA-256 hash is 64 characters long, using digits 0‚Äì9 and letters a‚Äìf.
      These represent 256 bits of mathematical output.
    </p>
  </div>
</details>
<br>
<details class="sub-collapse">
  <summary>üìè What are ‚Äú256 bits‚Äù?</summary>
  <div class="sub-card">
    <p>
      ‚ÄúBits‚Äù measure information.  
      256 bits is astronomically large ‚Äî impossible to brute force.
    </p>
  </div>
</details>
<br>
<details class="sub-collapse">
  <summary>‚öôÔ∏è What is SHA-256?</summary>
  <div class="sub-card">
    <p>
      SHA-256 is the most widely trusted secure hash in government, banking,  
      healthcare, cybersecurity, and NOVAK.
    </p>
  </div>
</details>

      <!-- =================================================== -->
      <!-- 2. SHA FAMILY OVERVIEW WITH COLOR CODE -->
      <!-- =================================================== -->
<hr style="margin:26px 0; opacity:0.35;">

<h2>üü™ 2. The SHA Family (Versions & Security)</h2>

<p>
  SHA comes in several generations ‚Äî from obsolete and unsafe to modern and federally approved:
</p>

<div class="sha-table">

  <div class="sha-row">
    <div class="sha-name sha-broken">SHA-1</div>
    <div class="sha-desc">‚ùå Broken ‚Äî collisions discovered (never use)</div>
  </div>

  <div class="sha-row">
    <div class="sha-name sha-good">SHA-256</div>
    <div class="sha-desc">‚úÖ Modern standard ‚Äî fast, secure, widely approved</div>
  </div>

  <div class="sha-row">
    <div class="sha-name sha-good">SHA-384</div>
    <div class="sha-desc">üîê DoD Suite-B / ECC-384 compatibility</div>
  </div>

  <div class="sha-row">
    <div class="sha-name sha-good">SHA-512</div>
    <div class="sha-desc">üîí Largest SHA-2 variant ‚Äî 512-bit internal state</div>
  </div>

  <div class="sha-row">
    <div class="sha-name sha-new">SHA-3</div>
    <div class="sha-desc">üß™ Newest generation (Keccak sponge construction)</div>
  </div>

</div>

      <!-- =================================================== -->
      <!-- 3. REAL-WORLD USAGE MAP -->
      <!-- =================================================== -->
<hr style="margin:26px 0; opacity:0.35;">

<h2>üü© 3. Where SHA Is Used in Real Life</h2>

<table class="novak-table">
  <thead>
    <tr>
      <th>Industry / System</th>
      <th>Hash Standard Used</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>VA / Federal Agencies</td><td>SHA-256</td></tr>
    <tr><td>Healthcare Systems</td><td>SHA-256</td></tr>
    <tr><td>Banking & IRS</td><td>SHA-256 / SHA-512</td></tr>
    <tr><td>TLS / HTTPS Certificates</td><td>SHA-256 / SHA-384</td></tr>
    <tr><td>DoD / National Security</td><td>SHA-384</td></tr>
    <tr><td>Bitcoin</td><td>SHA-256</td></tr>
    <tr><td>Ethereum</td><td>Keccak (SHA-3 family)</td></tr>
  </tbody>
</table>
<br>
<p>
  SHA protects websites, banking, federal systems, medical systems,
  military communications, blockchain, and your everyday devices.
</p>

<details class="sub-collapse" style="margin-top:32px;">
  <summary>üìä SHA vs MD5 vs CRC (Click to Compare)</summary>
  <div class="sub-card" style="padding:0;">
    <table class="novak-table" style="margin:0;">
      <thead>
        <tr>
          <th>Algorithm</th>
          <th>Security Status</th>
          <th>Use Today</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>CRC32</td><td>‚ùå None</td><td>File transfers only</td></tr>
        <tr><td>MD5</td><td>‚ùå Broken</td><td>Legacy systems</td></tr>
        <tr><td>SHA-256</td><td>‚úÖ Strong</td><td>NOVAK, VA, DoD, banking</td></tr>
        <tr><td>SHA-3</td><td>üß™ New</td><td>Crypto research, Ethereum</td></tr>
      </tbody>
    </table>
  </div>
</details>

      <!-- =================================================== -->
      <!-- 4. TECHNICAL BREAKDOWN -->
      <!-- =================================================== -->
<hr style="margin:26px 0; opacity:0.35;">

<h2>üß† 4. Technical Breakdown (For Engineers & Auditors)</h2>

<table class="novak-table">
  <thead>
    <tr>
      <th>Property</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>Algorithm</td><td>SHA-256</td></tr>
    <tr><td>Output</td><td>256-bit digest</td></tr>
    <tr><td>Length</td><td>64 hex characters</td></tr>
    <tr><td>Speed</td><td>Hardware accelerated (Intel / AMD / ARM)</td></tr>
    <tr><td>FIPS</td><td>Approved (FIPS 180-4)</td></tr>
    <tr><td>Use</td><td>Integrity, signatures, decision-gating</td></tr>
  </tbody>
</table>

<p>
  SHA-256 is collision-resistant:  
  <strong>No one can create two different documents with the same hash.</strong>
</p>

      <!-- =================================================== -->
      <!-- 5. AVALANCHE EFFECT -->
      <!-- =================================================== -->
<hr style="margin:26px 0; opacity:0.35;">

<h2>‚ö° 5. Avalanche Effect (Why SHA Is Powerful)</h2>

<p>As shown earlier, change one character and everything changes.</p><br>

<table class="novak-table">
  <thead>
    <tr><th>Input</th><th>SHA-256 Digest (Shortened)</th></tr>
  </thead>
  <tbody>
    <tr><td>"TEST"</td><td>94ee0593‚Ä¶</td></tr>
    <tr><td>"TeST"</td><td>8d3b72f1‚Ä¶</td></tr>
    <tr><td>"test"</td><td>9f86d081‚Ä¶</td></tr>
  </tbody>
</table>

<p>
  One tiny change ‚Üí a completely different hash.
  This reveals tampering even when human eyes cannot.
</p>

      <!-- =================================================== -->
      <!-- 6. WHY NOVAK USES SHA-256 -->
      <!-- =================================================== -->
<hr style="margin:26px 0; opacity:0.35;">

<h2>üîµ 6. Why NOVAK Chooses SHA-256</h2>

<p>NOVAK uses <strong>SHA-256</strong> because it is:</p><br>

<ul style="margin-left:20px;">
  ‚úî FIPS-approved and federally recognized<br>
  ‚úî Supported natively in WebCrypto (no server required)<br>
  ‚úî Resistant to collisions and tampering<br>
  ‚úî Hardware-accelerated on all major CPUs<br>
  ‚úî Fast enough for real-time execution-gating<br>
  ‚úî Trusted across VA, DoD, banking, cybersecurity
</ul>

<p style="margin-top:12px; font-weight:600;">
  In a full NOVAK deployment:<br><br>
  <strong>No system may ACT unless SHA-256 proves the data is unchanged.</strong>
</p>

      <!-- =================================================== -->
      <!-- 7. WHY NOVAK IS MODULAR -->
      <!-- =================================================== -->
<hr style="margin:26px 0; opacity:0.35;">

<h2>üåÄ 7. Why NOVAK Is Modular (Hash-Agnostic Architecture)</h2>

<p>
  NOVAK is not ‚Äúlocked‚Äù to SHA-256.  
  It is a <strong>modular cryptographic system</strong> where the hashing engine is 
  a replaceable component.
</p>
<br>
<p>Supported hash engines:</p>
<br>
<ul style="margin-left:20px;">
üîπ SHA-256 (default)<br>
üîπ SHA-384 (DoD Suite-B)<br>
üîπ SHA-512 (high-security deployments)<br>
üîπ SHA-3-256 (Keccak)<br>
üîπ Any future NIST-approved function
</ul>
<br>
<p>
  NOVAK‚Äôs laws (<strong>L0‚ÄìL15</strong>) never mandate a specific algorithm ‚Äî only:
</p>
<br>
<table class="novak-table">
  <tbody>
    <tr><td><strong>‚ÄúUse a federally-approved, collision-resistant function.‚Äù</strong></td></tr>
  </tbody>
</table>
<br>
<p>This guarantees NOVAK remains future-proof:</p>
<br>
<ul style="margin-left:20px;">
‚úî Agencies can choose the algorithm matching their policy<br>
‚úî Changing algorithms does not change NOVAK workflows<br>
‚úî Hardware-acceleration stays fully supported
</ul>

<p style="font-weight:600; margin-top:14px;">
  NOVAK‚Äôs integrity model stays identical ‚Äî only the math block swaps.
</p>

      <!-- =================================================== -->
      <!-- 8. HOW NOVAK USES SHA DIFFERENTLY (THE GATE MODEL) -->
      <!-- =================================================== -->

<hr style="margin:26px 0; opacity:0.35;">

<h2>üõ°Ô∏è 8. How NOVAK Uses SHA Differently (SHA ‚Üí Gate Instead of Log)</h2>

<p>
  SHA today is used mostly as a <strong>log</strong> ‚Äî a way to record what happened.
  NOVAK transforms SHA into a <strong>gate</strong> ‚Äî a way to decide what is
  <em>allowed</em> to happen.
</p>

<p style="margin-top:12px; font-weight:600;">
  This single shift is why NOVAK stops invisible tampering while
  today‚Äôs systems only detect it after harm.
</p>

<!-- =================================================== -->
<!-- 8A. SIMPLE EXPLANATION -->
<!-- =================================================== -->

<details class="sub-collapse" style="margin-top:18px;">
  <summary>üü¶ Simple Explanation ‚Äî ‚ÄúHow NOVAK Uses SHA‚Äù</summary>
  <div class="sub-card">
<br>    
<p>
      SHA makes a fingerprint of your data.  
      NOVAK uses that fingerprint as a <strong>lock</strong>.
    </p>
<br>
    <p>
      If <strong>anything</strong> changes ‚Äî even a single character ‚Äî
      the fingerprint changes.
    </p>
<br>
    <p style="font-weight:600;">
      NOVAK checks the fingerprint BEFORE the system is allowed to act.
    </p>

    <ul style="margin-left:20px;">
      <li>‚úî If input is unchanged ‚Üí action allowed</li>
      <li>‚úî If rule is unchanged ‚Üí action allowed</li>
      <li>‚úî If output matches ‚Üí action allowed</li>
      <li>‚ùå If ANYTHING changes ‚Üí NOVAK refuses execution</li>
    </ul>

    <p style="margin-top:10px; font-weight:600;">
      SHA becomes a <strong>gatekeeper</strong>, not a passive log.
    </p>
  </div>
</details>

<!-- =================================================== -->
<!-- 8B. TECHNICAL EXPLANATION -->
<!-- =================================================== -->

<details class="sub-collapse" style="margin-top:18px;">
  <summary>üß† Deep Technical Explanation ‚Äî ‚ÄúHow NOVAK Uses SHA Architecturally‚Äù</summary>
  <div class="sub-card">
<br>    
<p>
      Traditional systems compute hashes for:
      <br>‚Ä¢ logging  
      ‚Ä¢ storage integrity  
      ‚Ä¢ file verification  
      ‚Ä¢ blockchain syncing  
    </p>

    <p style="margin-top:10px;">
      But these hashes are <strong>not enforced before execution</strong>.
      Systems run even if data changed, hashes mismatch, or corruption occurred.
    </p>

    <p style="margin-top:12px; font-weight:600;">
      NOVAK introduces a cryptographic enforcement layer:
    </p>

<pre class="diagram-box" style="white-space:pre; text-align:center;">
INPUT + RULE + EXPECTED OUTPUT
          ‚îÇ
      [ SHA-256 ]
          ‚Üì
   HVET / EIR Receipt
          ‚Üì
NOVAK GATE (Allow? Block?)
</pre>

    <ul style="margin-left:20px; margin-top:14px;">
      <li>‚úî Fingerprint must match EXACTLY</li>
      <li>‚úî Input, rule, and output must all bind together</li>
      <li>‚úî EIR receipt must match previous approved truth</li>
      <li>‚úî If ANY element differs ‚Üí NOVAK blocks execution</li>
    </ul>

    <p style="margin-top:14px;">
      This creates <strong>deterministic, cryptographically provable execution</strong>.
    </p>
  </div>
</details>

<!-- =================================================== -->
<!-- 8B-1. ANIMATION: HR ‚Üí HD ‚Üí HO ‚Üí HVET -->
<!-- =================================================== -->

<div class="card" style="margin-top:24px; padding:20px; text-align:center;">

  <h3 style="font-size:20px; margin-bottom:16px;">
    üîÑ NOVAK Hash Flow Animation (HR ‚Üí HD ‚Üí HO ‚Üí HVET)
  </h3>

  <div id="novakFlowAnim"
       style="display:flex; justify-content:center; gap:18px;
              align-items:center; flex-wrap:wrap;">

    <div class="flow-box" id="flowHR">HR<br><small>Rule Hash</small></div>
    <div class="flow-arrow">‚Üí</div>

    <div class="flow-box" id="flowHD">HD<br><small>Data Hash</small></div>
    <div class="flow-arrow">‚Üí</div>

    <div class="flow-box" id="flowHO">HO<br><small>Output Hash</small></div>
    <div class="flow-arrow">‚Üí</div>

    <div class="flow-box final" id="flowHVET">
      HVET<br>
      <small>Full Binding</small>
    </div>

  </div>

  <button onclick="runNovakFlowAnim()"
          class="action-btn"
          style="margin-top:20px;">
    ‚ñ∂ Play Animation
  </button>

</div>

<style>
.flow-box {
  padding:14px 20px;
  border:2px solid var(--blue);
  border-radius:10px;
  font-size:18px;
  min-width:80px;
  background:var(--card);
  transition:0.35s;
}
.flow-box.final {
  border-color:var(--green);
  font-weight:700;
}
.flow-arrow {
  font-size:26px;
  opacity:0.6;
}
.flow-box.active {
  background:var(--blue);
  color:white;
  transform:scale(1.15);
  box-shadow:0 0 10px rgba(0,0,0,0.2);
}
</style>

<script>

/* ========================================================= */
/* MICROTEXT PERIMETER CONTENT ‚Äî LAWS + ADDENDA (GLOBAL)     */
/* ========================================================= */
const NOVAK_MICROTEXT = `
L0‚ÄìL15: NOVAK Laws ‚Ä¢ PL-X ‚Ä¢ PS-X ‚Ä¢ Proof-Before-Action ‚Ä¢ Execution Integrity ‚Ä¢ 
Safety Gate ‚Ä¢ HVET ‚Ä¢ EIR ‚Ä¢ RGAC ‚Ä¢ Canonical Rule Binding ‚Ä¢ Deterministic Execution ‚Ä¢ 
Tamper-Evident Certification ‚Ä¢ Registrar-Grade Verification ‚Ä¢ SP-2 Treasury Standard ‚Ä¢ 
NO ACTION WITHOUT PROOF ‚Ä¢ 
`;
</script>

<script>
function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }

async function runNovakFlowAnim() {
  const items = ["flowHR","flowHD","flowHO","flowHVET"];
  for (let id of items) {
    document.getElementById(id).classList.add("active");
    await sleep(650);
    document.getElementById(id).classList.remove("active");
  }
  document.getElementById("flowHVET").classList.add("active");
}
</script>

      <!-- =================================================== -->
      <!-- 8C. DIAGRAM ‚Äî SHA TODAY vs NOVAK -->
      <!-- =================================================== -->

<h3 style="margin-top:26px; font-size:20px; text-align:center;">
üìä SHA Today vs NOVAK ‚Äî Side-By-Side
</h3>

<pre class="diagram-box" style="white-space:pre; text-align:center;">
SYSTEM               | WHEN CHECKS OCCUR | WHAT IT GUARANTEES     | CAN IT STOP BAD ACTION?
---------------------|-------------------|-------------------------|--------------------------
SHA Today (Typical)  | After action      | Integrity record        | ‚ùå No
TLS / SSL            | During transit    | Encryption only         | ‚ùå No
Logging / SIEM       | After action      | Audit trail             | ‚ùå No
Blockchain           | After action      | Ledger correctness      | ‚ùå No

NOVAK Protocol       | BEFORE action     | Input=Rule=Output match | ‚úÖ YES
</pre>

<p style="margin-top:16px;">
  NOVAK is the <strong>first system</strong> to use SHA as a <em>pre-execution cryptographic gate</em>.
</p>

      <!-- =================================================== -->
      <!-- 8D. WHY THIS ISN'T DONE TODAY -->
      <!-- =================================================== -->

<h3 style="margin-top:32px; font-size:20px;">‚ùì Why Isn‚Äôt This Already Being Done?</h3>

<ul style="margin-left:20px; margin-top:8px; line-height:1.6;">
  <li>Legacy systems only verify <strong>after</strong> execution (logging model)</li>
  <li>No existing standard mandates proof-before-action</li>
  <li>Most agencies rely on ‚Äútrust the system,‚Äù not ‚Äúprove correctness‚Äù</li>
  <li>Hash checks are usually optional ‚Äî not enforced at the execution layer</li>
</ul>

<p style="margin-top:12px; font-weight:600;">
  NOVAK changes this permanently by making proof a <strong>mandatory precondition</strong>  
  for automated action.
</p>

      <!-- =================================================== -->
      <!-- 8E. THE ENTIRE DIFFERENCE SUMMARIZED -->
      <!-- =================================================== -->

<h3 style="margin-top:26px; font-size:20px;">üîë The Entire Difference in One Sentence</h3>

<p style="font-weight:700; font-size:17px; margin-top:10px;">
  <strong>SHA today tells you what happened.</strong><br><br>
  <strong>NOVAK uses SHA to decide what is allowed to happen.</strong>
</p>

      <!-- ‚≠ê Bottom-right collapse button -->
      <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
        ‚ñ≤ Collapse
      </button>

    </div> <!-- end SHA inner content -->
  </details>
</div> <!-- end SHA Knowledge Center card -->

<!-- ======================================================= -->
<!-- STYLES for HASH BOXES, META, BUTTONS, WARN STATES -->
<!-- ======================================================= -->
<style>
.hash-box {
  margin-top:6px;
  background: var(--card);
  border: 1px solid var(--border);
  padding: 12px 14px;
  border-radius: 8px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 14px;
  position: relative;
  word-break: break-all;
  transition: 0.2s;
}

.hash-box:hover { border-color: var(--blue); }

.hash-warn { border-color:#d65f5f !important; }

.hash-meta {
  margin-top:6px;
  font-size:12px;
  opacity:0.65;
  display:flex;
  gap:16px;
}

.copy-btn {
  position:absolute;
  top:6px;
  right:6px;
  padding:2px 6px;
  font-size:13px;
  border:1px solid var(--border);
  border-radius:6px;
  background:var(--bg);
  cursor:pointer;
}

.copy-btn:hover {
  background:var(--blue);
  color:white;
}

.variant-block { margin-top:20px; }

</style>

<!-- ======================================================= -->
<!-- JAVASCRIPT: COPY, MODE TOGGLE, AVA/COMPARE -->
<!-- ======================================================= -->

<script>

// Copy only the hash (NOT the button)
function copyHash(btn) {
  const text = btn.parentElement.querySelector(".hash-value").innerText.trim();
  navigator.clipboard.writeText(text);
  btn.innerText = "‚úîÔ∏è";
  setTimeout(() => btn.innerText = "üìã", 900);
}

// BASIC <-> EXPERT mode toggle
function toggleHashMode() {
  const panel = document.getElementById("expertPanel");
  const btn = document.getElementById("modeToggle");

  if (panel.style.display === "none") {
    panel.style.display = "block";
    btn.innerText = "üü¶ Basic View";
  } else {
    panel.style.display = "none";
    btn.innerText = "üî∞ Expert View";
  }
}

// Multi-algorithm comparison output
const exampleInput = "TEST";

function showAlgo(algo) {
  let output = "";

  const hashes = {
    sha256: "94ee059335e587e501cc4bf90613e0814f00a7b08bc7c648fd865a2af6a22c2",
    sha512: "cd73502828457d15655bbd7a35d7c30bae43dfb697b86dd80b068cf1e95ce47e...",
    sha384: "7699bdffbb0f7cba4dcdcb2960b8a03fc8f179f1dc93b4bc1d6510c2eec1a7fa2d...",
    sha3:   "36f7b0df4ea8a04de7cdf46fa4591bbd19d1ba4e6c8cd133673e8386bb12d22b"
  };

  output = `
<strong>${algo.toUpperCase()}</strong>
<div class="hash-box">
  <span class="hash-value">${hashes[algo]}</span>
  <button class="copy-btn" onclick="copyHash(this)">üìã</button>
</div>`;

  document.getElementById("algoResult").innerHTML = output;
}

// Avalanche visualizer
function runAvalanche() {
  const original = "94ee059335e587e501cc4bf90613e0814f00a7b08bc7c648fd865a2af6a22c2";
  const mutated = original.replace(/0/, "1"); // flip a single bit visually

  const result = `
Original:
${original}

After flipping 1 bit:
${mutated}

‚Üí Entire hash changed.
`;

  document.getElementById("avalancheOutput").innerText = result;
}

</script>
  
<!-- ===================================================== -->
<!-- Example Dataset Loader                                 -->
<!-- ===================================================== -->

<script>
function loadExample(type) {
  // Use the main NOVAK input box
  const textarea = document.getElementById("novakInput");
  if (!textarea) return;

  const examples = {
    va: `VA Disability Claim Example
--------------------------------
Veteran: John Doe
SSN: 123-45-6789
Condition: Lumbar Spine Degeneration
Claim Date: 2024-02-10
Notes: Chronic pain, range of motion loss.`,
    
    finance: `Financial Transaction Example
--------------------------------
FROM: ACC# 4882203
TO: ACC# 2293842
AMOUNT: $4,900.22
TYPE: ACH TRANSFER
DATE: 2025-01-02`,

    robotics: `Robotics Command Example
--------------------------------
MOVE_ARM: +12.2¬∞
GRIP: CLOSE
TARGET: COORD(4.2, 9.1, 1.0)
AUTH: SESSION-99821`,

    system: `System Log Example
--------------------------------
[WARN] 2025-11-01T14:05:22Z CHECKSUM_MISMATCH
[INFO] 2025-11-01T14:05:23Z RETRYING
[OK]   2025-11-01T14:05:24Z SUCCESS`,

    legal: `Legal Filing Example
--------------------------------
Case: 2025-CV-99231
Plaintiff: A. Johnson
Defendant: R. Smith
Motion: Summary Judgment`
  };

  const value = examples[type] || "";
  textarea.value = value;

  // Recalculate hashes + update the live avalanche view
  if (typeof updateHashes === "function") {
    updateHashes();
  }
  if (typeof updateAutoDiff === "function") {
    updateAutoDiff(value);
  }
}
</script>

<!-- ===================================================== -->
<!-- DOM READY ‚Äî REGISTER novakInput                        -->
<!-- (THIS MUST RUN AFTER loadExample IS DEFINED)           -->
<!-- ===================================================== -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  window.novakInput = document.getElementById("novakInput");
});
</script>

<!-- ===================================================== -->
<!-- MODE 1 ‚Äî LIVE HASHING                                  -->
<!-- ===================================================== -->
<script>
async function computeSHA(text) {
  const enc = new TextEncoder().encode(text);
  const buf = await crypto.subtle.digest("SHA-256", enc);
  return Array.from(new Uint8Array(buf))
      .map(b => b.toString(16).padStart(2, "0"))
      .join("");
}

document.getElementById("expertInput").addEventListener("input", async e => {
  const hash = await computeSHA(e.target.value);
  document.getElementById("expertHash").textContent = "SHA-256 ‚Üí " + hash;
  updateDigestOutputs(hash);
});
</script>

<!-- ===================================================== -->
<!-- MASTER HASH ENGINE ‚Äî updateHashes()                    -->
<!-- (Your existing updateHashes() continues below)         -->
<!-- ===================================================== -->

<script>

async function updateHashes() {

  const input = document.getElementById("novakInput").value.trim();
  const output = document.getElementById("hashOutputList");

  if (!input) {
    output.innerHTML = "<em>Waiting for input from above...</em>";
    return;
  }

const selected = Array.from(document.querySelectorAll('.hashAlgo'))
  .filter(c => c.checked)
  .map(c => c.value);


  let html = "";
  let sha256Hash = null;
  let sha384Hash = null;
  let sha512Hash = null;
  let sha3Hash  = null;

  // SHA-256 -----------------------------------------------------
  if (selected.includes("SHA-256")) {
    const h = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(input));
sha256Hash = Array.from(new Uint8Array(h)).map(b => b.toString(16).padStart(2,"0")).join("");
    html += `<div>SHA-256 ‚Üí <strong>${sha256Hash}</strong></div>`;
  }

  // SHA-384 -----------------------------------------------------
  if (selected.includes("SHA-384")) {
    const h = await crypto.subtle.digest("SHA-384", new TextEncoder().encode(input));
sha384Hash = Array.from(new Uint8Array(h)).map(b => b.toString(16).padStart(2,"0")).join("");
    html += `<div>SHA-384 ‚Üí <strong>${sha384Hash}</strong></div>`;
  }

  // SHA-512 -----------------------------------------------------
  if (selected.includes("SHA-512")) {
    const h = await crypto.subtle.digest("SHA-512", new TextEncoder().encode(input));
sha512Hash = Array.from(new Uint8Array(h)).map(b => b.toString(16).padStart(2,"0")).join("");
    html += `<div>SHA-512 ‚Üí <strong>${sha512Hash}</strong></div>`;
  }

  // SHA3-256 (client-side JS lib) -------------------------------
  if (selected.includes("SHA3-256")) {
    if (typeof sha3_256 === "function") {
      sha3Hash = sha3_256(input);
      html += `<div>SHA3-256 ‚Üí <strong>${sha3Hash}</strong></div>`;
    } else {
      html += `<div>SHA3-256 ‚Üí <em>sha3_256() not loaded</em></div>`;
    }
  }

  // OUTPUT HASHES
  output.innerHTML = html;

  // =============================================================
  // STORE HASHES FOR RECEIPT + JSON + QR
  // =============================================================
  window.lastHashes = {
    sha256: sha256Hash,
    sha384: sha384Hash,
    sha512: sha512Hash,
    sha3_256: sha3Hash
  };

  // HVET placeholder (first 16 chars of SHA-256)
  window.hvetValue = sha256Hash ? sha256Hash.substring(0,16) : null;

  // If auto-verify enabled ‚Üí update RGAC + status
  if (document.getElementById("autoVerifyToggle").checked) {
    updateAutoVerify();
  }

} // üîö <-- CLOSES async function updateHashes()

/* ========================================================= */
/* MODE 2 ‚Äî DIGEST VIEWER                                    */
/* ========================================================= */
let currentDigest = "";

function updateDigestOutputs(hex) {
  currentDigest = hex;
  showDigestFormat("hex");
}

function showDigestFormat(type) {
  if (!currentDigest) return;

  if (type === "hex") {
    document.getElementById("digestOutput").textContent = currentDigest;
  }

  if (type === "binary") {
    document.getElementById("digestOutput").textContent =
      currentDigest.split("")
        .map(c => parseInt(c, 16).toString(2).padStart(4, "0"))
        .join("");
  }

  if (type === "base64") {
    const bytes = currentDigest.match(/.{2}/g).map(x => parseInt(x, 16));
    const bin = new Uint8Array(bytes);
    document.getElementById("digestOutput").textContent =
      btoa(String.fromCharCode(...bin));
  }
}

/* ========================================================= */
/* MODE 3 ‚Äî HEATMAP                                          */
/* ========================================================= */
async function computeHeatmap() {
  const a = document.getElementById("heatA").value;
  const b = document.getElementById("heatB").value;
  const hA = await computeSHA(a);
  const hB = await computeSHA(b);

  const bitsA = hexToBits(hA);
  const bitsB = hexToBits(hB);

  const heatEl = document.getElementById("heatmap");
  heatEl.innerHTML = "";

  for (let i = 0; i < bitsA.length; i++) {
    const cell = document.createElement("div");
    cell.className = bitsA[i] === bitsB[i] ? "bit-same" : "bit-diff";
    heatEl.appendChild(cell);
  }
}

function hexToBits(hex) {
  return hex.split("")
    .map(h => parseInt(h, 16).toString(2).padStart(4, "0"))
    .join("")
    .split("");
}

/* ========================================================= */
/* MODE 4 ‚Äî AVALANCHE ANIMATION                              */
/* ========================================================= */
async function startAvalanche() {
  const input = document.getElementById("avalancheInput").value;
  const out = document.getElementById("avalancheFrame");
  out.textContent = "";

  let frame = input;

  for (let i = 0; i < 20; i++) {
    const hash = await computeSHA(frame);
    out.textContent += `Frame ${i+1} ‚Üí ${hash}\n`;
    frame = hash; // chain hashing
    await new Promise(r => setTimeout(r, 40));
  }
}
  
</script>

</details>

<!-- =============================================== -->
<!-- ‚úÖ COLLAPSIBLE EXAMPLE DATASETS (DEFAULT CLOSED) -->
<!-- =============================================== -->

<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üìÇ Example Datasets ‚Äî Click to Expand
    </summary>

    <div style="padding:2px 0 0 0; margin-top:10px;">

      <p>
        Select a dataset below ‚Äî it instantly loads into the input below so you can hash it locally.
      </p>

<div class="pill-row" style="margin-top:16px; display:flex; flex-wrap:wrap; gap:14px;">
  <button class="dataset-btn" onclick="setDatasetExample('va')">ü©∫ VA Disability Claim</button>
  <button class="dataset-btn" onclick="setDatasetExample('finance')">üí∞ Financial Transaction</button>
  <button class="dataset-btn" onclick="setDatasetExample('robotics')">ü§ñ Robotics Command</button>
  <button class="dataset-btn" onclick="setDatasetExample('system')">üß† System Log</button>
  <button class="dataset-btn" onclick="setDatasetExample('legal')">‚öñÔ∏è Legal Filing</button>
</div>
    </div>
  </details>
</div>

<!-- Card 2: Text Input + Hash Engine (NO LONGER INSIDE Example Datasets) -->
<div class="card" style="margin-top:22px; padding:24px;">

  <h3 class="section-title" style="font-size:20px;">Try It Locally ‚Äî Hash Any Dataset</h3>

<button id="resetTryIt" class="action-btn" style="margin-top:10px;">
  üîÑ Reset Input & Hashes
</button>

<textarea id="novakInput"
          oninput="updateAutoDiff(this.value)"
          placeholder="Example: VA claim, invoice, contract, JSON, SQL, XML..."
          style="width:100%; height:170px; margin-top:16px; font-family:'JetBrains Mono', monospace;
                 font-size:14px; padding:12px;"></textarea>


  <!-- ‚úÖ Hash Algorithm Selector -->
  <div style="margin-top:16px; display:flex; flex-wrap:wrap; gap:18px;">
    <label><input type="checkbox" class="hashAlgo" value="SHA-256" checked> SHA-256</label>
    <label><input type="checkbox" class="hashAlgo" value="SHA-512"> SHA-512</label>
    <label><input type="checkbox" class="hashAlgo" value="SHA-384"> SHA-384</label>
  </div>

  <p style="margin-top:6px; font-size:13px; opacity:0.85;">
    üö´This public demo is for educational purposes only ‚Äî NOT for HIPAA-regulated environments.
    Never use real patients, real claims, or real medical documents here ‚Äî training data only.
    NOVAK does not collect, store, transmit, or retain data, but user responsibility applies.
  </p>

  <!-- ‚úÖ HASH OUTPUT -->
  <h3 class="section-title" style="font-size:20px; margin-top:24px;">Cryptographic Hashes</h3>

  <div id="hashOutputList"
       style="margin-top:10px; font-family:'JetBrains Mono', monospace; font-size:14px;">
    <em>Waiting for input from above...</em>
  </div>
</div>

<button onclick="NOVAK_GOV.toggleHeatmapAmplify()">
  üî¨ Toggle Tamper-Reveal Mode
</button>


<!-- =============================================== -->
<!-- ‚úÖ AUTO-VERIFICATION TOGGLE + HIDDEN BLOCKS -->
<!-- =============================================== -->

<div class="card" style="margin-top:32px;">
  <label style="display:flex; align-items:center; gap:10px; font-size:16px;">
    <input type="checkbox" id="autoVerifyToggle" onchange="toggleAutoVerify()">
    <strong>Enable Proof-Before-Action Engine (NOVAK Auto-Verification)</strong>
  </label>

  <p style="margin-top:6px; font-size:14px; opacity:0.8;">
    When enabled, NOVAK automatically checks whether any change breaks integrity
    <strong>before</strong> execution.
  </p>

  <!-- üö´ HIDDEN UNTIL CHECKED -->
  <div id="autoVerifyBlock" style="display:none; margin-top:20px;">

    <!-- NOVAK AUTO-VERIFICATION -->
    <div class="card" style="padding:20px;">
      <h3 class="section-title" style="font-size:20px;">
        NOVAK Auto-Verification ‚Äî Proof-Before-Action
      </h3>

      <p>
        Modify the text above and NOVAK instantly checks whether the new output
        still matches the last approved cryptographic truth.
      </p>

      <!-- STATUS -->
      <div id="autoVerifyStatus"
           style="margin-top:14px; 
                  font-family:'JetBrains Mono', monospace;
                  font-size:15px;
                  padding:14px;
                  background:var(--card);
                  border:1px solid var(--border);
                  border-radius:8px;">
        Waiting for input‚Ä¶
      </div>

<!-- ========================================= -->
<!-- üîó LIVE NOVAK CHAIN ‚Äî One-Line Hash Layout -->
<!-- ========================================= -->

<style>
  .novak-hash-row {
    display: flex;
    gap: 16px;
    margin-top: 20px;
    flex-wrap: wrap;
    font-family: "JetBrains Mono", monospace;
    font-size: 13px;
  }
  .novak-hash-box {
    flex: 1;
    min-width: 220px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 10px 14px;
  }
  .novak-hash-box label {
    font-weight: 600;
    font-size: 14px;
    display: block;
    margin-bottom: 6px;
  }
  .novak-hash-box code {
    font-family: "JetBrains Mono", monospace;
    font-size: 15px;
    word-break: break-all;
    display: block;
    padding: 6px 0;
  }
</style>

<div class="novak-hash-row" id="liveNovakChain">

  <div class="novak-hash-box">
    <label>HR (Rule Hash)</label>
    <code id="liveHR"></code>
  </div>

  <div class="novak-hash-box">
    <label>HD (Data Hash)</label>
    <code id="liveHD"></code>
  </div>

  <div class="novak-hash-box">
    <label>HO (Output Hash)</label>
    <code id="liveHO"></code>
  </div>

  <div class="novak-hash-box">
    <label>HVET (HR + HD + HO)</label>
    <code id="liveHVET"></code>
  </div>

</div>

      <!-- RGAC -->
      <div class="card" style="margin-top:26px; padding:18px;">
        <h3 class="section-title" style="font-size:20px;">
          RGAC ‚Äî Recursive Global Audit Chain
        </h3>

        <p style="margin-bottom:12px;">
          In NOVAK, every approved output becomes the next input ‚Äî forming a self-verifying integrity chain.
        </p>

        <div id="rgac"
             style="font-family:'JetBrains Mono', monospace;
                    font-size:14px; padding-top:6px;">
          <em>Provide input to begin‚Ä¶</em>
        </div>
      </div>
      </div>
<!-- ====================================================== -->
<!-- üß† NOVAK EXPERT MODE ‚Äî ALL FOUR CRYPTO VISUALIZERS     -->
<!-- ====================================================== -->

  <div class="card" style="margin-top:18px; padding:26px; font-size:17px; line-height:1.65;">

    <pre id="expertHash"
         style="margin-top:14px; font-family:'JetBrains Mono', monospace; white-space:pre-wrap;"></pre>


    <!-- ====================================================== -->
    <!-- MODE 2: DIGEST VIEWER                                 -->
    <!-- ====================================================== -->
    <h3>üîπ Multi-Format Digest Viewer</h3>

    <div style="margin-top:12px;">
      <button class="digest-btn" onclick="showDigestFormat('hex')">HEX</button>
      <button class="digest-btn" onclick="showDigestFormat('base64')">BASE64</button>
      <button class="digest-btn" onclick="showDigestFormat('binary')">BINARY</button>
    </div>

    <pre id="digestOutput"
         style="margin-top:14px; font-family:'JetBrains Mono', monospace; white-space:pre-wrap;"></pre>

    <hr style="margin:32px 0; opacity:0.4;">

<h3>‚óÜ Bit Difference Heatmap (Original vs Live Input)</h3>
<p>
  The moment you type the first value in the NOVAK Auto-Verification box above,
  NOVAK freezes it as the <strong>‚Äúoriginal.‚Äù</strong> Every change after that updates
  the bit-difference display below.
</p>

<div id="heatmap"
     style="
       margin-top:14px;
       border:1px solid var(--border);
       border-radius:8px;
       padding:10px;
       min-height:40px;
       display:grid;
       grid-template-columns:repeat(64, 1fr);
       gap:2px;
     ">
  <!-- Heatmap cells will be injected here -->
</div>

<hr style="margin:24px 0; opacity:0.4;">

<h3>‚óÜ Avalanche Visualizer (Live)</h3>
<p>
  Shows how many hash bits flipped between the original and the current value.
  Type once to set the original, then edit to see the avalanche effect.
</p>

<pre id="avalancheFrame"
     style="
       margin-top:10px;
       padding:10px 12px;
       border:1px solid var(--border);
       border-radius:8px;
       font-family:'JetBrains Mono', monospace;
       font-size:13px;
       background:var(--card);
       white-space:pre-wrap;
     ">
<!-- Avalanche stats will be injected here -->
</pre>

     </div><!-- inner NOVAK block -->

  </div><!-- autoVerifyBlock -->

</div><!-- outer wrapper -->

<!-- =============================================== -->
<!-- üîè NOVAK INTEGRITY RECEIPT (SEPARATE CARD) -->
<!-- =============================================== -->

<div class="card" style="margin-top:28px; padding:20px;">
  <h2 class="section-title">Integrity Receipt</h2>

  <p>
    NOVAK generates a tamper-proof receipt proving what existed, when, and under what rules ‚Äî
    useful for courts, claims, audits, cybersecurity, safety systems, and AI oversight.
  </p>

  <button class="action-btn" onclick="generateReceipt()" style="margin-top:12px;">
    Generate Receipt
  </button>

  <!-- JSON receipt -->
  <pre id="receiptOutput"
       style="margin-top:16px;
              font-family:'JetBrains Mono', monospace;
              font-size:14px;
              white-space:pre-wrap;"></pre>

  <!-- QR code -->
  <div id="qrContainer" 
       style="margin-top:20px; text-align:center;"></div>

  <!-- JSON download link -->
  <a id="jsonDownloadLink"
     style="margin-top:18px; display:none; text-decoration:underline; cursor:pointer;">
     ‚¨á Download Receipt JSON
  </a>
</div>

<!-- =============================================== -->
<!-- üìå WHAT CAN I DO WITH THIS HASH? -->
<!-- =============================================== -->

<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
    üìå What Can I Actually Do With This Hash?
    </summary>

    <div class="collapse-inner">
<br>
      <p>
        Think of the hash as a <strong>digital fingerprint</strong> ‚Äî a unique, unforgeable identifier
        of the exact text or file you verified.
      </p>

      <h3 style="margin-top:14px;">What a normal person can do with it:</h3>

      <ul style="margin-left:20px; margin-top:10px; line-height:1.55;">
        <li><strong>Prove ‚Äúthis is the exact thing I had before.‚Äù</strong></li>
        Copy it and save it somewhere safe.<br>
        Paste into an email, document, claim note, or evidence file:<br>
        <code>NOVAK Integrity Hash (SHA-256): &lt;your hash&gt;</code>

        <li style="margin-top:10px;"><strong>Later, paste the SAME text/file back in.</strong><br>
            If the hash <strong>matches</strong> ‚Üí nothing changed.<br>
            If the hash <strong>differs</strong> ‚Üí altered (even one invisible character).</li>

        <li style="margin-top:12px;"><strong>Use it as mathematical proof.</strong></li>

        <li style="margin-top:10px;"><strong>Catch invisible changes.</strong></li>

        <li style="margin-top:10px;"><strong>Anchor a moment in time.</strong></li>
      </ul>

      <p style="margin-top:16px; font-weight:600;">
        üëâ <strong>Save the hash. Compare it later. If it matches ‚Äî nothing has changed.</strong>
      </p>

      <p style="margin-top:16px;">
        <strong>In full NOVAK deployments:</strong> Systems <em>cannot act</em> unless the hashes match the last approved truth.
      </p>

    </div>
  </details>
</div>
  
<!-- ====================================================== -->
<!-- COLLAPSIBLE: WHY CAN'T I PASTE THE HASH BACK IN?       -->
<!-- ====================================================== -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üîí Why Can't I Paste the Hash Back In?
    </summary>

    <div style="margin-top:16px; font-size:15px; line-height:1.55;">

      <p>
        A cryptographic hash is a <strong>one-way fingerprint</strong>.  
        When you paste the <em>hash itself</em> into the box, NOVAK creates a 
        <strong>new hash of the hash</strong> ‚Äî it does <em>not</em> recover the original text.
      </p>
<br>
      <p>
        That is expected. No cryptographic hash (SHA-256, SHA-512, SHA-3, etc.) is reversible.
      </p>

      <h4 style="margin-top:16px;">So what do you actually do with a saved hash?</h4>
<br>
      <ul>
‚úî Save the <strong>hash somewhere safe</strong> (email, PDF, note, claim file).</li>
‚úî Later, paste the <strong>original text or file</strong> back into NOVAK.</li>
      </ul>
<br>
      <p>If the hash <strong>matches</strong> ‚Üí nothing changed.</p>
      <p>If the hash <strong>does not match</strong> ‚Üí something was changed (even one invisible character).</p>
<br>
      <p>‚ö†Ô∏è <strong>Pasting the hash itself is not the correct way.</strong></p>
<br>
      <p>
        You always re-verify by <strong>re-entering the original content</strong>.
      </p>
<br>
      <p>
        In a full NOVAK deployment, this is automatic ‚Äî systems cannot act unless their current hash 
        matches the last approved truth.
      </p>

    </div>
  </details>
</div>

<!-- ====================================================== -->
<!-- COLLAPSIBLE: HOW NOVAK COMPUTES HASHES                 -->
<!-- ====================================================== -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      ‚öôÔ∏è How NOVAK Computes Hashes ‚Äî And Why This Matters
    </summary>

    <div style="margin-top:16px; font-size:15px; line-height:1.55;">

      <h4>Are These Real Cryptographic Hashes?</h4><br>

      <p><strong>‚úî YES.</strong> Your browser is using the 
      <strong>WebCrypto API</strong> ‚Äî the same cryptographic engine used by:</p><br>

      <ul>
        <li>Google Chrome internal security modules</li>
        <li>Apple WebKit encryption</li>
        <li>Federal FIPS-validatable cryptographic paths</li>
        <li>Progressive Web Apps (PWAs)</li>
      </ul>

      <p>
        Nothing is sent to a server. Nothing leaves your device.  
        Everything runs <strong>locally, client-side, instantly</strong>.
      </p>

      <h4 style="margin-top:16px;">Why Isn‚Äôt My GPU Being Used?</h4><br>

      <ul>
‚úî GPUs are not used for SHA-256/384/512 because hashing is not a parallel-friendly operation.
‚úî The browser delegates hashing to <strong>CPU hardware acceleration</strong>, not your graphics card.
      </ul><br>

      <h4>Hashing uses:</h4><br>

      <ul>
‚úî CPU
‚úî Hardware-accelerated WebCrypto
      </ul>
<br>
      <p><strong>NOT GPU compute.</strong></p>
<br>
      <p>
        This is exactly what makes NOVAK strong ‚Äî it uses 
        <strong>verified, standard, secure cryptographic primitives</strong> already supported at the hardware level.
      </p>

    </div>
  </details>
</div>

<!-- ====================================================== -->
<!-- COLLAPSIBLE: HOW IS THIS DIFFERENT THAN TODAY?         -->
<!-- ====================================================== -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üîç How Is This Different Than Today?
    </summary>

    <div style="margin-top:16px; font-size:15px; line-height:1.55;">

      <p>
        Today, most systems generate hashes, signatures, logs, or encrypted traffic ‚Äî but none of those guarantee the 
        <strong>correctness</strong> of automated actions.
      </p>
<br>
      <ul>
        <li>‚úÖ Hashing proves data hasn't changed ‚Äî <strong>after</strong> execution</li>
        <li>üîê TLS/SSL protects communication ‚Äî <strong>not</strong> decision integrity</li>
        <li>‚õì Blockchain records history ‚Äî it cannot stop bad actions</li>
        <li>üìò Logging documents failure ‚Äî it does not prevent it</li>
        <li>üßç Audits require humans ‚Äî long after harm already occurred</li>
      </ul>

      <h4 style="margin-top:18px;">NOVAK is different:</h4>
      <ul>
        <br>
        <li>üö´ <strong>No cryptographic proof ‚Üí system is blocked</strong></li>
        <li>üåü <strong>Input, rule & output must cryptographically match</strong></li>
        <li>üõ° <strong>Prevents fraud, corruption, glitches & silent automation failure</strong></li>
        <li>üìú <strong>Generates tamper-proof execution receipts instantly</strong></li>
      </ul>

      <p>
        Instead of trusting ‚Äî NOVAK <strong>verifies before action.</strong>
      </p>

    </div>
  </details>
</div>

<!-- ====================================================== -->
<!-- COLLAPSIBLE: WHY HASN‚ÄôT ANYONE BUILT NOVAK BEFORE?     -->
<!-- ====================================================== -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      ü§î Why Hasn‚Äôt Anyone Built NOVAK Before?
    </summary>

    <div style="margin-top:16px; font-size:15px; line-height:1.55;">

      <p>NOVAK‚Ä¶ looks obvious once you see it.</p>
<br>
      <p>But here‚Äôs the truth:</p>
<br>
      <ul>
‚úîÔ∏è Nobody does <strong>Proof-Before-Action</strong></li><br>
‚úîÔ∏è Nobody binds <strong>input ‚Üí rule ‚Üí output</strong> cryptographically<br>
‚úîÔ∏è Nobody performs <strong>local, real-time integrity verification</strong><br>
‚úîÔ∏è Nobody applies this to <strong>AI, robotics, finance, VA claims, or government systems</strong><br>
‚úîÔ∏è Nobody provides <strong>cryptographic receipts before harm occurs</strong>
      </ul>
<br>
      <p>
        Why? Because the entire industry copied <strong>blockchain</strong>, 
        which only verifies <em>after things happen</em>.
      </p>
<br>
      <p>
        Nobody thought to require systems to 
        <strong>prove correctness before acting.</strong>
      </p>
<br>
      <p><strong>That is the NOVAK invention.</strong></p>

    </div>
  </details>
</div>

<!-- ====================================================== -->
<!-- ‚≠ê NOVAK SELF-VERIFICATION BLOCK (FIXED WRAPPER) -->
<!-- ====================================================== -->
<div class="card" style="margin-top:32px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:20px; font-weight:600;">
      üîç Verify NOVAK Itself (Source, Laws, Version, Hashes)
    </summary>

    <div style="margin-top:16px; font-size:16px; line-height:1.6;">

      <h2 style="margin-top:0;">NOVAK Self-Verification</h2>

      <p>
        NOVAK practices what it enforces:  
        <strong>we verify ourselves using our own rules.</strong>
      </p>

<pre class="diagram-box" style="white-space:pre; font-size:14px;">
NOVAK Version:     1.0.0
Laws Included:     L0‚ÄìL15 + PL-X + PS-X
Protocol Modules:  HVET + EIR + RGAC + Safety Gate

SHA-256 (source):  <span id="novakSourceHash">[computed live]</span>
SHA-256 (laws):    <span id="novakLawsHash">[computed live]</span>
SHA-256 (UI):      <span id="novakUIHash">[computed live]</span>
Timestamp:         <span id="novakTimestamp">[local time]</span>
</pre>
<br>
      <p>
        This block demonstrates that NOVAK uses its own cryptographic process  
        to guarantee the authenticity of:
      </p>
<br>
      <ul style="margin-left:20px;">
        <li>‚úî The Laws</li>
        <li>‚úî The Protocol definitions</li>
        <li>‚úî The user interface used to verify data</li>
        <li>‚úî The entire educational suite</li>
      </ul>

      <p style="margin-top:18px; font-weight:600;">
        When even the protocol verifies itself ‚Äî trust becomes mathematical.
      </p>

    </div>
  </details>
</div>

<!-- ======================================================= -->
<!-- üõ°Ô∏è WHY NOVAK MAKES MALWARE & SPYWARE IMPOSSIBLE -->
<!-- ======================================================= -->

<div class="card" style="margin-top:28px; padding:22px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üß± Why NOVAK Makes Malware & Spyware Impossible
    </summary>

    <div style="margin-top:14px; line-height:1.6; position:relative;">

      <h2 style="margin-bottom:10px; font-size:22px;">
        The End of Antivirus ‚Äî The Beginning of Proof-Before-Action Security
      </h2>

      <p>
        For 40 years, cybersecurity has relied on a <strong>detect-and-react</strong> model:
      </p>

      <ul style="margin-left:22px; margin-top:10px;">
        <li>Antivirus scans files <em>after</em> they exist</li>
        <li>Anti-spyware detects behavior <em>after</em> it runs</li>
        <li>Firewalls block traffic <em>after</em> it is observed</li>
        <li>Security teams respond <em>after</em> harm occurs</li>
      </ul>

      <p style="margin-top:14px; font-weight:600;">
        This is ‚Äúpost-execution policing.‚Äù  
        NOVAK replaces it with mathematical prevention.
      </p>

      <h3 style="margin-top:20px;">üîê NOVAK Forces Proof-Before-Action</h3>

      <p>
        Nothing ‚Äî not a file, script, AI model, robot command, driver, or process ‚Äî can execute unless:
      </p>

      <ul style="margin-left:22px; margin-top:10px;">
        <li>The <strong>input is unchanged</strong></li>
        <li>The <strong>rule is approved</strong></li>
        <li>The <strong>output matches</strong> expectations</li>
        <li>The entire chain forms a valid <strong>Execution Identity Receipt (EIR)</strong></li>
      </ul>

      <p style="margin-top:14px; font-weight:600;">
        If anything is tampered with ‚Äî even one bit:
      </p>

      <ul style="margin-left:22px;">
        <li>‚ùå The action is mathematically impossible</li>
        <li>‚ùå The system refuses execution instantly</li>
        <li>‚ùå Malware never gets a chance to run</li>
      </ul>

      <h3 style="margin-top:20px;">üö´ This Eliminates Entire Classes of Cyberattacks</h3>

      <p>NOVAK blocks all execution unless it is proven correct.</p>

      <ul style="margin-left:22px; margin-top:10px;">
        <li>Zero-day malware ‚Üí blocked</li>
        <li>Ransomware ‚Üí blocked</li>
        <li>Spyware installers ‚Üí blocked</li>
        <li>Browser exploits ‚Üí blocked</li>
        <li>USB attacks ‚Üí blocked</li>
        <li>Memory injection ‚Üí blocked</li>
        <li>Polymorphic viruses ‚Üí blocked</li>
        <li>Rootkits ‚Üí blocked</li>
        <li>AI model tampering ‚Üí blocked</li>
        <li>Robot manipulation ‚Üí blocked</li>
      </ul>

      <p style="margin-top:16px; font-weight:700;">
        No antivirus signatures.<br>
        No heuristics.<br>
        No monitoring.<br>
        No guessing.<br><br>
        <strong>Just math.</strong>
      </p>

      <!-- ‚≠ê Bottom-right collapse button -->
      <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
        ‚ñ≤ Collapse
      </button>

    </div>
  </details>
</div>

<!-- ====================================================== -->
<!-- What NOVAK Does to Robocalls & Telemarketing -->
<!-- ====================================================== -->

<div class="card" style="margin-top:28px; padding:22px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üìµ What NOVAK Does to Robocalls & Telemarketing
    </summary>

    <div style="margin-top:14px; line-height:1.6; position:relative;">

      <p>
        Robocalls exist because today‚Äôs phone networks allow actions first and ask questions later.
        Caller ID can be spoofed, automation runs without proof, and unauthorized scripts execute before
        anyone checks legitimacy.
      </p>

      <p style="margin-top:12px;">
        NOVAK ends this entirely using Proof-Before-Action execution.
      </p>

      <!-- üö´ Robocalls Cannot Execute -->
      <h3 style="margin-top:22px;">üö´ Robocalls Cannot Execute</h3>

      <p>
        Every attempted call must produce a valid <strong>Execution Identity Receipt (EIR)</strong>:
      </p>

      <ul style="margin-left:20px; margin-top:8px;">
        <li>Input hash must match the real caller</li>
        <li>Rule hash must match an allowed calling purpose</li>
        <li>Output hash must match an approved pattern</li>
        <li>No spoofing, tampering, or hidden automation is possible</li>
      </ul>

      <p style="margin-top:8px; font-weight:600;">
        If anything fails ‚Äî even a single bit ‚Äî NOVAK mathematically blocks the call 
        <strong>before it ever rings.</strong>
      </p>

      <!-- üîê Telemarketing Requires Approval -->
      <h3 style="margin-top:26px;">üîê Telemarketing Requires Your Explicit Approval</h3>

      <p>
        Marketing, political outreach, surveys, or automated notifications must prove that:
      </p>

      <ul style="margin-left:20px; margin-top:8px;">
        <li>You opted in</li>
        <li>The caller is genuine</li>
        <li>The category of call is allowed for you</li>
      </ul>

      <p style="margin-top:8px;">
        Without cryptographic permission, the call is rejected by rule.
        <strong>No exceptions. No loopholes.</strong>
      </p>

      <!-- üõë Stops All Phone-Based Scams -->
      <h3 style="margin-top:26px;">üõë Stops All Phone-Based Scams</h3>

      <p>The following scams simply cannot execute:</p>

      <ul style="margin-left:20px; margin-top:8px;">
        <li>IRS scams</li>
        <li>Social Security fraud calls</li>
        <li>Fake Medicare outreach</li>
        <li>Tech support scams</li>
        <li>Banking & wire fraud calls</li>
        <li>AI voice impersonation scams</li>
        <li>Overseas call-center spoofing</li>
      </ul>

      <p style="margin-top:10px; font-weight:600;">
        NOVAK does not reject these calls.<br><br>
        It prevents them from existing.
      </p>

      <!-- ‚≠ê Bottom-right collapse button -->
      <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
        ‚ñ≤ Collapse
      </button>

    </div>
  </details>
</div>

<!-- ====================================================== -->
<!-- üöóüè† TITLE THEFT PROTECTION -->
<!-- ====================================================== -->

<div class="card" style="margin-top:28px; padding:22px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üèõÔ∏è What NOVAK Does to Title Theft (Property, Vehicles, Deeds)
    </summary>

    <div style="margin-top:14px; line-height:1.6; position:relative;">

      <p>
        Title theft exists because current systems accept documents and transfers 
        <strong>without cryptographic proof</strong> that the input, rules, or output are correct. 
        Criminals exploit paperwork, PDF editing, identity fraud, or insider access.
      </p>

      <ul style="margin-left:20px; margin-top:12px;">
        <li>Forged deeds or signatures</li>
        <li>Fake title documents</li>
        <li>Tampered PDFs and registry entries</li>
        <li>Unauthorized ownership transfers</li>
        <li>Deed manipulation during refinancing</li>
        <li>Elder exploitation title transfers</li>
        <li>VIN/title swapping for vehicles</li>
      </ul>

      <h3 style="margin-top:24px;">üîê NOVAK Forces Proof-Before-Action</h3>
      <br> 
      <p>
        With NOVAK, a title cannot be transferred unless all three match exactly:
      </p>
      <br>
      <ul style="margin-left:20px;">
‚úî The <strong>input document</strong> is unchanged
‚úî The <strong>rule</strong> (state law) is correct
‚úî The <strong>output</strong> (new owner) matches the rule
‚úî The entire chain forms an unbroken <strong>Execution Identity Receipt (EIR)</strong>
      </ul>

      <p style="margin-top:12px;">
        If anything is tampered with ‚Äî even 1 bit ‚Äî NOVAK mathematically refuses the transfer.
      </p>

      <h3 style="margin-top:24px;">üö´ This Eliminates Entire Classes of Title Fraud</h3>

      <ul style="margin-left:20px;">
‚ùå Forged real estate transfers
‚ùå Fraudulent vehicle title swaps
‚ùå Mortgage/title manipulation
‚ùå Registry tampering
‚ùå Fake lien releases
‚ùå Deed fraud during escrow or refinancing
‚ùå Fake ownership filings
‚ùå Synthetic identity title theft schemes
      </ul>

      <p style="margin-top:16px; font-weight:600;">
        NOVAK makes title fraud <strong>mathematically impossible to execute</strong> ‚Äî 
        not detected later, but prevented entirely.
      </p>

      <!-- ‚≠ê Bottom-right collapse button -->
      <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
        ‚ñ≤ Collapse
      </button>

    </div>
  </details>
</div>

<!-- ====================================================== -->
<!-- ü™™ IDENTITY THEFT & SYNTHETIC FRAUD PROTECTION -->
<!-- ====================================================== -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      ü™™ What NOVAK Does to Identity Theft & Synthetic Identity Fraud
    </summary>

    <div style="margin-top:16px; font-size:15px; line-height:1.55; position:relative;">

      <p>
        Identity theft and synthetic identity fraud thrive because systems accept 
        <strong>information without mathematical proof of correctness</strong>.  
        Criminals assemble identities from stolen SSNs, forged documents, edited PDFs, 
        or mismatched data that no current system detects before harm occurs.
      </p>

      <ul style="margin-left:20px; margin-top:12px;">
        <li>Unauthorized loan applications</li>
        <li>Credit accounts opened in someone else‚Äôs name</li>
        <li>Benefit fraud using stolen or fake identities</li>
        <li>Medical identity theft</li>
        <li>SSN misuse or substitution</li>
        <li>Synthetic identity construction from partial data</li>
        <li>Stolen or forged government documents</li>
      </ul>

      <h3 style="margin-top:24px;">üîê NOVAK Forces Proof-Before-Action</h3>
      <p>
        With NOVAK, no identity-based action can occur unless:
      </p>

      <ul style="margin-left:20px;">
‚úî The <strong>input identity data</strong> is unchanged
‚úî The <strong>rules</strong> for the action are correct (loan, claim, account, etc.)
‚úî The <strong>output</strong> follows those rules exactly
‚úî The entire process forms a cryptographically linked <strong>EIR</strong>
      </ul>

      <p style="margin-top:12px;">
        If the identity data is mismatched, forged, synthetic, or tampered with ‚Äî 
        NOVAK refuses the action <strong>before execution</strong>.
      </p>

      <h3 style="margin-top:24px;">üö´ This Eliminates Entire Classes of Identity Fraud</h3>
      <ul style="margin-left:20px;">
‚ùå Synthetic identities created from fragments
‚ùå Credit accounts opened under a stolen SSN
‚ùå Fake benefit claims
‚ùå Unauthorized medical billing under another name
‚ùå Fraudulent loan applications
‚ùå Passport / ID document tampering
‚ùå Insider manipulation of identity data
      </ul>

      <p style="margin-top:16px; font-weight:600;">
        NOVAK makes identity fraud <strong>mathematically impossible</strong>.  
        No guessing. No heuristics. Just immutable cryptographic proof.
      </p>

      <!-- ‚≠ê Bottom-right collapse button -->
      <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
        ‚ñ≤ Collapse
      </button>

    </div>
  </details>
</div>

<!-- ======================================================= -->
<!-- üè™ Everyday Example ‚Äî How NOVAK Protects an ATM Purchase -->
<!-- ======================================================= -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
    üè™ Everyday Example ‚Äî How NOVAK Protects an ATM Purchase
  </summary>
<br>
    <p>
      Imagine you're buying groceries with your debit card. Today‚Äôs systems simply
      <strong>trust whatever arrives</strong> from the store‚Äôs payment terminal.
      They assume the amount, merchant ID, and account details are correct.  
      This is why fraud, spoofing, and silent tampering are still possible.
    </p>

    <h3 style="margin-top:18px;">‚ùå Without NOVAK (Today)</h3>

    <ul style="margin-left:20px;">
      <li>No rule verification</li>
      <li>No data integrity check</li>
      <li>No validation of the output before money moves</li>
      <li>Systems can be tricked by altered or injected data</li>
    </ul>

    <p style="margin-top:10px;">
      Your bank only reviews logs <em>after</em> the purchase ‚Äî it cannot stop the fraud in real-time.
    </p>

    <h3 style="margin-top:22px;">‚úÖ With NOVAK (Proof-Before-Action)</h3>
<br>
    <p>NOVAK performs a cryptographic integrity check before approving anything:</p>

    <ul style="margin-left:20px;">
      <li><strong>HR</strong> = fingerprint of the bank‚Äôs rule for card purchases</li>
      <li><strong>HD</strong> = fingerprint of the purchase data (amount, merchant, card data)</li>
      <li><strong>HO</strong> = fingerprint of the expected outcome (your account ‚àí amount)</li>
      <li><strong>HVET</strong> = binds HR + HD + HO together</li>
      <li><strong>EIR</strong> = tamper-proof receipt of the entire transaction</li>
    </ul>

    <p style="margin-top:12px;">
      If even <strong>one bit</strong> of the amount, rule, or account changes:
      <strong>NOVAK instantly blocks the purchase.</strong>
    </p>

    <p style="margin-top:12px; font-weight:600;">
      NOVAK ensures the transaction is correct <em>before</em> money moves ‚Äî  
      eliminating fraud, spoofing, silent tampering, and mis-routing.
    </p>

    <!-- ‚≠ê Bottom-right collapse button -->
    <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
      ‚ñ≤ Collapse
    </button>

</details>
</div>

<!-- ========================================================= -->
<!-- üó≥Ô∏è How NOVAK Protects Voting Today ‚Äî And Enables Remote Voting Tomorrow -->
<!-- ========================================================= -->

<div class="card" style="margin-top:28px; padding:20px; position:relative;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üó≥Ô∏è How NOVAK Protects Voting Today ‚Äî And Enables Secure Remote Voting Tomorrow
    </summary>

    <div style="margin-top:16px; font-size:15px; line-height:1.6; position:relative;">

      <!-- ----------------------------------------------- -->
      <!-- SECTION 1 ‚Äî How Voting Works Today (No NOVAK)   -->
      <!-- ----------------------------------------------- -->

      <h3 style="margin-top:8px;">‚ùå Voting Today ‚Äî Where Integrity Can Break</h3>

      <p>
        Whether voting is done <strong>in-person on a machine</strong>, with a <strong>paper scanner</strong>, or another electronic system, today‚Äôs infrastructure still has major blind spots:
      </p>

      <ul style="margin-left:20px; margin-top:10px;">
        <li>No real-time verification that the ballot definition (‚Äúrules‚Äù) is correct</li>
        <li>No cryptographic guarantee the vote you cast is the vote recorded</li>
        <li>No binding between: ballot rules ‚Üí selections ‚Üí stored output</li>
        <li>Systems assume machines and software haven‚Äôt silently altered anything</li>
        <li>Audits occur after the fact ‚Äî not at the moment of voting</li>
      </ul>

      <p style="margin-top:10px;">
        This is why phone or web voting is not allowed today: systems cannot prove correctness <em>before</em> recording the vote.
      </p>

      <hr style="margin:24px 0; opacity:0.4;">


      <!-- ----------------------------------------------- -->
      <!-- SECTION 2 ‚Äî How NOVAK Protects Voting Today     -->
      <!-- ----------------------------------------------- -->

      <h3 style="margin-top:8px;">‚úÖ With NOVAK ‚Äî Proof-Before-Action Voting Integrity</h3>

      <p>NOVAK enforces cryptographic proof <strong>before a vote is accepted</strong>:</p>

      <ul style="margin-left:20px; margin-top:10px;">
        <li><strong>HR ‚Äî Rule Hash</strong>: correct ballot style for that voter</li>
        <li><strong>HD ‚Äî Data Hash</strong>: voter selections unchanged</li>
        <li><strong>HO ‚Äî Output Hash</strong>: matches intended stored record</li>
        <li><strong>HVET ‚Äî Binding Hash</strong>: links HR + HD + HO together</li>
      </ul>

      <p style="margin-top:10px;">
        If <strong>one bit</strong> is wrong: NOVAK blocks the vote from entering the tally.
      </p>

      <ul style="margin-left:20px; margin-top:10px;">
        <li>Ballot-definition errors</li>
        <li>Machine misrouting</li>
        <li>Silent software tampering</li>
        <li>Incorrect storage</li>
        <li>Backend manipulation</li>
      </ul>

      <p style="margin-top:12px; font-weight:600;">
        NOVAK stops mistakes and fraud at the moment of voting ‚Äî not later.
      </p>

      <hr style="margin:24px 0; opacity:0.4;">


      <!-- ----------------------------------------------- -->
      <!-- SECTION 3 ‚Äî Remote Voting Enablement (Future)   -->
      <!-- ----------------------------------------------- -->

      <h3 style="margin-top:8px;">üì±üåê How NOVAK Could Enable Secure Phone & Web Voting</h3>

      <p>
        Remote voting is impossible today because the system cannot verify:
      </p>

      <ul style="margin-left:20px; margin-top:10px;">
        <li>Correct ballot rules delivered to the voter</li>
        <li>Selections weren‚Äôt altered by malware or the network</li>
        <li>The stored vote matches the intended vote</li>
      </ul>

      <p style="margin-top:10px;">
        With NOVAK, these become solvable:
      </p>

      <ul style="margin-left:20px; margin-top:10px;">
        <li><strong>HR</strong> guarantees correct ballot</li>
        <li><strong>HD</strong> guarantees unchanged selections</li>
        <li><strong>HO + HVET</strong> guarantee correct stored vote</li>
        <li><strong>EIR receipts</strong> give voter-verifiable proof</li>
      </ul>

      <p style="margin-top:12px; font-weight:600;">
        Once integrity is cryptographically enforced, remote voting becomes technically viable without increasing risk.
      </p>

      <hr style="margin:24px 0; opacity:0.3;">


      <!-- ----------------------------------------------- -->
      <!-- SECTION 4 ‚Äî No-BS Summary                       -->
      <!-- ----------------------------------------------- -->

      <h3>üß† No-Bullshit Summary</h3>

      <p>
        Voting today cannot move online because integrity is not enforced at the moment of action.  
        NOVAK adds that missing layer ‚Äî mathematical proof-before-action ‚Äî making both today‚Äôs machines
        safer and tomorrow‚Äôs remote voting possible.
      </p>

      <p style="margin-top:12px; font-weight:700;">
        NOVAK doesn‚Äôt guess. It proves.
      </p>

      <!-- ====================================================== -->
      <!-- ‚≠ê Bottom-right collapse button                         -->
      <!-- ====================================================== -->
      <button 
        onclick="this.closest('details').removeAttribute('open')" 
        class="collapse-bottom-btn"
        style="
          position:absolute;
          bottom:6px;
          right:6px;
          padding:6px 12px;
          font-size:13px;
          border-radius:6px;
          background:var(--card);
          border:1px solid var(--border);
          cursor:pointer;
        ">
        ‚ñ≤ Collapse
      </button>

    </div>
  </details>
</div>
	
<!-- ========================================= -->
<!-- üíª HOW NOVAK SURVIVES PACKET SNIFFING     -->
<!-- ========================================= -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üíª How NOVAK Survives Packet Sniffing (Explained for Everyone)
    </summary>

    <div style="margin-top:16px; font-size:15px; line-height:1.55; position:relative;">
      
      <h3 style="font-size:17px; margin-bottom:8px;">üßí What is Packet Sniffing? (6th Grade Time Machine!)</h3>

      <p>
        Imagine you're passing a note to your friend in class.  
        A kid in the middle tries to peek at the note while it moves across the room.
      </p>
<br>
      <p>
        <strong>Packet sniffing</strong> is the computer version of that.  
        Someone tries to look at the messages (the ‚Äúpackets‚Äù) computers send across the internet.
      </p>
<br>
      <p>
        Packet sniffing can:
        <ul>
          <br>
          <li>See what was sent</li>
          <li>See what was received</li>
          <li>Watch the communication happen</li><br>
        </ul>
      </p>

      <p>
        But here‚Äôs the important part:
        <strong>Just seeing the note doesn‚Äôt let you change the note</strong>  
        ‚Äî and that‚Äôs where NOVAK wins.
      </p>

      <hr style="margin:22px 0; opacity:0.4;">

      <h3 style="font-size:17px; margin-bottom:8px;">üîß What Packet Sniffing Sees (Technical)</h3>

      <p>
        Sniffers can observe:
      </p>
<br>
      <ul>
        <li>üì® Input text</li>
        <li>üì§ Output text</li>
        <li>üîê HVET hash (public)</li>
        <li>üßæ EIR receipt (public)</li>
      </ul>
<br>
      <p>There are <strong>no secret keys or tokens</strong> to steal.</p>

      <hr style="margin:22px 0; opacity:0.4;">

      <h3 style="font-size:17px; margin-bottom:8px;">üö´ What Attackers Still Cannot Do</h3>
      <ul>
        <li>They cannot forge a hash ‚Äî HVET won't match</li>
        <li>They cannot fake an EIR ‚Äî receipt won't match</li>
        <li>They cannot inject modified output ‚Äî Safety Gate rejects it</li>
        <li>They cannot MITM the rule ‚Üí output ‚Üí receipt chain</li>
        <li>They cannot drift the content ‚Äî auto-verification catches it</li><br>
      </ul>

      <p>
        NOVAK treats any mismatch as a failure ‚Üí  
        <strong>the system stops instead of acting on bad data.</strong>
      </p>

      <hr style="margin:22px 0; opacity:0.4;">

      <h3 style="font-size:17px; margin-bottom:8px;">üõ° Why Sniffing Doesn't Help (The Core NOVAK Insight)</h3>

      <p>
        NOVAK binds <strong>input + rule + output</strong> with HVET and verifies everything
        <strong>before</strong> execution.
      </p>
<br>
      <p>Even if an attacker sees the data, they cannot:</p>
<br>
      <ul>
        <li>Change it</li>
        <li>Reorder it</li>
        <li>Modify it secretly</li>
        <li>Insert fake results</li>
      </ul>
<br>
      <p>
        Because the moment anything changes,  
        <strong>NOVAK's cryptographic truth no longer matches</strong> ‚Äî the system freezes.
      </p>

      <hr style="margin:22px 0; opacity:0.4;">

      <h3 style="font-size:17px; margin-bottom:8px;">üìå Final Word</h3>

      <p>
        Traditional systems break when sniffed because they rely on secrecy.
        <br><br>
        NOVAK doesn't rely on secrecy ‚Äî it relies on <strong>mathematical correctness</strong>.
      </p>

      <p style="margin-top:8px;"><strong>
        Sniff all you want ‚Äî you cannot bypass NOVAK without breaking math.
      </strong></p>

      <!-- ‚≠ê Bottom-right collapse button -->
      <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
        ‚ñ≤ Collapse
      </button>

    </div>
  </details>
</div>

<!-- ========================================= -->
<!-- üíª Why TLS, Blockchain & Bitcoin Cannot Prevent Automated Harm ‚Äî but NOVAK Can -->
<!-- ========================================= -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üîç Why TLS, Blockchain & Bitcoin Cannot Prevent Automated Harm ‚Äî but NOVAK Can
    </summary>

    <div class="collapse-inner" style="position:relative; margin-top:16px; font-size:15px; line-height:1.55;">

      <br>
      <h4>‚ùå TLS / SSL</h4>
      <ul>
        <li>Encrypts transmission ‚Äî not correctness</li>
        <li>Assumes data and rules are already valid</li>
        <li>Cannot stop wrongful automation</li>
        <li>Protects communication ‚Äî not decisions</li>
      </ul>

      <br>
      <h4>‚ùå Blockchain</h4>
      <ul>
        <li>Records history after execution</li>
        <li>Slow, expensive, consensus-dependent</li>
        <li>Cannot fix wrong decisions already made</li>
        <li>Makes immutable logs ‚Äî not integrity</li>
      </ul>

      <br>
      <h4>‚ùå Bitcoin & Cryptocurrency</h4>
      <ul>
        <li>Designed for ownership & payments</li>
        <li>Not medical, legal, or operationally authoritative</li>
        <li>Solves accounting ‚Äî not correctness</li>
        <li>Proves who paid ‚Äî not whether a decision was right</li>
      </ul>

      <br>
      <h4>‚ùå Logging, Audits & SIEM</h4>
      <ul>
        <li>Detect failure AFTER damage</li>
        <li>Human investigation required</li>
        <li>Finds harm ‚Äî doesn‚Äôt stop it</li>
      </ul>

      <br>
      <h3>‚úÖ NOVAK Protocol</h3>
      <br>
      <ul>
        <li>Requires mathematical <strong>proof-before-action</strong></li>
        <li>Binds input ‚Üí rule ‚Üí output cryptographically</li>
        <li><strong>Blocks execution</strong> if anything changes</li>
        <li>Generates tamper-proof receipts instantly</li>
        <li>No tokens, mining, blockchain, or consensus</li>
        <li>Runs locally, offline, everywhere</li>
        <li>Protects humans, veterans, taxpayers, and national security</li>
      </ul>

      <!-- ‚≠ê Bottom-right collapse button -->
      <button class="collapse-bottom-btn" onclick="collapseDetails(this)">
        ‚ñ≤ Collapse
      </button>

    </div>
  </details>
</div>

<!-- üß† Backend Card -->
<div class="card">
  <h2>üìÇ Monitor Engine (Python)</h2>
  <br>
  <p>Powerful OS-level real-time monitoring and forensic tracking tools:</p>
  <br>
  <ul>
    <li>üîç <strong><code>watcher.py</code></strong>: Real-time OS-level file change monitor using watchdog.</li>
    <li>üß± <strong><code>fullscan.py</code></strong>: Hashes all files recursively and stores as baseline.json.</li>
    <li>üîê <strong><code>receipt_chain.py</code></strong>: Links EIR receipts cryptographically for tamper detection.</li>
    <li>üìå <strong><code>novak_monitor.py</code></strong>: Create baseline python -m monitor.novak_monitor baseline / -o baseline.json</li>
  </ul>

  <p>Create baseline python -m monitor.novak_monitor baseline / -o baseline.json</p>
  <p>Check against baseline, write chained receipts python -m monitor.novak_monitor check / -b baseline.json --chain receipts.jsonl</p>
  <p>Watch a directory in real time (requires watchdog) pip install watchdog python -m monitor.novak_monitor watch /etc --chain receipts.jsonl</p>
  <br>

  <button class="pill-btn"
          onclick="window.open('https://github.com/novakprotocol/NOVAK-Hash-Monitor/README.md', '_blank')">
    üìò Read Documentation
  </button>
</div>

<!-- =============================== -->
<!-- üö® NOVAK PbA Monitor ‚Äî Feature Card -->
<!-- =============================== -->
<div class="card" style="margin-top:24px;">
  <h2 class="section-title">NOVAK PbA Monitor</h2>
  <p>
    The first implementation of the NOVAK <b>Proof-Before-Action (PbA)</b> cryptographic
    primitive. Enforces <b>deterministic execution integrity</b> before any system is allowed
    to act ‚Äî a capability never before available in security or automation systems.
  </p>

  <ul class="feature-list">
    <li>‚úî Real-time OS monitoring (Linux/macOS/Windows)</li>
    <li>‚úî HVET generation (Rule + Data + Output + Time)</li>
    <li>‚úî EIR receipts (self-authenticating execution proofs)</li>
    <li>‚úî Tamper-evident chained ledgers (RGAC)</li>
    <li>‚úî Merkle anchoring for external verification</li>
    <li>‚úî Baseline and re-verification scans</li>
    <li>‚úî Cryptographic Safety Gate (no action without proof)</li>
  </ul>
  <br>
  <button class="pill-btn"
          onclick="window.open('https://github.com/novakprotocol/NOVAK-Hash-Monitor/novak_pba_monitor', '_blank')">
    üîç View Repository
  </button>

  <button class="pill-btn"
          onclick="window.open('https://github.com/novakprotocol/NOVAK-Hash-Monitor/novak_pba_monitor/README.md', '_blank')">
    üìò Read Documentation
  </button>

  <button class="action-btn"
          onclick="window.open('https://pypi.org/project/novak_pba_monitor', '_blank')">
    üöÄ Install via PyPI (NOT WORKING)
  </button>
</div>

<!-- ====================================================== -->
<!-- ‚úÖ Deterministic Execution Integrity block              -->
<!-- ====================================================== -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      ‚öñÔ∏è Deterministic Execution Integrity
    </summary>

    <div style="margin-top:18px; padding:20px; font-size:17px; line-height:1.65;">

      Asimov gave robots fictional ethics.<br><br>
      <p style="margin:0;">Turing defined when a machine is allowed to compute.</p>
      <br>
      <strong>
        NOVAK defines when a machine is allowed to
        <span class="quote-highlight" style="color:var(--blue); font-weight:700;">ACT</span>
      </strong>
      ‚Äî and forces it to prove it obeyed the law before it does.

      <div class="quote-separator"
           style="margin:18px 0; font-style:italic; opacity:0.85;">
        ‚Äî That is the difference between science fiction and civilization infrastructure.
      </div>

      <div class="quote-text" style="margin-top:10px;">
        <div class="quote-highlight"
             style="font-weight:700; font-size:18px; color:var(--blue);">
          Deterministic Execution Integrity ‚Äî No system may execute without provable truth!
        </div>
      </div>

    </div>
  </details>
</div>

<!-- ====================================================== -->
<!-- ‚úÖ INTERACTIVE MINI-GAMES (separate card)              -->
<!-- ====================================================== -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üéÆ Interactive Integrity Challenges
    </summary>

    <p style="margin-top:14px;">
      Learn NOVAK by doing ‚Äî spot fraud, detect tampering, prove originality.
    </p>
    <br>
    <button class="pill-btn" onclick="startGame('tamper')">üïµÔ∏è Spot the Tampering</button>
    <button class="pill-btn" onclick="startGame('memory')">üß† Hash Memory Match</button>
    <button class="pill-btn" onclick="startGame('fraud')">üö® Fraud Detector</button>
  </details>
</div>

<!-- GAME OUTPUT (single container) -->
<div id="gameBox" class="card" style="margin-top:20px; display:none;"></div>

<!-- ====================================================== -->
<!-- üéß ADVANCED AUDIO PLAYER (GITHUB /audio/ + NOVAK Hash) -->
<!-- ====================================================== -->
<div class="card" style="margin-top:28px; padding:20px;">
  <details>
    <summary style="cursor:pointer; font-size:18px; font-weight:600;">
      üéß ‚ÄúBreak the Chain‚Äù ‚Äî AI-Assisted Track (Listen + Verify)
    </summary>

    <div style="margin-top:18px; font-size:15px; line-height:1.55;">

      <p>
        Power of math, audio engineering, and AI.  
        Stored in <code>/audio/</code> inside the GitHub repo.
      </p>

      <!-- AUDIO PLAYER -->
      <div style="margin-top:18px;">
        <audio id="novakAudio" controls preload="metadata"
               style="width:100%; border-radius:8px;">
          <source src="https://novakprotocol.github.io/NOVAK-Hash-Monitor/audio/Break the Chain.mp3" 
                  type="audio/mpeg">
        </audio>
      </div>

      <!-- Theme-aware waveform -->
      <div id="waveformBar"
           style="margin:14px 0; height:6px; width:100%;
                  background:var(--border);
                  border-radius:4px; overflow:hidden;">
        <div id="waveformProgress"
             style="height:6px; width:0%;
                    transition:width 0.08s linear;
                    background:var(--blue);">
        </div>
      </div>

      <!-- DOWNLOAD MP3 -->
      <a id="downloadSong"
         href="https://novakprotocol.github.io/NOVAK-Hash-Monitor/audio/Break the Chain.mp3"
         download="Break_The_Chain.mp3"
         class="action-btn"
         style="margin-top:10px; display:inline-block;">
        ‚¨á Download Track
      </a>

      <!-- NOVAK AUDIO INTEGRITY CHECK -->
      <div style="margin-top:22px;">
        <h3 style="font-size:17px;">üîê NOVAK Audio Integrity Check</h3>
        <p>This verifies the exact MP3 you downloaded with SHA-256:</p>

        <button onclick="verifyAudioHash()" class="action-btn">
          üß™ Verify Audio Hash (SHA-256)
        </button>

        <pre id="audioHashOutput"
             style="margin-top:12px; font-family:'JetBrains Mono', monospace;
                    font-size:14px; white-space:pre-wrap; background:var(--card);
                    padding:12px; border-radius:8px; border:1px solid var(--border);">
Awaiting verification‚Ä¶
        </pre>
      </div>

      <!-- LYRICS COLLAPSE -->
      <details style="margin-top:24px;">
        <summary style="cursor:pointer; font-size:18px;">
          üé§ Show / Hide Lyrics
        </summary>

        <pre style="margin-top:14px; white-space:pre-wrap;
                    font-family:'JetBrains Mono', monospace;
                    font-size:14px;">
[Intro]
YEAH!
Pressure on the brain‚Äî
Chain on my neck, weight in my name!

[Verse 1]
Heartbeat drum, it‚Äôs a war inside,
Every step I take, somethin‚Äô gotta die.
Dreams in a chokehold, breath runnin‚Äô thin,
Mirror show a beast I been holdin‚Äô in.

No peace, no plan, just fight,
Concrete talk, that streetlight bite.
Every scar got a story to tell,
Every loss lit a match in hell.

[Chorus]
I‚Äôm ‚Äôbout to break the chain!
Ain‚Äôt no fear left in my veins.
I‚Äôm ‚Äôbout to break the chain!
Hear that thunder call my name.
Walls can‚Äôt hold this pain‚Äî
I‚Äôm ‚Äôbout to break the chain!

[Verse 2]
Born in the static, raised in the grime,
Life hit hard but I stayed in time.
Eyes wide open, soul don‚Äôt sleep,
Loyalty deep, that code I keep.

Now I move like storm and flame,
Every breath scream my claim.
If the devil want a piece, he can try‚Äî
I bite back twice before I die.

[Hook 2]
I‚Äôm ‚Äôbout to break the chain!
Whole world feel that strain.
I‚Äôm ‚Äôbout to break the chain!
Let the rage run down the drain.
Ain‚Äôt no cage for this brain‚Äî
I‚Äôm ‚Äôbout to break the chain!

[Bridge / Breakdown]
Gotta fight my way, gotta earn my crown,
Every time they push, I won‚Äôt back down.
Blood in my mouth, still I laugh insane‚Äî
Say my name, say my name!

I‚Äôm ‚Äôbout to break the chain!
Bones crack, beats remain.
I‚Äôm ‚Äôbout to break the chain!
Freedom roars inside my brain.
When that fire hits my veins‚Äî
I‚ÄôM! BOUT! TO! BREAK! THE! CHAIN!
        </pre>
      </details>

    </div>
  </details>
</div>

<!-- =============================================== -->
<!-- üîß FIXED GAME & AUDIO ENGINE JS                 -->
<!-- =============================================== -->
<script>
  function startGame(which) {
    const box = document.getElementById("gameBox");
    box.style.display = "block";

    if (which === "race") return startHashRace();
    if (which === "avalanche") return startAvalancheDemo();
    if (which === "tamper") return startTamperGame();
    if (which === "memory") return startMemoryMatch();
    if (which === "fraud") return startFraudDetector();
  }

  // WAVEFORM PROGRESS
  const audio = document.getElementById('novakAudio');
  const bar = document.getElementById('waveformProgress');

  if (audio && bar) {
    audio.addEventListener('timeupdate', () => {
      if (!audio.duration) return;
      const p = (audio.currentTime / audio.duration) * 100;
      bar.style.width = p + "%";
    });
  }

  // NOVAK AUDIO HASH VERIFICATION
  async function verifyAudioHash() {
    const source = document.querySelector('#novakAudio source');
    const output = document.getElementById('audioHashOutput');
    if (!source || !output) return;

    const url = source.src;
    output.textContent = "Downloading audio for hash verification‚Ä¶";

    try {
      const buffer = await fetch(url).then(r => r.arrayBuffer());
      const hashBuffer = await crypto.subtle.digest("SHA-256", buffer);

      const hashArray = Array.from(new Uint8Array(hashBuffer));
      const hashHex = hashArray
        .map(b => b.toString(16).padStart(2, "0"))
        .join("");

      output.textContent =
`SHA-256 Audio Hash:
${hashHex}

Use this hash in NOVAK EIR / HVET to bind audio integrity.`;
    } catch (err) {
      output.textContent = "‚ùå Error verifying audio: " + err;
    }
  }
</script>

<!-- ====================================================== -->
<!-- FOOTER ‚Äî COLLAPSIBLE PERSONAL DETAILS                  -->
<!-- ====================================================== -->
<footer style="text-align:center; margin-top:15px; font-size:14px; opacity:0.85; line-height:1.6;">
  <br>
  Nothing stored, logged, transmitted, analyzed, monitored, sold, or shared.<br>
  100% local, private, client-side cryptographic verification.
  <br><br>
  NOVAK Protocol- Novak Objective Verification of Autonomous Knowledge<br>
  Proof-Before-Action<br>
  Patent Pending<br>

  <!-- CLICKABLE NAME -->
  <span id="footerName"
        style="cursor:pointer; font-weight:600; text-decoration:underline;"><br>
    Copyright ¬© 2025 Matthew Stephen Novak
  </span>

  <!-- HIDDEN SECTION -->
  <div id="footerDetails" style="display:none; margin-top:18px;">

    PADI 30-Year Member IDC Staff Instructor #888850 ‚Äî 
    <a href="https://www.padi.com" target="_blank" rel="noopener noreferrer">
      www.padi.com
    </a>
    <br><br>

    PADI Project Aware Foundation ‚Äî 
    <a href="https://www.padi.com/aware" target="_blank" rel="noopener noreferrer">
      www.padi.com/aware
    </a>
    <br><br>

    o7 Star Citizen Referral ‚Äî 
    <a href="https://www.robertsspaceindustries.com/enlist?referral=STAR-KRN7-SJTX"
       target="_blank" rel="noopener noreferrer">
      STAR-KRN7-SJTX
    </a>
    <br><br>

    Donations:<br>
    <a href="mailto:matthew@novakprotocol.com?subject=NOVAK%20Support%20or%20Donation">
      matthew@novakprotocol.com
    </a>

  </div>
</footer>

<!-- CLICK TO TOGGLE FOOTER DETAILS -->
<script>
  document.getElementById("footerName").addEventListener("click", function () {
    const box = document.getElementById("footerDetails");
    box.style.display = box.style.display === "none" ? "block" : "none";
  });
</script>

<!-- ====================================================== -->
<!-- GLORY TO GOD ‚Äî CENTERED                               -->
<!-- ====================================================== -->

<!-- Button Centered -->
<div style="display:flex; justify-content:center; width:100%; margin-top:25px;">
  <button class="action-btn"
          onclick="toggleGlorySection()"
          style="font-size:16px; padding:12px 26px; border-radius:10px;">
    ‚úùÔ∏è Glory to God
  </button>
</div>

<!-- Card Centered -->
<div id="glorySection"
     class="card"
     style="display:none; margin:26px auto 0 auto; max-width:850px; text-align:center;
            font-size:15px; line-height:1.63;">

  <p style="font-style:italic; font-size:1.15rem; margin-bottom:22px;">
    ‚ÄúThe LORD detests lying lips, but He delights in those who act faithfully.‚Äù
    ‚Äî Proverbs 12:22
  </p>

  <p>
    The NOVAK Protocol exists because truth has intrinsic value ‚Äî and wrongdoing,
    deception, and hidden harm must be revealed, not rewarded.
  </p><br>

  <p>
    Mathematical integrity reflects moral integrity ‚Äî honesty, accountability, and justice.
  </p><br>

  <p style="font-weight:600;">
    Everything good in this work belongs to God. Everything flawed belongs to me.
  </p><br>

  <p>
    May this technology protect the vulnerable, restrain corruption,
    and advance human dignity.
  </p>
</div>

<script>
  function toggleGlorySection() {
    const box = document.getElementById("glorySection");
    box.style.display = (box.style.display === "none") ? "block" : "none";
  }
</script>

</div> <!-- END MAIN CONTAINER -->

<!-- ‚úÖ FULL JAVASCRIPT ENGINE -->

<script>
/* ============================
   GLOBAL STATE
=============================*/
let currentAudience = "public";
let soundEnabled = false;
let storyIndex = 0;
let storyInterval;

/* ============================
   THEME TOGGLE
=============================*/
function toggleTheme() {
  const html = document.documentElement;
  const newTheme = html.getAttribute("data-theme") === "light" ? "dark" : "light";
  html.setAttribute("data-theme", newTheme);
  localStorage.setItem("novakTheme", newTheme);
}
(function () {
  const saved = localStorage.getItem("novakTheme");
  if (saved) document.documentElement.setAttribute("data-theme", saved);
})();

/* ============================
   MOBILE MENU
=============================*/
function toggleMobileMenu() {
  const m = document.getElementById("mobileMenuPanel");
  m.style.display = m.style.display === "flex" ? "none" : "flex";
}

/* ============================
   AUDIENCE ENGINE
=============================*/
const audienceMessages = {
  public: "NOVAK protects everyday people by ensuring automated decisions affecting healthcare, housing, employment, credit, pricing, education, transportation, and safety cannot silently miscalculate, manipulate, or harm.",
  government: "NOVAK prevents improper payments, wrongful denials, silent automation failure, procurement fraud, evidence tampering, and catastrophic system mistakes ‚Äî without requiring new infrastructure.",
  investor: "NOVAK creates a new execution integrity market ‚Äî reducing enterprise risk, enabling defensible automation, expanding AI commercialization, and unlocking trillion-dollar modernization opportunities.",
  cyber: "NOVAK adds the missing pillar to cybersecurity ‚Äî prevention. No consensus, no blockchain, no latency ‚Äî just mathematical proof that data, rules & outputs haven't changed before execution.",
  academic: "NOVAK formalizes deterministic execution integrity by cryptographically binding attested inputs, governing rules, generated outputs, timestamps, and execution identity into a verifiable receipt."
};

function setAudience(type) {
  currentAudience = type;
  document.getElementById("audienceContent").textContent = audienceMessages[type];

  document.querySelectorAll(".aud-btn").forEach(b => b.classList.remove("active"));
  document.getElementById(`btn-${type}`).classList.add("active");
}

/* ============================
  WHY NOVAK ‚Äî DISMISS & RESTORE
=============================*/
function dismissWhyNovak() {
  document.getElementById("whyNovakCard").style.display = "none";
  document.getElementById("restoreWhyBtn").style.display = "inline-flex";
  localStorage.setItem("whyNovakDismissed", "true");
}
function restoreWhyNovakSection() {
  document.getElementById("whyNovakCard").style.display = "block";
  document.getElementById("restoreWhyBtn").style.display = "none";
  localStorage.removeItem("whyNovakDismissed");
}
function restoreWhyNovakOnLoad() {
  if (localStorage.getItem("whyNovakDismissed") === "true") dismissWhyNovak();
}

/* ============================
 WHAT IS NOVAK ‚Äî DISMISS & RESTORE ‚úÖ FIXED
=============================*/
function dismissWhatIsNovak() {
  document.getElementById("whatIsNovakCard").style.display = "none";
  document.getElementById("restoreWhatIsBtn").style.display = "inline-flex";
  localStorage.setItem("whatIsNovakDismissed", "true");
}
function restoreWhatIsNovakSection() {
  document.getElementById("whatIsNovakCard").style.display = "block";
  document.getElementById("restoreWhatIsBtn").style.display = "none";
  localStorage.removeItem("whatIsNovakDismissed");
}
function restoreWhatIsNovakOnLoad() {
  if (localStorage.getItem("whatIsNovakDismissed") === "true") dismissWhatIsNovak();
}

/* ============================
 WHAT CHANGES ‚Äî DISMISS & RESTORE
=============================*/
function dismissWhatChanges() {
  document.getElementById("whatChangesCard").style.display = "none";
  document.getElementById("restoreWhatBtn").style.display = "inline-flex";
  localStorage.setItem("whatChangesDismissed", "true");
}
function restoreWhatChangesSection() {
  document.getElementById("whatChangesCard").style.display = "block";
  document.getElementById("restoreWhatBtn").style.display = "none";
  localStorage.removeItem("whatChangesDismissed");
}
function restoreWhatChangesOnLoad() {
  if (localStorage.getItem("whatChangesDismissed") === "true") dismissWhatChanges();
}

/* ============================================================
   üèÅ GAME #4 ‚Äî HASH RACE (Real-Time Reaction Game)
   ============================================================ */

function startGame(game) {
  if (game === 'hashrace') {
    launchHashRace();
    return;
  }

  // existing game logic continues‚Ä¶
}

function launchHashRace() {
  const box = document.getElementById("gameBox");
  box.style.display = "block";

  box.innerHTML = `
    <h2>üèÅ Hash Race ‚Äî Reaction Challenge</h2>
    <p>Click the button EXACTLY when the SHA-256 hash starts with <strong>00</strong>!</p>
    <button id="raceBtn" class="action-btn" style="margin-top:12px;">Click When Ready</button>

    <pre id="raceHash" 
         style="margin-top:18px; padding:12px; background:var(--card);
                border:1px solid var(--border); border-radius:8px; 
                font-family:'JetBrains Mono'; font-size:15px;">
    </pre>

    <div id="raceResult" style="margin-top:18px; font-weight:600;"></div>
  `;

  const hashBox = document.getElementById("raceHash");
  const resultBox = document.getElementById("raceResult");
  const raceBtn = document.getElementById("raceBtn");

  let interval = null;
  let canClick = false;

  raceBtn.onclick = () => {
    if (!canClick) {
      resultBox.innerHTML = "<span style='color:var(--red)'>‚ùå Too early!</span> Wait for a valid hash.";
      return;
    }
  };

  async function loopHash() {
    const random = crypto.getRandomValues(new Uint8Array(16));
    const hex = Array.from(random).map(b => b.toString(16).padStart(2, "0")).join("");

    const buf = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(hex));
    const hash = Array.from(new Uint8Array(buf))
      .map(b => b.toString(16).padStart(2, "0"))
      .join("");

    hashBox.textContent = hash;

    if (hash.startsWith("00")) {
      canClick = true;
      raceBtn.innerHTML = "CLICK NOW!";
      raceBtn.style.background = "var(--green)";
      raceBtn.onclick = () => {
        resultBox.innerHTML = `
          <span style="color:var(--green)">‚úî Correct!</span><br>
          You stopped on hash:<br>${hash}
        `;
        clearInterval(interval);
      };
    } else {
      canClick = false;
      raceBtn.innerHTML = "Click When Ready";
      raceBtn.style.background = "var(--blue)";
    }
  }

  interval = setInterval(loopHash, 200);
}

/* ============================
   EXPLAINER BUTTONS & OUTPUT
=============================*/
const explainTexts = {
  simple: "NOVAK requires proof-before-action ‚Äî meaning systems must prove correctness before executing, not after failure.",
  milkshake: "If a shake spills, you see it. In digital systems, corruption is invisible ‚Äî NOVAK makes tampering visible instantly.",
  pencil: "Like coloring with pencils ‚Äî once marked, you can't erase without evidence. NOVAK ensures all digital changes leave proof.",
  key: "A door key doesn't open every house ‚Äî NOVAK ensures only correct, verified data can unlock execution.",
  gov: "NOVAK could save billions by preventing improper payments, fraud, and automation mistakes before they occur.",
  how: "NOVAK binds input, rule, and output into a cryptographic receipt. If anything changes ‚Äî execution is blocked."
};

function showExplain(key, el) {
  const panel = document.getElementById("explainerOutput");
  panel.style.display = "block";
  panel.textContent = explainTexts[key];

  document.querySelectorAll(".explain-btn, .pill-btn")
    .forEach(btn => btn.classList.remove("active"));

  el.classList.add("active");
  panel.scrollIntoView({ behavior: "smooth" });
}

/* ============================
   LIVE HASH ENGINE
=============================*/
async function computeHash(algorithm, value) {
  const data = typeof value === "string"
    ? new TextEncoder().encode(value)
    : new Uint8Array(value);
  const digest = await crypto.subtle.digest(algorithm, data);
  return Array.from(new Uint8Array(digest))
    .map(b => b.toString(16).padStart(2, "0"))
    .join("");
}

async function updateHashes() {
  const input = document.getElementById("novakInput").value;
  const list = document.getElementById("hashOutputList");

  if (!input.trim()) {
    list.innerHTML = "<em>Waiting for input from above...</em>";
    document.getElementById("rgac").innerHTML = "<em>Provide input to begin...</em>";
    return;
  }

const selected = Array.from(document.querySelectorAll(".hashAlgo:checked")).map(a => a.value);
  if (!selected.length) {
    list.innerHTML = "<em>Select at least one hashing algorithm.</em>";
    return;
  }

  list.innerHTML = "";
  for (const algo of selected) {
    const hash = await computeHash(algo, input);

    list.innerHTML += `
      <div style="margin-bottom:18px;">
        <strong>${algo}:</strong><br>
        <span style="font-family:'JetBrains Mono', monospace; word-break:break-all;">
          ${hash}
        </span>
        <br>
        <button class="copy-btn"
          onclick="navigator.clipboard.writeText('${hash}')"
          style="margin-top:6px; padding:4px 10px; font-size:13px;">
          Copy
        </button>
      </div>`;
  }

  updateRGAC(input);
/* ===========================================
   AUTO PROOF-BEFORE-ACTION ENGINE (E)
===========================================*/
let lastApprovedHash = null;

function autoVerify(value) {
  const status = document.getElementById("autoVerifyStatus");

  if (!value.trim()) {
    status.innerHTML = "Waiting for input...";
    lastApprovedHash = null;
    return;
  }

  /* ===========================================
   AUTO-VERIFICATION TOGGLE CONTROL
===========================================*/
function isAutoVerifyEnabled() {
  const box = document.getElementById("autoVerifyToggle");
  return box && box.checked;
}

  computeHash("SHA-256", value).then(currentHash => {
    if (lastApprovedHash === null) {
      lastApprovedHash = currentHash;
      status.innerHTML = `üü¶ First hash approved<br><strong>SHA-256:</strong> ${currentHash}`;
      return;
    }

    if (lastApprovedHash === currentHash) {
      status.innerHTML = `üü© Verified ‚Äî No changes detected<br><strong>SHA-256:</strong> ${currentHash}`;
    } else {
      status.innerHTML = `üü• BLOCKED ‚Äî Integrity changed BEFORE execution<br><strong>Old:</strong> ${lastApprovedHash}<br><strong>New:</strong> ${currentHash}`;
    }
  });
}
 
}

document.getElementById("novakInput").addEventListener("input", () => {
  updateHashes();

  if (isAutoVerifyEnabled()) {
    autoVerify(document.getElementById("novakInput").value);
  } else {
    document.getElementById("autoVerifyStatus").innerHTML =
      "<em>Auto-Verification disabled.</em>";
  }
});

/* ============================
   RGAC VISUALIZER
=============================*/
function updateRGAC(value) {
  const box = document.getElementById("rgac");
  if (!value.trim()) {
    box.innerHTML = "<em>Provide input to begin...</em>";
    return;
  }
  const labels = ["Data", "Rule", "Output", "Verifier", "Receipt"];
  box.innerHTML = labels.map((l, i) =>
    `<span style="padding:4px 10px;border:1px solid var(--border);
     border-radius:6px; margin-right:6px; display:inline-block;">
     ${l} #${i + 1}
     </span>`
  ).join("");
}

/* ============================
   FILE HASH VERIFICATION
=============================*/
const dropzone = document.getElementById("dropzone");
const fileInput = document.getElementById("fileInput");
const fileHashResult = document.getElementById("fileHashResult");

dropzone.addEventListener("click", () => fileInput.click());
dropzone.addEventListener("dragover", e => {
  e.preventDefault();
  dropzone.style.background = "rgba(26,79,179,0.07)";
});
dropzone.addEventListener("dragleave", () =>
  dropzone.style.background = "transparent"
);
dropzone.addEventListener("drop", e => {
  e.preventDefault();
  dropzone.style.background = "transparent";
  handleFileHash(e.dataTransfer.files[0]);
});
fileInput.addEventListener("change", e =>
  handleFileHash(e.target.files[0])
);

async function handleFileHash(file) {
  if (!file) return;
  const buf = await file.arrayBuffer();
  const hash = await computeHash("SHA-256", buf);
  fileHashResult.innerHTML =
    `‚úÖ <strong>${file.name}</strong><br>SHA-256: <code>${hash}</code>`;
}

/* ============================
   EXAMPLE DATASETS
=============================*/
const examples = {
  va: "Veteran: John Doe\nClaim #: 27-982271\nCondition: Lumbar Spine Degeneration\nRating Requested: 70%\nFiled: 2024-10-17",
  medical: "Patient: Sarah Collins\nDiagnosis: Acute Appendicitis\nMedication: IV Ceftriaxone\nPhysician: Dr. Patel",
  finance: "Wire Transfer: $82,750\nSender: Redwood Logistics\nRecipient: Meridian Aerospace\nRouting: 021000021",
  robot: "Robot Command: LIFT-PALLET\nWarehouse Zone: C7\nWeight Limit: 225 kg\nAuthorization: Level-3 Supervisor",
  ai: "AI Output ‚Äî Content Filter\nUserID: 992882\nReason: Probable Misinformation\nConfidence: 0.82",
  legal: "Court Filing ‚Äî Motion to Compel\nDocket #: 5:24-cv-1772\nFiled: March 4, 2025\nJurisdiction: 9th Circuit"
};
function loadExample(key) {
  document.getElementById("novakInput").value = examples[key] || "";
  updateHashes();
}

/* ============================
 ‚úÖ MINI-GAMES ‚Äî NOW FULLY WORKING
=============================*/
function toggleSound() {
  soundEnabled = !soundEnabled;
  document.querySelector(".sound-toggle").textContent =
    soundEnabled ? "üîä" : "üîá";
}

function startGame(type) {
  const box = document.getElementById("gameBox");
  box.style.display = "block";

  if (type === "tamper") return gameTamper();
  if (type === "memory") return gameMemory();
  if (type === "fraud") return gameFraud();
}

/* üïµÔ∏è Spot the Tampering */
function gameTamper() {
  const original = "Approved VA Claim ‚Äî Rating 70% ‚Äî 2025-03-14";
  const tampered = "Approved VA Claim ‚Äî Rating 10% ‚Äî 2025-03-14";

  document.getElementById("gameBox").innerHTML = `
    <h3>üïµÔ∏è Spot the Tampering</h3>
    <p>Two records ‚Äî one was altered. Which one triggers NOVAK?</p>

    <pre>${original}</pre>
    <pre>${tampered}</pre>

    <div style="display:flex; gap:10px; margin-top:14px;">
      <button class="action-btn" onclick="checkTamper(true)">Top is Original ‚úÖ</button>
      <button class="action-btn" onclick="checkTamper(false)">Bottom is Original ‚úÖ</button>
    </div>

    <div id="tamperResult" style="margin-top:16px; font-weight:600;"></div>
  `;
}
function checkTamper(choice) {
  const result = document.getElementById("tamperResult");
  if (choice)
    result.textContent = "‚úÖ Correct ‚Äî NOVAK detects rating manipulation instantly.";
  else
    result.textContent =
      "‚ùå Incorrect ‚Äî silent benefit reductions could occur without NOVAK.";
}

/* üß† Memory Match */
function gameMemory() {
  const words = ["NOVAK", "Integrity", "Receipt", "Hash", "Proof", "Audit"];
  const shuffled = [...words, ...words].sort(() => Math.random() - 0.5);

  document.getElementById("gameBox").innerHTML = `
    <h3>üß† Hash Memory Match</h3>
    <p>Match pairs ‚Äî NOVAK ensures data consistency the same way.</p>

    <div id="memoryGrid"
         style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px; margin-top:16px;">
    </div>

    <div id="memoryStatus" style="margin-top:16px; font-weight:600;"></div>
  `;

  const grid = document.getElementById("memoryGrid");
  shuffled.forEach((word, idx) => {
    const btn = document.createElement("button");
    btn.textContent = "‚ùì";
    btn.dataset.value = word;
    btn.dataset.index = idx;
    btn.className = "action-btn";
    btn.style.padding = "12px";
    btn.onclick = () => handleMemoryClick(btn);
    grid.appendChild(btn);
  });

  window.memoryFirst = null;
  window.memoryMatches = 0;
}
function handleMemoryClick(btn) {
  btn.textContent = btn.dataset.value;

  if (!memoryFirst) {
    memoryFirst = btn;
    return;
  }

  if (memoryFirst.dataset.value === btn.dataset.value &&
      memoryFirst !== btn) {
    memoryMatches++;
    memoryFirst.style.background = "#059669";
    btn.style.background = "#059669";
    memoryFirst.disabled = true;
    btn.disabled = true;

    if (memoryMatches === 6)
      document.getElementById("memoryStatus").textContent =
        "‚úÖ Perfect ‚Äî NOVAK never forgets integrity!";
  } else {
    setTimeout(() => {
      memoryFirst.textContent = "‚ùì";
      btn.textContent = "‚ùì";
    }, 700);
  }
  memoryFirst = null;
}

/* üö® Fraud Detector */
function gameFraud() {
  const clean = "Invoice #88427 ‚Äî $4,620 ‚Äî Approved ‚Äî 2025-04-02";
  const fraud = "Invoice #88427 ‚Äî $84,620 ‚Äî Approved ‚Äî 2025-04-02";

  document.getElementById("gameBox").innerHTML = `
    <h3>üö® Fraud Detector</h3>
    <p>One transaction was manipulated ‚Äî NOVAK would stop it instantly.</p>

    <pre>${clean}</pre>
    <pre>${fraud}</pre>

    <button class="action-btn" onclick="detectFraud()" style="margin-top:14px;">
      Run Integrity Check ‚úÖ
    </button>

    <div id="fraudResult" style="margin-top:16px; font-weight:600;"></div>
  `;
}
function detectFraud() {
  document.getElementById("fraudResult").textContent =
    "‚úÖ Fraud detected ‚Äî amount alteration breaks cryptographic binding.";
}

/* ============================
   STRUCTURED DATA VALIDATION
=============================*/
document.getElementById("structuredFile")?.addEventListener("change", async e => {
  const f = e.target.files[0];
  if (!f) return;
  const txt = await f.text();
  const sha = await computeHash("SHA-256", txt);

  structuredResult.innerHTML =
    `‚úÖ File loaded ‚Äî integrity proven\n\nSHA-256: ${sha}`;
});

/* ============================
   TRANSPARENCY MODE
=============================*/
function toggleTransparency() {
  const p = document.getElementById("transparencyView");
  p.style.display = p.style.display === "none" ? "block" : "none";

  p.innerHTML =
    `DATA ‚ûú RULE ‚ûú OUTPUT\n\nMathematically bound, cryptographically verified.`;
}

// ================================
// üîê GENERATE RECEIPT + QR + JSON
// ================================
async function generateReceipt() {

  // Collect all hashes currently visible
  const receiptData = {
    timestamp: new Date().toISOString(),
    hashes: {
      sha256: window.lastHashes?.sha256 || null,
      sha384: window.lastHashes?.sha384 || null,
      sha512: window.lastHashes?.sha512 || null,
      sha3_256: window.lastHashes?.sha3_256 || null
    },
    hvet: window.hvetValue || null,
    rgac: {
      block: window.rgacCounter || 1,
      value: window.lastApproved || null
    }
  };

  // Display JSON in receipt panel
  document.getElementById("receiptOutput").textContent =
    JSON.stringify(receiptData, null, 2);

  // ===== QR Code Generation =====
  const qrContainer = document.getElementById("qrContainer");
  qrContainer.innerHTML = ""; // clear old QR

  new QRCode(qrContainer, {
    text: JSON.stringify(receiptData),
    width: 130,
    height: 130,
    correctLevel: QRCode.CorrectLevel.M
  });

  // ===== JSON Download =====
  const blob = new Blob([JSON.stringify(receiptData, null, 2)], {
    type: "application/json"
  });

  const url = URL.createObjectURL(blob);
  const dl = document.getElementById("jsonDownloadLink");
  dl.href = url;
  dl.download = `NOVAK_Receipt_${Date.now()}.json`;
  dl.style.display = "inline-block";
}

/* ===============================
   Documentation Dropdown
================================ */
function toggleDocsMenu() {
  const menu = document.getElementById("docsMenu");
  const isOpen = menu.style.display === "block";
  menu.style.display = isOpen ? "none" : "block";
}

// auto-close dropdown when clicking outside
document.addEventListener("click", function (e) {
  const menu = document.getElementById("docsMenu");
  const button = document.querySelector(".dropdown-btn");

  if (!menu || !button) return;

  if (!menu.contains(e.target) && !button.contains(e.target)) {
    menu.style.display = "none";
  }
});

/* ============================
   WALKTHROUGH MODE
=============================*/
const slides = [
  "Welcome ‚Äî NOVAK fixes the world‚Äôs most dangerous hidden problem: automation without proof.",
  "Today, systems approve loans, surgeries, benefits, procurement, sentencing ‚Äî without guaranteed correctness.",
  "NOVAK requires mathematical execution integrity ‚Äî BEFORE automated action.",
  "Hashes alone don't prevent harm. NOVAK binds data, rules & outputs into a cryptographic execution receipt.",
  "If anything changes ‚Äî fraud, glitch, bias, breach ‚Äî NOVAK blocks execution.",
  "Government, healthcare, banking, defense & AI become provably safe and accountable.",
  "Now try entering text below ‚Äî NOVAK proves it instantly.",
  "NOVAK doesn't replace systems ‚Äî it protects them.",
  "Proof-before-action becomes the new global safety standard."
];
function startStoryMode() {
  storyPanel.style.display = "block";
  storyIndex = 0;
  storyPanel.textContent = slides[0];
  clearInterval(storyInterval);

  storyInterval = setInterval(() => {
    storyIndex++;
    if (storyIndex >= slides.length) return clearInterval(storyInterval);
    storyPanel.textContent = slides[storyIndex];
    storyPanel.scrollIntoView({ behavior: "smooth" });
  }, 4500);
}

/* ============================
   EXECUTIVE BRIEF EXPORT
=============================*/
function exportBriefing() {
  const text =
`NOVAK Protocol ‚Äî Executive Briefing

Mission:
Prevent catastrophic automated decisions by requiring mathematical proof-before-action.

Why Existing Security Fails:
‚Ä¢ TLS secures transmission ‚Äî not correctness
‚Ä¢ Blockchain records events ‚Äî it cannot stop harm
‚Ä¢ Bitcoin proves ownership ‚Äî not legality or truth
‚Ä¢ Logging happens after ‚Äî when damage is irreversible

What NOVAK Solves:
‚Ä¢ Proves input, rule & output correctness before execution
‚Ä¢ Prevents fraud, bias, miscalculation & silent corruption
‚Ä¢ Generates tamper-proof execution receipts
‚Ä¢ Works offline, locally ‚Äî no blockchain needed

Where NOVAK Applies:
VA, DoD, CMS, SSA, DOJ, DHS, IRS, Treasury
Hospitals, insurers, banks, aviation, robotics, AI

Status:
Patent Pending ‚Äî Matthew Novak
www.NOVAKProtocol.com`;

  const blob = new Blob([text], { type: "text/plain"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "NOVAK_Executive_Report.txt";
  a.click();
  URL.revokeObjectURL(url);
}

  /* ============ GLORY TO GOD & SONG TOGGLE ============ */
  function toggleGlorySection() {
    const box = document.getElementById("glorySection");
    const show = box.style.display === "none" || !box.style.display;
    box.style.display = show ? "block" : "none";
    if (show) {
      const rect = box.getBoundingClientRect();
      const top = window.scrollY + rect.top - 90;
      window.scrollTo({ top, behavior: "smooth" });
    }
  }

  function toggleSongLyrics() {
    const block = document.getElementById("songBlock");
    const show = block.style.display === "none" || !block.style.display;
    block.style.display = show ? "block" : "none";
  }

/* ============================
   INIT ON LOAD ‚úÖ IMPORTANT
=============================*/
document.addEventListener("DOMContentLoaded", () => {
  setAudience("public");
  restoreWhyNovakOnLoad();
  restoreWhatIsNovakOnLoad();   // ‚úÖ Now included
  restoreWhatChangesOnLoad();
  updateHashes();
});

/* ============================================================
   WOW MODE ‚Äì AUTO-DETECT MANIPULATION
   ============================================================ */
let wowMode = true;   // toggle if needed
let lastHash = "";
let lastUpdate = 0;

// attach into your existing hash update pipeline
async function detectTamper(value) {
  if (!wowMode) return;

  const now = performance.now();
  const sha = await computeHash("SHA-256", value);

  // first hash
  if (!lastHash) {
    lastHash = sha;
    lastUpdate = now;
    return;
  }

  // if hash changes faster than a human could type ‚Üí automation or corruption
  const diff = now - lastUpdate;
  if (sha !== lastHash && diff < 45) {
    showTamperAlert();
  }

  lastHash = sha;
  lastUpdate = now;
}

function showTamperAlert() {
  const box = document.createElement("div");
  box.style.position = "fixed";
  box.style.bottom = "30px";
  box.style.right = "30px";
  box.style.padding = "16px 22px";
  box.style.borderRadius = "10px";
  box.style.background = "#b91c1c";
  box.style.color = "white";
  box.style.fontWeight = "600";
  box.style.boxShadow = "0 4px 12px rgba(0,0,0,.35)";
  box.style.zIndex = "99999";
  box.textContent = "üü• Suspicious automated modification detected ‚Äî NOVAK blocked execution";

  document.body.appendChild(box);
  setTimeout(() => box.remove(), 4200);
}

/* hook into your existing updateHashes() */
const _updateHashes = updateHashes;
updateHashes = async function() {
  await _updateHashes();
  const txt = document.getElementById("novakInput").value;
  detectTamper(txt);
};

/* ============================================================
   FIX: STICKY HEADER SCROLL (Explain Buttons)
   ============================================================ */
const originalShowExplain = showExplain;
showExplain = function(key, el) {
  originalShowExplain(key, el);
  const panel = document.getElementById("explainerOutput");

  // ensures correct scroll spacing
  const offset = panel.getBoundingClientRect().top + window.scrollY - 120;
  window.scrollTo({ top: offset, behavior: "smooth" });
};

/* ============================================================
   DARK MODE ‚Äì FIX ALL BUTTONS
   ============================================================ */
const css = `
html[data-theme="dark"] .pill-btn,
html[data-theme="dark"] .explain-btn,
html[data-theme="dark"] .action-btn {
  background: #0f172a !important;
  color: #ffffff !important;
  border-color: #ffffff !important;
}

html[data-theme="dark"] .pill-btn:hover,
html[data-theme="dark"] .explain-btn:hover {
  background: #1e293b !important;
}
`;
const style = document.createElement("style");
style.innerHTML = css;
document.head.appendChild(style);

/* ============================================================
   FIX: GUIDED DEMO ‚Äì SLIDES STOPPING
   ============================================================ */
const _startStoryMode = startStoryMode;
startStoryMode = function() {
  clearInterval(storyInterval);
  _startStoryMode();    // now increments properly
};
  
</script>

<script>
(function () {
  const autoToggle  = document.getElementById('autoVerifyToggle');
  const autoStatus  = document.getElementById('autoVerifyStatus');
  const rgacEl      = document.getElementById('rgac');

  // LIVE NOVAK CHAIN OUTPUTS
  const liveHR   = document.getElementById('liveHR');
  const liveHD   = document.getElementById('liveHD');
  const liveHO   = document.getElementById('liveHO');
  const liveHVET = document.getElementById('liveHVET');

  // üîÅ MAIN TEXT AREA BEING MONITORED
  const watchedInput = document.getElementById('novakInput');

  if (!autoToggle || !autoStatus || !watchedInput) {
    console.warn('NOVAK auto-verification demo: missing elements.');
    return;
  }

  // Simple demo hash (NOT real crypto ‚Äì just to drive the UI)
  function simpleHash(str) {
    let hash = 0, i, chr;
    if (str.length === 0) return '0';
    for (i = 0; i < str.length; i++) {
      chr = str.charCodeAt(i);
      hash = ((hash << 5) - hash) + chr;
      hash |= 0; // force 32-bit
    }
    return ('00000000' + (hash >>> 0).toString(16)).slice(-8);
  }

  // Update the HR / HD / HO / HVET <pre> blocks
  function showChain(HR, HD, HO, HVET) {
    if (!liveHR || !liveHD || !liveHO || !liveHVET) return;
    liveHR.textContent   = HR || '';
    liveHD.textContent   = HD || '';
    liveHO.textContent   = HO || '';
    liveHVET.textContent = HVET || '';
  }

  let lastApprovedHash = null; // stores baseline HVET

  function updateStatus() {
    if (!autoToggle.checked) {
      autoStatus.textContent = 'Auto-verification is disabled.';
      autoStatus.style.borderColor = 'var(--border)';
      showChain('', '', '', '');
      if (rgacEl) {
        rgacEl.innerHTML = '<em>Provide input to begin...</em>';
      }
      return;
    }

    const value = watchedInput.value.trim();

    // No text yet
    if (!value) {
      autoStatus.textContent = 'Waiting for input‚Ä¶';
      autoStatus.style.borderColor = 'var(--border)';
      showChain('', '', '', '');
      if (rgacEl) {
        rgacEl.innerHTML = '<em>Provide input to begin...</em>';
      }
      lastApprovedHash = null;
      return;
    }

    // NOVAK-style chain for the demo:
    //   HR = hash("RULE::"   + value)
    //   HD = hash("DATA::"   + value)
    //   HO = hash("OUTPUT::" + value)
    //   HVET = hash(HR + HD + HO)
    const HR   = simpleHash('RULE::'   + value);
    const HD   = simpleHash('DATA::'   + value);
    const HO   = simpleHash('OUTPUT::' + value);
    const HVET = simpleHash(HR + HD + HO);

    // Show live hashes under the green bar
    showChain(HR, HD, HO, HVET);

    const currentHash = HVET;

    // First time: treat as approved baseline
    if (!lastApprovedHash) {
      lastApprovedHash = currentHash;
      autoStatus.textContent =
        '‚úÖ Baseline approved. HVET demo hash = ' + currentHash;
      autoStatus.style.borderColor = '#16a34a'; // green

      if (rgacEl) {
        rgacEl.textContent =
          'Data #1  ‚Üí  Rule #2  ‚Üí  Output #3  ‚Üí  Verifier #4  ‚Üí  Receipt #5  |  HVET = ' + currentHash;
      }
      return;
    }

    // Subsequent edits: compare to baseline
    if (currentHash === lastApprovedHash) {
      autoStatus.textContent =
        '‚úÖ No drift detected. Output still matches last approved hash.';
      autoStatus.style.borderColor = '#16a34a'; // green

      if (rgacEl) {
        rgacEl.textContent =
          'Data #1  ‚Üí  Rule #2  ‚Üí  Output #3  ‚Üí  Verifier #4  ‚Üí  Receipt #5  |  HVET = ' + currentHash;
      }
    } else {
      autoStatus.textContent =
        '‚ùå Drift detected. Current HVET = ' + currentHash +
        ' (baseline = ' + lastApprovedHash + ').';
      autoStatus.style.borderColor = '#dc2626'; // red

      if (rgacEl) {
        rgacEl.textContent =
          '‚ö† Integrity break: chain cannot advance until the new HVET is investigated/approved.';
      }
    }
  }

  // Wire up events
  watchedInput.addEventListener('input', updateStatus);
  autoToggle.addEventListener('change', updateStatus);

  // Initial state
  updateStatus();
})();
</script>

  <script>
document.getElementById("autoVerifyToggle").addEventListener("change", function () {
  const block = document.getElementById("autoVerifyBlock");
  const status = document.getElementById("autoVerifyStatus");

  if (this.checked) {
    block.style.display = "block";
    status.textContent = "Waiting for input...";
  } else {
    block.style.display = "none";
    status.textContent = "Auto-verification is disabled.";
  }
});

document.getElementById("novakInput").addEventListener("input", updateHashes);
document.getElementById("autoVerifyToggle").addEventListener("change", toggleAutoVerify);
updateHashes();

// ‚úÖ Default audience content to Public on load
if (typeof setAudience === "function") {
  setAudience("public");
}

/* ========================================================= */
/* AUDIENCE SELECTOR ‚Äî FIXED FULL FUNCTION                   */
/* ========================================================= */
function setAudience(aud) {

  // 1. Remove active state from all buttons
  document.querySelectorAll('.aud-btn').forEach(btn => btn.classList.remove('active'));

  // 2. Add active state to selected button
  const btn = document.getElementById(`btn-${aud}`);
  if (btn) btn.classList.add('active');

  // 3. Audience text block
  const out = document.getElementById("audienceContent");

  const messages = {
    public: `
      <h3>What NOVAK Means for the Public</h3><br>
      <p>NOVAK prevents computers from acting on wrong or changed information.</p>
    `,
    government: `
      <h3>What NOVAK Means for Government</h3><br>
      <p>Mathematical proof-before-action for all automated systems.</p>
    `,
    investor: `
      <h3>NOVAK for Investors</h3><br>
      <p>Integrity infrastructure for all autonomous decision systems.</p>
    `,
    cyber: `
      <h3>NOVAK for Cybersecurity</h3><br>
      <p>A cryptographic enforcement layer stopping tampering in real time.</p>
    `,
    academic: `
      <h3>NOVAK for Academics</h3><br>
      <p>Formal verification, SHA-based binding, and deterministic execution models.</p>
    `
  };

  // 4. Load correct block
  out.innerHTML = messages[aud] || "";
}

</script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    setAudience('public');
  });
</script>

<script>
async function downloadEirPdf() {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  const eirText  = document.getElementById("eirText").textContent.trim();
  const qrCanvas = document.getElementById("eirQrCanvas");

  // Header
  pdf.setFont("Helvetica", "bold");
  pdf.setFontSize(20);
  pdf.text("NOVAK Execution Identity Receipt (EIR)", 14, 20);

  pdf.setLineWidth(0.5);
  pdf.line(14, 24, 196, 24);

  // Body text
  pdf.setFont("Helvetica", "normal");
  pdf.setFontSize(11);

  const leftMargin   = 14;
  const topMargin    = 34;
  const maxTextWidth = 120;  // leave room on the right for the QR

  let y = topMargin;

  eirText.split("\n").forEach(line => {
    // Wrap long lines (e.g., SHA-256 digest) so nothing is cut off
    const wrappedLines = pdf.splitTextToSize(line, maxTextWidth);

    wrappedLines.forEach(wLine => {
      // Basic page-break safety if the EIR ever gets long
      if (y > 280) {
        pdf.addPage();
        pdf.setFont("Helvetica", "normal");
        pdf.setFontSize(11);
        y = 20;
      }
      pdf.text(wLine, leftMargin, y);
      y += 6;
    });
  });

  // Add QR code in the upper-right
  const imgData = qrCanvas.toDataURL("image/png");
  pdf.addImage(imgData, "PNG", 145, 30, 50, 50);

  pdf.save("NOVAK-EIR-Certificate.pdf");
}
</script>

</div> <!-- moved container close: fixes alignment -->

<script>
function loadExample(type) {
    const textarea = document.getElementById("datasetInput");
    if (!textarea) return;

    const examples = {
        va: `VA Disability Claim Example
--------------------------------
Veteran: John Doe
SSN: 123-45-6789
Condition: Lumbar Spine Degeneration
Claim Date: 2024-02-10
Notes: Chronic pain, range of motion loss.`,
        
        finance: `Financial Transaction Example
--------------------------------
FROM: ACC# 4882203
TO: ACC# 2293842
AMOUNT: $4,900.22
TYPE: ACH TRANSFER
DATE: 2025-01-02`,

        robotics: `Robotics Command Example
--------------------------------
MOVE_ARM: +12.2¬∞
GRIP: CLOSE
TARGET: COORD(4.2, 9.1, 1.0)
AUTH: SESSION-99821`,

        system: `System Log Example
--------------------------------
[WARN] 2025-11-01T14:05:22Z CHECKSUM_MISMATCH
[INFO] 2025-11-01T14:05:23Z RETRYING
[OK]   2025-11-01T14:05:24Z SUCCESS`,

        legal: `Legal Filing Example
--------------------------------
Case: 2025-CV-99231
Plaintiff: A. Johnson
Defendant: R. Smith
Motion: Summary Judgment`
    };

    textarea.value = examples[type] || "";
    updateHashes();  // IMPORTANT ‚Äî this recalculates SHA instantly
}

<script>
let originalSnapshot = "";

function updateAutoDiff(newValue) {

  // store first version if empty
  if (!originalSnapshot) {
    originalSnapshot = newValue;
  }

  // compute bit-diff heatmap + avalanche chain
  computeHeatmapAuto(originalSnapshot, newValue);
  computeAvalancheAuto(newValue);
}

// auto-heatmap from single changing input
async function computeHeatmapAuto(a, b) {
  if (!a || !b) return;

  const hA = await computeSHA(a);
  const hB = await computeSHA(b);

  const bitsA = hexToBits(hA);
  const bitsB = hexToBits(hB);

  const heatEl = document.getElementById("heatmap");
  if (!heatEl) return;

  heatEl.innerHTML = "";

  for (let i = 0; i < bitsA.length; i++) {
    const cell = document.createElement("div");
    cell.className = bitsA[i] === bitsB[i] ? "bit-same" : "bit-diff";
    heatEl.appendChild(cell);
  }
}

// auto avalanche chain
async function computeAvalancheAuto(val) {
  const out = document.getElementById("avalancheFrame");
  if (!out) return;

  const hash = await computeSHA(val);
  out.textContent = hash;
}
</script>

<script>
let originalFrozen = null;

async function updateAutoDiff(value) {
  // Freeze ORIGINAL snapshot only once
  if (originalFrozen === null && value.trim().length > 0) {
    originalFrozen = value;
  }

  if (!originalFrozen) return;

  const hA = await computeSHA(originalFrozen);
  const hB = await computeSHA(value);

  // Update HEATMAP
  const bitsA = hexToBits(hA);
  const bitsB = hexToBits(hB);
  const heatEl = document.getElementById("heatmap");
  heatEl.innerHTML = "";

  for (let i = 0; i < bitsA.length; i++) {
    const cell = document.createElement("div");
    cell.className = bitsA[i] === bitsB[i] ? "bit-same" : "bit-diff";
    heatEl.appendChild(cell);
  }

  // Update AVALANCHE LIVE VIEW
  document.getElementById("avalancheFrame").textContent =
    "Original:  " + hA + "\n" +
    "Now:       " + hB + "\n" +
    "Bits changed: " + countBitDifferences(bitsA, bitsB);
}

function countBitDifferences(a, b) {
  let diff = 0;
  for (let i = 0; i < a.length; i++) {
    if (a[i] !== b[i]) diff++;
  }
  return diff;
}
</script>

<!-- ====================================================== -->
<!-- NOVAK INTEGRITY RECEIPT ENGINE                         -->
<!-- ====================================================== -->
<script>
async function generateReceipt() {
  const inputEl = document.getElementById("expertInput");
  const out = document.getElementById("receiptOutput");
  const qrBox = document.getElementById("qrContainer");
  const dl = document.getElementById("jsonDownloadLink");

  if (!inputEl) {
    console.error("expertInput not found.");
    return;
  }

  const text = inputEl.value.trim();
  if (!text) {
    out.textContent = "No input provided.";
    return;
  }

  // Compute all hashes
  const encoder = new TextEncoder();
  const bytes = encoder.encode(text);

  async function digest(alg) {
    const h = await crypto.subtle.digest(alg, bytes);
    return Array.from(new Uint8Array(h))
      .map(b => b.toString(16).padStart(2,"0"))
      .join("");
  }

  const sha256  = await digest("SHA-256");
  const sha384  = await digest("SHA-384");
  const sha512  = await digest("SHA-512");
  const sha3_256 = null; // optional if using external lib

  // HVET = Hash of Hashes (simple version)
  const hvet = await digest("SHA-256");

  // RGAC = Recursive Global Audit Chain (demo block increments)
  const lastBlock = Number(localStorage.getItem("novak_rgac_block") || 0) + 1;
  localStorage.setItem("novak_rgac_block", lastBlock);

  const receipt = {
    timestamp: new Date().toISOString(),
    hashes: {
      sha256,
      sha384,
      sha512,
      sha3_256
    },
    hvet,
    rgac: {
      block: lastBlock,
      value: hvet
    }
  };

  // Show JSON
  out.textContent = JSON.stringify(receipt, null, 2);

  // Generate QR
  qrBox.innerHTML = "";
  new QRCode(qrBox, {
    text: JSON.stringify(receipt),
    width: 160,
    height: 160
  });

  // Enable download
  dl.style.display = "inline-block";
  dl.onclick = () => {
    const blob = new Blob([JSON.stringify(receipt, null, 2)], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "novak_receipt.json";
    a.click();
    URL.revokeObjectURL(url);
  };
}
</script>

<script>
function toggleStandardsMenu() {
  const menu = document.getElementById("standardsMenu");
  const whiteMenu = document.getElementById("docsMenu");

  // close whitepapers menu if open
  if (whiteMenu && whiteMenu.style.display === "block") {
    whiteMenu.style.display = "none";
  }

  menu.style.display = (menu.style.display === "block") ? "none" : "block";
}

// Close when clicking outside
document.addEventListener("click", function(e) {
  const menu = document.getElementById("standardsMenu");
  const btn = document.querySelector(".dropdown-btn");

  if (!menu || !btn) return;
  if (!menu.contains(e.target) && !btn.contains(e.target)) {
    menu.style.display = "none";
  }
});
</script>

<script>
// üî• Override any previous runAvalanche() with a real SHA-256 bit-flip demo
async function runAvalanche() {
  const originalText = "TEST";

  // Convert to bytes
  const encoder = new TextEncoder();
  const decoder = new TextDecoder();
  const bytes = encoder.encode(originalText);

  // Flip the lowest bit of the first byte ("T")
  bytes[0] ^= 0b00000001;

  // Back to text
  const flippedText = decoder.decode(bytes);

  // Use your existing computeSHA() helper
  const originalHash = await computeSHA(originalText);
  const flippedHash  = await computeSHA(flippedText);

  // Build a simple diff line: ¬∑ = same char, ‚úò = changed
  let diffLine = "";
  for (let i = 0; i < originalHash.length; i++) {
    diffLine += (originalHash[i] === flippedHash[i]) ? "¬∑" : "‚úò";
  }

  const output = `
Original text:  ${originalText}
Original hash:  ${originalHash}

Flipped text:   ${flippedText}  (1 bit changed in first letter)
Flipped hash:   ${flippedHash}

Diff (¬∑ = same, ‚úò = changed):
${diffLine}
`;

  const box = document.getElementById("avalancheOutput");
  if (box) {
    box.textContent = output;
  }
}
</script>

<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>

<script>
async function handleEirFile() {
  const fileInput = document.getElementById("eirFileInput");
  if (!fileInput.files.length) {
    alert("Please select a file first.");
    return;
  }

  const file = fileInput.files[0];
  const arrayBuffer = await file.arrayBuffer();

  // Compute SHA-256 HVET
  const hashBuffer = await crypto.subtle.digest("SHA-256", arrayBuffer);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  const hvet = hashArray.map(b => b.toString(16).padStart(2, "0")).join("");

  // Display HVET
  document.getElementById("eirHvet").textContent = hvet;

  // Build EIR JSON
  const eir = {
    version: "NOVAK-EIR-1",
    filename: file.name,
    size_bytes: file.size,
    hvet_sha256: hvet,
    timestamp_iso: new Date().toISOString(),
    note: "Local-only NOVAK demo ‚Äî bind this EIR + HVET to your own registry."
  };

  const eirString = JSON.stringify(eir, null, 2);
  document.getElementById("eirText").textContent = eirString;

  // Show result block
  document.getElementById("eirResultBlock").style.display = "block";

  // Generate QR
  const qr = new QRious({
    element: document.getElementById("eirQrCanvas"),
    value: eirString,
    size: 260,
    level: "H"
  });
}
</script>

<script>
// Store last computed digest
let lastDigestHex = "";

// Call this after computing any SHA-256 hash
function setDigest(hexDigest) {
  lastDigestHex = hexDigest;
  showDigestFormat("hex");
}

// Convert hex ‚Üí binary string
function hexToBinary(hex) {
  return hex.split("").map(h =>
    parseInt(h, 16).toString(2).padStart(4, "0")
  ).join("");
}

// Convert hex ‚Üí base64
function hexToBase64(hex) {
  const bytes = new Uint8Array(hex.match(/.{1,2}/g).map(b => parseInt(b, 16)));
  return btoa(String.fromCharCode(...bytes));
}

// Main viewer logic
function showDigestFormat(fmt) {
  const out = document.getElementById("digestOutput");
  if (!lastDigestHex) {
    out.textContent = "No digest available yet.";
    return;
  }

  let result = "";

  if (fmt === "hex") {
    result = lastDigestHex;
  } 
  else if (fmt === "base64") {
    result = hexToBase64(lastDigestHex);
  } 
  else if (fmt === "binary") {
    result = hexToBinary(lastDigestHex);
  }

  out.textContent = result;

  // Highlight active button
  document.querySelectorAll(".digest-btn").forEach(btn => btn.classList.remove("active"));
  document.querySelector(`button[onclick="showDigestFormat('${fmt}')"]`).classList.add("active");
}
</script>

<script>

/* ======================================================= */
/*  LIVE SEARCH FILTER FOR LIBRARY MENU                     */
/* ======================================================= */
document.getElementById("docsSearch").addEventListener("keyup", function () {
  const filter = this.value.toLowerCase();
  const items = document.querySelectorAll("#docsMenu a");

  items.forEach(link => {
    const txt = link.textContent.toLowerCase();
    link.style.display = txt.includes(filter) ? "block" : "none";
  });
});

/* ======================================================= */
/*  LIVE SEARCH FILTER FOR LEFT MENU (STANDARDS)           */
/* ======================================================= */
document.getElementById("standardsSearch").addEventListener("keyup", function () {
  const filter = this.value.toLowerCase();
  const items = document.querySelectorAll("#standardsMenu a");

  items.forEach(link => {
    const txt = link.textContent.toLowerCase();
    link.style.display = txt.includes(filter) ? "block" : "none";
  });
});

</script>

<script>
function collapseDetails(el) {
  const details = el.closest("details");
  if (!details) return;

  details.open = false;

  // Scroll back to the summary so user doesn‚Äôt need to scroll manually
  const summary = details.querySelector("summary");
  if (summary) {
    summary.scrollIntoView({ behavior: "smooth", block: "center" });
  }
}
</script>

<!-- ===================================================== -->
<!-- SINGLE-SOURCE Example Dataset Loader                  -->
<!-- ===================================================== -->
<script>
  function setDatasetExample(type) {
    // Main NOVAK input box
    const box = document.getElementById("novakInput");
    if (!box) return;

    // Canonical example texts
    const examples = {
      va: `VA Disability Claim Example
--------------------------------
Veteran: John Doe
Claim #: 27-982271
Condition: Lumbar Spine Degeneration
Rating Requested: 70%
Filed: 2024-10-17`,

      finance: `Financial Transaction Example
--------------------------------
Wire Transfer: $82,750
Sender: Redwood Logistics
Recipient: Meridian Aerospace
Routing: 021000021`,

      robotics: `Robotics Command Example
--------------------------------
Robot Command: LIFT-PALLET
Warehouse Zone: C7
Weight Limit: 225 kg
Authorization: Level-3 Supervisor`,

      system: `System Log Example
--------------------------------
[WARN] 2025-11-01T14:05:22Z CHECKSUM_MISMATCH
[INFO] 2025-11-01T14:05:23Z RETRYING
[OK]   2025-11-01T14:05:24Z SUCCESS`,

      legal: `Legal Filing Example
--------------------------------
Court Filing ‚Äî Motion to Compel
Docket #: 5:24-cv-1772
Filed: March 4, 2025
Jurisdiction: 9th Circuit`
    };

    // Load the chosen example
    const value = examples[type] || "";
    box.value = value;

    // Re-run your existing hash + auto-diff logic if present
    if (typeof updateHashes === "function") {
      updateHashes();
    }
    if (typeof updateAutoDiff === "function") {
      updateAutoDiff(value);
    }
  }
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const resetBtn = document.getElementById("resetTryIt");

  if (resetBtn) {
    resetBtn.addEventListener("click", () => {

      /* Reset input text */
      const input = document.getElementById("novakInput");
      if (input) input.value = "";

      /* Reset SHA outputs */
      const sha256 = document.getElementById("sha256Output");
      if (sha256) sha256.textContent = "";

      /* Reset HR / HD / HO / HVET */
      const hr = document.getElementById("liveHR");
      const hd = document.getElementById("liveHD");
      const ho = document.getElementById("liveHO");
      const hvet = document.getElementById("liveHVET");

      if (hr) hr.textContent = "";
      if (hd) hd.textContent = "";
      if (ho) ho.textContent = "";
      if (hvet) hvet.textContent = "";

      /* Reset auto-verification status */
      const status = document.getElementById("autoVerifyStatus");
      if (status) {
        status.textContent = "Waiting for input‚Ä¶";
        status.style.borderColor = "var(--border)";
      }

      /* Reset RGAC */
      const rgacChain = document.getElementById("rgacChain");
      const rgac = document.getElementById("rgac");

      if (rgacChain) {
        rgacChain.innerHTML = "<em>Waiting for input‚Ä¶</em>";
      } else if (rgac) {
        rgac.innerHTML = "<em>Waiting for input‚Ä¶</em>";
      }

    });
  }

});
</script>

<script>
// -----------------------------
// Remember Hide/Show State
// -----------------------------
const sections = [
  { id: "whatIsNovakCard", key: "hideWhatIsNovak" },
  { id: "whyNovakCard",    key: "hideWhyNovak" },
  { id: "whatChangesCard", key: "hideWhatChanges" }
];

// Apply remembered state on load
window.addEventListener("DOMContentLoaded", () => {
  sections.forEach(sec => {
    const el = document.getElementById(sec.id);
    const hidden = localStorage.getItem(sec.key);

    if (hidden === "true") {
      el.style.display = "none";
    }
  });
});

// Hide function (called by buttons)
function hideSection(id, key) {
  document.getElementById(id).style.display = "none";
  localStorage.setItem(key, "true");
}

// UN-hide function (if you want to expose a restore button later)
function showSection(id, key) {
  document.getElementById(id).style.display = "block";
  localStorage.setItem(key, "false");
}
</script>

<script>
/* ============================================================
   ‚≠ê GOVERNMENT-GRADE NOVAK CERTIFICATE ENGINE ‚Äî V2.4.HOLO-GOV
   Section 3A: Core bootstrap + HVET color science + utilities
   & Treasury-grade certificate renderer (SHA-2 ‚Üí SHA-3)
   ============================================================ */

window.NOVAK_GOV = {
  state: {
    file: null,

    // Canonical legacy HVET (SHA-256) for mesh / seeds
    hvet: "",

    // Full multi-algorithm HVET suite
    hvetSuite: {
      sha256: "",
      sha384: "",
      sha512: "",
      sha3_256: "",
      sha3_512: "",
      registryAnchor: ""
    },

    // Certificate spec + verification status
    status: {
      spec: "NOVAK-EIR V2.4 HOLO-GOV",
      verification: "UNKNOWN"
    },

    serial: "",
    palette: {},
    ctx: null,
    canvas: null,

    // NOVAK logo watermark image
    watermarkImg: null
  },

  /* =====================================================================
     CSPRNG Helper (Treasury-grade jitter / seeds)
     ===================================================================== */
  rnd(min, max) {
    const b = new Uint32Array(1);
    crypto.getRandomValues(b);
    return min + (b[0] / 0xffffffff) * (max - min);
  },

  /* ------------------------------------------------------------
     UTILITY: HVET sub-segment reader
     ------------------------------------------------------------ */
  seg(hex, i, len) {
    if (!hex || i >= hex.length) return 0;
    const v = parseInt(hex.substring(i, i + len), 16);
    return isNaN(v) ? 0 : v;
  },

  /* ------------------------------------------------------------
     UTILITY: Convert degrees ‚Üí radians
     ------------------------------------------------------------ */
  rad(d) {
    return d * Math.PI / 180;
  },

  /* ---------------- Buffer ‚Üí hex ---------------- */
  bufToHex(buf) {
    return Array.from(new Uint8Array(buf))
      .map(b => b.toString(16).padStart(2, "0"))
      .join("");
  },

  /* ============================================================
     üî∑ HVET ‚Üí COLOR SCIENCE ENGINE
     Creates a deterministic palette from HVET hex.
     ============================================================ */
  makePaletteFromHVET(hex) {
    const band = i => parseInt(hex.substring(i, i + 2), 16) || 0;

    const r = band(0);
    const g = band(2);
    const b = band(4);

    const h1 = (r * 1.2 + g * 0.5) % 360;
    const h2 = (g * 1.7 + b * 0.4) % 360;
    const h3 = (b * 1.3 + r * 0.8) % 360;

    const clamp = v => Math.max(0, Math.min(100, v));

    const s1 = clamp(40 + (r % 60));
    const s2 = clamp(45 + (g % 55));
    const s3 = clamp(50 + (b % 50));

    const l1 = clamp(45 + (r % 20));
    const l2 = clamp(50 + (g % 20));
    const l3 = clamp(55 + (b % 20));

    return {
      primary:   `hsl(${h1}, ${s1}%, ${l1}%)`,
      secondary: `hsl(${h2}, ${s2}%, ${l2}%)`,
      tertiary:  `hsl(${h3}, ${s3}%, ${l3}%)`,
      holo1:     `hsla(${h1}, ${s1}%, ${l1}%, 0.35)`,
      holo2:     `hsla(${h2}, ${s2}%, ${l2}%, 0.35)`,
      holo3:     `hsla(${h3}, ${s3}%, ${l3}%, 0.35)`
    };
  },

  /* =====================================================================
     Multi-Algorithm HVET Suite (SHA-2 ‚Üí SHA-3)
     ===================================================================== */
  async computeHVETSuite(buffer) {
    const suite = {
      sha256: "",
      sha384: "",
      sha512: "",
      sha3_256: "",
      sha3_512: "",
      registryAnchor: ""
    };

    // --- SHA-2 family (native WebCrypto) ---
    const h256 = await crypto.subtle.digest("SHA-256", buffer);
    suite.sha256 = this.bufToHex(h256);

    const h384 = await crypto.subtle.digest("SHA-384", buffer);
    suite.sha384 = this.bufToHex(h384);

    const h512 = await crypto.subtle.digest("SHA-512", buffer);
    suite.sha512 = this.bufToHex(h512);

    // --- SHA-3 / Keccak family (best-effort: native ‚Üí polyfill) ---
    async function trySHA3(name, bits, fallbackFn) {
      try {
        const h = await crypto.subtle.digest(name, buffer);
        return {
          hex: Array.from(new Uint8Array(h))
            .map(b => b.toString(16).padStart(2, "0"))
            .join(""),
          note: "native"
        };
      } catch (e) {
        // fall through
      }

      if (typeof fallbackFn === "function") {
        try {
          const hex = await fallbackFn(buffer);
          if (hex && typeof hex === "string") {
            return { hex, note: "polyfill" };
          }
        } catch (e) {
          // fall through
        }
      }

      return {
        hex: "",
        note: "unavailable"
      };
    }

    const poly256 = window.NOVAK_SHA3_256 || null;
    const poly512 = window.NOVAK_SHA3_512 || null;

    const r256 = await trySHA3("SHA3-256", 256, poly256);
    const r512 = await trySHA3("SHA3-512", 512, poly512);

    suite.sha3_256 = r256.hex;
    suite.sha3_512 = r512.hex;

    // For now, registry anchor = SHA-512 HVET (BLAKE3 later if you want)
    suite.registryAnchor = suite.sha512;

    return suite;
  },

  /* ------------------------------------------------------------
     PUBLIC ENTRYPOINT
     (Button: ‚ÄúGenerate Government-Grade Certificate‚Äù)
     ------------------------------------------------------------ */
  async generate() {
    const input = document.getElementById("govFileInput");
    if (!input || !input.files || !input.files.length) {
      alert("Please select a file.");
      return;
    }

    const file = input.files[0];
    this.state.file = file;

    // ---------- MULTI-ALGO HVET SUITE ----------
    const buf = await file.arrayBuffer();
    const suite = await this.computeHVETSuite(buf);

    // ---------- BASIC SANITY + STATUS GATING (no garbage hashes) ----------
    const criticalFailures = [];
    if (!suite.sha256 || suite.sha256.length !== 64)  criticalFailures.push("SHA-256");
    if (!suite.sha384 || suite.sha384.length !== 96)  criticalFailures.push("SHA-384");
    if (!suite.sha512 || suite.sha512.length !== 128) criticalFailures.push("SHA-512");

    if (criticalFailures.length) {
      alert(
        "NOVAK EIR generation aborted.\n\n" +
        "Critical hash failure in: " + criticalFailures.join(", ") +
        ".\nThis environment cannot safely generate a Treasury-grade receipt."
      );
      return;
    }

    const hasSHA3 =
      (suite.sha3_256 && suite.sha3_256.length > 0) &&
      (suite.sha3_512 && suite.sha3_512.length > 0);

    this.state.status = {
      spec: "NOVAK-EIR V2.4 HOLO-GOV",
      verification: hasSHA3
        ? "SUCCESS (SHA-2 + SHA-3 suite OK)"
        : "SUCCESS (SHA-2 suite OK; SHA-3 unavailable in this environment)"
    };

    this.state.hvetSuite = suite;
    this.state.hvet = suite.sha256;

    // ---------- 600 DPI Treasury Canvas (US Letter Portrait) ----------
    const canvas = document.getElementById("govCanvas");
    if (!canvas) {
      console.error("govCanvas not found in DOM.");
      alert("Internal error: govCanvas not found.");
      return;
    }

    canvas.width  = 5100;
    canvas.height = 6600;

    const ctx = canvas.getContext("2d", { alpha: true });
    ctx.imageSmoothingEnabled = true;
    ctx.imageSmoothingQuality = "high";

    this.state.canvas = canvas;
    this.state.ctx = ctx;

    // Layout constants (Treasury spacing)
    this.layout = {
      foilWidth: 180,
      margin: 200,
      topSafe:  520,
      eirX:     340,
      eirY:     2200,
      qrX:      3600,
      qrY:      2200
    };

    // ---------- Color Palette (HVET-driven + anchored NOVAK colors) ----------
    const dyn = this.makePaletteFromHVET(this.state.hvet);
    this.state.palette = {
      // Anchor NOVAK identity colors
      primary:    "#0A3D91",  // NOVAK Blue
      secondary:  "#7A1FB3",  // NOVAK Violet
      tertiary:   "#009E8E",  // NOVAK Teal
      // HVET-driven foils / rainbows
      foil1:      dyn.primary,
      foil2:      dyn.secondary,
      foil3:      dyn.tertiary,
      // Deep ‚Äúink‚Äù color
      sapphire:   "#143B7F",
      // Rainbow spectrum, also HVET-driven
      rainbowA:   dyn.primary,
      rainbowB:   dyn.secondary,
      rainbowC:   dyn.tertiary
    };

    // ---------- NOVAK Logo Watermark Image ----------
    if (!this.state.watermarkImg) {
      const img = new Image();
      img.crossOrigin = "anonymous";
      img.src = "https://novakprotocol.github.io/NOVAK-Hash-Monitor/assets/NOVAK_WATERMARK.png";

      // Re-render AFTER watermark fully loads so you actually see it
      img.onload = () => {
        this.state.watermarkImg = img;
        this.render();
      };

      // Assign early so drawNovakLogoWatermark has a reference
      this.state.watermarkImg = img;
    }

    // Render full Treasury pipeline (first pass ‚Äî possibly before watermark load)
    await this.render();

    // Optional hologram animation hook (safe)
    if (typeof this.startHoloAnimation === "function") {
      this.startHoloAnimation();
    }

    // Show preview + download button
    const preview = document.getElementById("govPreview");
    const dlBtn   = document.getElementById("govDownloadBtn");
    if (preview) preview.style.display = "block";
    if (dlBtn)   dlBtn.style.display   = "inline-block";
  },

  /* =====================================================================
     1. HVET MICROTEXT BACKGROUND
     ===================================================================== */
  drawHVETMesh(ctx, hvet) {
    const W = ctx.canvas.width;
    const H = ctx.canvas.height;

    ctx.save();
    ctx.globalAlpha = 0.065;
    ctx.font = "34px JetBrains Mono";
    ctx.fillStyle = "rgba(0,0,0,0.22)";

    ctx.translate(W / 2, H / 2);
    ctx.rotate(Math.PI * -0.2);

    const repeated = hvet.toUpperCase().repeat(3500);
    let y = -H * 2;

    for (let i = 0; i < 260; i++) {
      const jitterX = this.rnd(-160, 160);
      const jitterY = this.rnd(-12, 12);
      const seg = repeated.substring(i * 260, i * 260 + 1400);
      ctx.fillText(seg, -W * 2 + jitterX, y + jitterY);
      y += 58;
    }

    ctx.restore();
  },

  /* ---------------- Forensic Dual-Blur Layer ---------------- */
  blurHVET(ctx) {
    ctx.save();
    ctx.globalAlpha = 0.045;
    ctx.fillStyle = "#fff";
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    ctx.restore();

    ctx.save();
    ctx.globalAlpha = 0.035;
    ctx.fillStyle = "#fff";
    ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    ctx.restore();
  },

  /* =====================================================================
     2b. PAPER TEXTURE (subtle linen / noise)
     ===================================================================== */
  drawPaperTexture(ctx) {
    const W = ctx.canvas.width;
    const H = ctx.canvas.height;

    const tile = document.createElement("canvas");
    tile.width = 256;
    tile.height = 256;
    const tctx = tile.getContext("2d");

    const imageData = tctx.createImageData(tile.width, tile.height);
    const d = imageData.data;

    for (let i = 0; i < d.length; i += 4) {
      const v = 245 + Math.random() * 8;
      d[i]     = v;
      d[i + 1] = v;
      d[i + 2] = v;
      d[i + 3] = 255;
    }
    tctx.putImageData(imageData, 0, 0);

    const pattern = ctx.createPattern(tile, "repeat");

    ctx.save();
    ctx.globalAlpha = 0.10;
    ctx.fillStyle = pattern;
    ctx.fillRect(0, 0, W, H);
    ctx.restore();
  },

  /* =====================================================================
     2. WATERMARK HEATMAP TAMPER-REVEAL LAYER
     ===================================================================== */
  drawHeatmapLayer(ctx, hvet) {
    const W = ctx.canvas.width;
    const H = ctx.canvas.height;

    let img = ctx.getImageData(0, 0, W, H);
    let data = img.data;
    const hexLen = hvet.length || 1;

    ctx.save();
    ctx.globalAlpha = 0.32;

    for (let y = 0; y < H; y += 2) {
      const rowSeed = this.seg(hvet, (y * 7) % hexLen, 2) & 0xff;

      for (let x = 0; x < W; x += 2) {
        const idx = (y * W + x) * 4;

        const mask =
          (rowSeed ^
            ((x * 13) & 0xff) ^
            ((y * 3) & 0xff));

        const heat = mask / 255;

        data[idx]     = Math.min(255, data[idx]     + 40 * heat);
        data[idx + 1] = Math.max(0,   data[idx + 1] - 20 * heat);
        data[idx + 2] = Math.min(255, data[idx + 2] + 60 * heat);
      }
    }

    ctx.putImageData(img, 0, 0);
    ctx.restore();
  },

  /* =====================================================================
     3. NOVAK LOGO WATERMARK (Triquetra Background)
     ===================================================================== */
  drawNovakLogoWatermark(ctx) {
    const img = this.state.watermarkImg;
    if (!img || !img.complete) return;

    const W = ctx.canvas.width;
    const H = ctx.canvas.height;

    ctx.save();
    ctx.globalAlpha = 0.08;
    ctx.drawImage(img, W / 2 - 850, H / 2 - 850, 1700, 1700);
    ctx.restore();
  },

  /* =====================================================================
     4. CENTER VERTICAL WOVEN HVET SPECTRAL FOIL STRIP
     ===================================================================== */
  drawSpectralFoil(ctx, hvet) {
    const W = ctx.canvas.width;
    const H = ctx.canvas.height;

    const foilWidth = (this.layout && this.layout.foilWidth) || 180;
    const x = (W / 2) - (foilWidth / 2);

    ctx.save();

    let g = ctx.createLinearGradient(x, 0, x + foilWidth, H);
    g.addColorStop(0.00, "rgba(0,198,255,0.85)");
    g.addColorStop(0.22, "rgba(255,0,224,0.55)");
    g.addColorStop(0.50, "rgba(0,230,255,0.80)");
    g.addColorStop(0.78, "rgba(255,0,224,0.55)");
    g.addColorStop(1.00, "rgba(0,198,255,0.85)");
    ctx.fillStyle = g;
    ctx.fillRect(x, 0, foilWidth, H);

    const warpA = (this.seg(hvet, 96, 2) % 7) + 4;
    const warpB = (this.seg(hvet,140, 2) % 55) + 35;

    ctx.globalAlpha = 0.30;
    ctx.lineWidth = 1.0;
    ctx.strokeStyle = "rgba(255,255,255,0.30)";

    for (let y = 0; y < H; y += 20) {
      ctx.beginPath();
      for (let xx = 0; xx < foilWidth; xx += 4) {
        const wobble =
          Math.sin(xx * 0.05 + y * 0.010) * (warpA * 0.8) +
          Math.cos(xx * 0.025 + y * 0.006) * (warpB * 0.08);

        const px = x + xx + wobble;
        const py = y;
        xx === 0 ? ctx.moveTo(px, py) : ctx.lineTo(px, py);
      }
      ctx.stroke();
    }

    ctx.globalAlpha = 0.38;
    ctx.lineWidth = 1.25;
    ctx.strokeStyle = "rgba(255,255,255,0.45)";

    const freq = (this.seg(hvet, 64, 2) % 6) + 4;
    const amp  = (this.seg(hvet,128, 2) % 50) + 50;

    for (let y = 0; y < H; y += 22) {
      ctx.beginPath();
      for (let xx = 0; xx < foilWidth; xx += 3) {
        const wave =
          Math.sin((y * 0.013) * freq + (xx * 0.030)) * (amp * 0.08) +
          Math.cos((xx * 0.040) + (y * 0.008)) * (amp * 0.04);

        const px = x + xx + wave;
        const py = y;

        xx === 0 ? ctx.moveTo(px, py) : ctx.lineTo(px, py);
      }
      ctx.stroke();
    }

    ctx.globalAlpha = 0.10;
    const noise = ctx.createImageData(foilWidth, H);
    for (let i = 0; i < noise.data.length; i += 4) {
      const v = Math.random() * 255;
      noise.data[i]     = v;
      noise.data[i + 1] = v * 0.6;
      noise.data[i + 2] = v * 1.3;
      noise.data[i + 3] = 24;
    }
    ctx.putImageData(noise, x, 0);

    ctx.globalAlpha = 0.16;
    let shine = ctx.createLinearGradient(x, 0, x + foilWidth, 0);
    shine.addColorStop(0.0,  "rgba(255,255,255,0.00)");
    shine.addColorStop(0.50, "rgba(255,255,255,0.80)");
    shine.addColorStop(1.0,  "rgba(255,255,255,0.00)");
    ctx.fillStyle = shine;
    ctx.fillRect(x, 0, foilWidth, H);

    ctx.restore();
  },

  /* =====================================================================
     4b. NOVAK HOLOGRAM (C1) ‚Äî rainbow diffractive style
     ===================================================================== */
  drawHologramStamp(ctx, hvet) {
    const x = 260, y = 360, S = 520;
    const p = this.state.palette || {};

    ctx.save();

    let baseGrad = ctx.createLinearGradient(x, y, x + S, y + S);
    baseGrad.addColorStop(0.00, p.rainbowA || "#00E0FF");
    baseGrad.addColorStop(0.33, p.rainbowB || "#FF00FF");
    baseGrad.addColorStop(0.66, p.rainbowC || "#FFD200");
    baseGrad.addColorStop(1.00, p.foil1    || "#00C6FF");

    ctx.fillStyle = baseGrad;
    ctx.fillRect(x, y, S, S);

    ctx.globalAlpha = 0.22;
    ctx.strokeStyle = "rgba(255,255,255,0.65)";
    for (let i = 0; i < 46; i++) {
      const yy = y + i * (S / 46);
      const xx = x + i * (S / 46);
      ctx.beginPath();
      ctx.moveTo(x, yy);
      ctx.lineTo(x + S, yy);
      ctx.moveTo(xx, y);
      ctx.lineTo(xx, y + S);
      ctx.stroke();
    }

    ctx.globalAlpha = 0.75;
    ctx.lineWidth = 1.6;

    for (let r = 40; r < 260; r += 12) {
      const wobble = (this.seg(this.state.hvet, r, 2) % 4);
      const radius = r + wobble;

      const arcGrad = ctx.createRadialGradient(
        x + S / 2, y + S / 2, radius * 0.2,
        x + S / 2, y + S / 2, radius
      );
      arcGrad.addColorStop(0.0,  p.foil1 || "#00C6FF");
      arcGrad.addColorStop(0.5,  p.foil2 || "#FF00E0");
      arcGrad.addColorStop(1.0,  p.foil3 || "#7AF5FF");

      ctx.strokeStyle = arcGrad;
      ctx.beginPath();
      ctx.arc(x + S / 2, y + S / 2, radius, 0, Math.PI * 2);
      ctx.stroke();
    }

    ctx.globalAlpha = 0.98;
    ctx.fillStyle = p.sapphire || "#143B7F";
    ctx.font = "bold 82px 'Inter', system-ui, sans-serif";
    ctx.textAlign = "center";
    ctx.shadowColor = "rgba(0,0,0,0.35)";
    ctx.shadowBlur = 12;
    ctx.fillText("NOVAK", x + S / 2, y + S / 2 + 28);

    ctx.restore();
  },

  /* =====================================================================
     5. MICROTEXT BORDER ‚Äî L0‚ÄìL15 ‚Ä¢ PL-X ‚Ä¢ PS-X ‚Ä¢ Execution Integrity
     ===================================================================== */
  drawMicroBorder(ctx, hvet) {
    const micro =
      "L0‚ÄìL15 ‚Ä¢ PL-X ‚Ä¢ PS-X ‚Ä¢ Proof-Before-Action ‚Ä¢ Execution Integrity ‚Ä¢ " +
      "HVET ‚Ä¢ RGAC ‚Ä¢ Deterministic Execution ‚Ä¢ Tamper-Evident ‚Ä¢ Registrar-Grade ‚Ä¢ ";

    ctx.save();
    ctx.font = "11px JetBrains Mono";
    ctx.fillStyle = "rgba(0,0,0,0.65)";
    ctx.textBaseline = "middle";

    const W = ctx.canvas.width;
    const H = ctx.canvas.height;

    const jitter = amt => this.rnd(-amt, amt);
    const chars = micro.split("");
    let idx = 0;

    for (let x = 90; x < W - 90; x += 8) {
      const ch = chars[idx++ % chars.length];
      ctx.fillText(ch, x, 64 + jitter(1.3));
    }

    idx = 0;
    for (let x = 90; x < W - 90; x += 8) {
      const ch = chars[idx++ % chars.length];
      ctx.fillText(ch, x, H - 64 + jitter(1.3));
    }

    idx = 0;
    for (let y = 90; y < H - 90; y += 10) {
      const ch = chars[idx++ % chars.length];
      ctx.fillText(ch, 64 + jitter(1.3), y);
    }

    idx = 0;
    for (let y = 90; y < H - 90; y += 10) {
      const ch = chars[idx++ % chars.length];
      ctx.fillText(ch, W - 64 + jitter(1.3), y);
    }

    ctx.restore();
  },

  /* =====================================================================
     6. GUILLOCH√â SUITE (Primary + Interference v2 + Triquetra)
     ===================================================================== */
  drawGuillochePrimary(ctx, p) {
    const W = ctx.canvas.width, H = ctx.canvas.height;
    const cx = W / 2, cy = H * 0.24, R = 820;   // lifted a bit

    const p1 = this.seg(this.state.hvet, 0, 2) % 25 + 22;
    const p2 = this.seg(this.state.hvet, 4, 2) % 30 + 24;
    const phase = (this.seg(this.state.hvet, 12, 2) % 360) * (Math.PI / 180);

    ctx.save();
    ctx.lineWidth = 1.5;
    ctx.globalAlpha = 0.95;
    ctx.beginPath();

    for (let t = 0; t < Math.PI * 18; t += 0.0017) {
      const r =
        R +
        Math.sin(p1 * t + phase) * 42 +
        Math.cos(p2 * t) * 28 +
        this.rnd(-1.6, 1.6);

      const x = cx + r * Math.cos(t);
      const y = cy + r * Math.sin(t);

      const angleNorm = (t / (Math.PI * 2)) % 1;
      let cGrad;
      if (angleNorm < 1 / 3) {
        cGrad = p.primary || "#0A3D91";
      } else if (angleNorm < 2 / 3) {
        cGrad = p.secondary || "#7A1FB3";
      } else {
        cGrad = p.tertiary || "#009E8E";
      }
      ctx.strokeStyle = cGrad;

      t === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
    }

    ctx.stroke();
    ctx.restore();
  },

  // Interference v2 ‚Äî unforgeable curves with diffractive feel
  drawGuillocheInterference(ctx, p) {
    const W = ctx.canvas.width, H = ctx.canvas.height;
    const cx = W / 2, cy = H * 0.24;

    const base = 760;
    const h = this.seg(this.state.hvet, 20, 2) % 110 + 50;
    const k = this.seg(this.state.hvet, 40, 2) % 80 + 34;
    const m = this.seg(this.state.hvet, 60, 2) % 90 + 40;

    ctx.save();
    ctx.globalAlpha = 0.55;
    ctx.lineWidth = 0.9;
    ctx.globalCompositeOperation = "lighter";

    for (let pass = 0; pass < 3; pass++) {
      ctx.beginPath();
      const color =
        pass === 0 ? (p.foil1 || "#00C6FF") :
        pass === 1 ? (p.foil2 || "#FF00E0") :
                     (p.foil3 || "#7AF5FF");
      ctx.strokeStyle = color;

      for (let t = 0; t < Math.PI * 16; t += 0.002) {
        const r =
          base +
          Math.sin(t * (h + pass * 3)) * 26 +
          Math.cos(t * (k + pass * 2)) * 20 +
          Math.sin(t * (m * 0.5 + pass)) * 16 +
          this.rnd(-1.1, 1.1);

        const x = cx + r * Math.cos(t);
        const y = cy + r * Math.sin(t);
        t === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
      }
      ctx.stroke();
    }

    ctx.globalCompositeOperation = "source-over";
    ctx.restore();
  },

  drawTriquetra(ctx, p) {
    const W = ctx.canvas.width, H = ctx.canvas.height;
    const cx = W / 2, cy = H * 0.24;

    const scale = 480;
    const freq = (this.seg(this.state.hvet, 80, 2) % 5) + 3;
    const twist = (this.seg(this.state.hvet, 120, 2) % 360) * (Math.PI / 180);

    ctx.save();
    ctx.globalAlpha = 0.40;
    ctx.lineWidth = 1.3;

    const grad = ctx.createRadialGradient(
      cx, cy, scale * 0.1,
      cx, cy, scale * 1.2
    );
    grad.addColorStop(0.0,  (p.rainbowA || "#00E0FF"));
    grad.addColorStop(0.5,  (p.rainbowB || "#FF00FF"));
    grad.addColorStop(1.0,  (p.rainbowC || "#FFD200"));
    ctx.strokeStyle = grad;

    ctx.beginPath();
    for (let t = 0; t <= Math.PI * 2; t += 0.002) {
      const x = cx + scale * Math.sin(freq * t + twist) * Math.cos(t);
      const y = cy + scale * Math.sin(freq * t + twist) * Math.sin(t);
      t === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
    }

    ctx.stroke();
    ctx.restore();
  },

  /* =====================================================================
     7. PS-X METALLIC CORNER SEALS ‚Äî holographic upgrade
     ===================================================================== */
  drawSeals(ctx, hvet, p) {
    const W = ctx.canvas.width;
    const H = ctx.canvas.height;

    const positions = [
      [260, 260],
      [W - 260, 260],
      [260, H - 260],
      [W - 260, H - 260]
    ];

    positions.forEach(([cx, cy], index) => {
      ctx.save();
      ctx.translate(cx, cy);

      const rot = ((parseInt(hvet.substring(index * 4, index * 4 + 4), 16) % 40) - 20) * (Math.PI / 180);
      ctx.rotate(rot);

      let ring = ctx.createRadialGradient(0, 0, 10, 0, 0, 120);
      ring.addColorStop(0.00, "#FFFFFF");
      ring.addColorStop(0.35, "#E6E6E6");
      ring.addColorStop(0.70, "#BFBFBF");
      ring.addColorStop(1.00, "#999999");

      ctx.fillStyle = ring;
      ctx.beginPath();
      ctx.arc(0, 0, 120, 0, Math.PI * 2);
      ctx.fill();

      ctx.lineWidth = 4;
      const edgeGrad = ctx.createLinearGradient(-120, 0, 120, 0);
      edgeGrad.addColorStop(0.0,  p.foil1 || "#00C6FF");
      edgeGrad.addColorStop(0.5,  p.foil2 || "#FF00E0");
      edgeGrad.addColorStop(1.0,  p.foil3 || "#7AF5FF");
      ctx.strokeStyle = edgeGrad;
      ctx.stroke();

      ctx.save();
      ctx.globalAlpha = 0.55;
      ctx.strokeStyle = p.primary || "#0A3D91";
      ctx.lineWidth = 0.9;
      ctx.beginPath();

      const cycles = 20;
      for (let t = 0; t < Math.PI * 2; t += 0.004) {
        const r =
          78 +
          Math.sin(t * cycles + (index * 0.7)) * 7 +
          Math.cos(t * (cycles + 5)) * 5;

        const x = Math.cos(t) * r;
        const y = Math.sin(t) * r;

        t === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
      }
      ctx.stroke();
      ctx.restore();

      const micro = ("PS-X ‚Ä¢ L0‚ÄìL15 ‚Ä¢ PL-X ‚Ä¢ Execution Integrity ‚Ä¢ ").repeat(20);
      ctx.save();
      ctx.font = "10px JetBrains Mono";
      ctx.fillStyle = "#000";

      for (let i = 0; i < micro.length; i++) {
        const ang = i * 0.11;
        const radius = 100;
        const x = Math.cos(ang) * radius;
        const y = Math.sin(ang) * radius;
        ctx.fillText(micro[i], x, y);
      }
      ctx.restore();

      ctx.save();
      ctx.font = "bold 38px Inter";
      ctx.textAlign = "center";
      ctx.fillStyle = p.sapphire || "#143B7F";
      ctx.shadowColor = "rgba(0,0,0,0.35)";
      ctx.shadowBlur = 6;
      ctx.fillText("PS-X", 0, 14);
      ctx.restore();

      ctx.restore();
    });
  },

  /* =====================================================================
     8. EIR BLOCK ‚Äî Vertical Stacked Multi-Algorithm HVET Suite
     ===================================================================== */
  drawEIR(ctx, file) {
    const suite = this.state.hvetSuite;
    const now = new Date();

    const serial =
      `NOVAK-EIR-${now.getFullYear()}-` +
      `${String(now.getMonth() + 1).padStart(2, "0")}-` +
      `${String(now.getDate()).padStart(2, "0")}-` +
      `${suite.sha256.substring(0, 6).toUpperCase()}`;

    this.state.serial = serial;

    const marginX = (this.layout && this.layout.eirX) || 340;
    let y = (this.layout && this.layout.eirY) || 1500;
    const status = this.state.status || {};
    const p = this.state.palette || {};

    ctx.save();
    ctx.fillStyle = "#000";

    // Title ‚Äî serif for gravitas
    ctx.font = "64px 'Times New Roman', Baskerville, serif";
    ctx.fillText("NOVAK Execution Identity Receipt (EIR)", marginX, y);
    y += 90;

    // Spec + verification status
    ctx.font = "28px Inter";
    ctx.fillText(
      "Cert Spec: " + (status.spec || "NOVAK-EIR V2.4 HOLO-GOV"),
      marginX,
      y
    );
    y += 36;
    ctx.fillText(
      "Verification Status: " + (status.verification || "UNKNOWN"),
      marginX,
      y
    );
    y += 56;

    // Core metadata ‚Äî labels vs values
    ctx.font = "30px Inter";
    ctx.fillText("Serial:", marginX, y);
    ctx.font = "30px JetBrains Mono";
    ctx.fillText(serial, marginX + 150, y);
    y += 40;

    ctx.font = "30px Inter";
    ctx.fillText("File:", marginX, y);
    ctx.font = "30px JetBrains Mono";
    ctx.fillText(file.name, marginX + 150, y);
    y += 40;

    ctx.font = "30px Inter";
    ctx.fillText("Size:", marginX, y);
    ctx.font = "30px JetBrains Mono";
    ctx.fillText(file.size + " bytes", marginX + 150, y);
    y += 40;

    ctx.font = "30px Inter";
    ctx.fillText("Issued:", marginX, y);
    ctx.font = "30px JetBrains Mono";
    ctx.fillText(now.toISOString(), marginX + 150, y);
    y += 70;

    // Registry Anchor
    ctx.font = "32px Inter";
    ctx.fillText("Registry Anchor (SHA-512 HVET)", marginX, y);
    y += 48;

    ctx.font = "26px JetBrains Mono";
    ctx.fillText(
      (suite.registryAnchor && suite.registryAnchor.length)
        ? suite.registryAnchor
        : "[UNAVAILABLE: registry anchor not computed]",
      marginX,
      y
    );
    y += 70;

    // Primary HVET box ‚Äî sealed data panel (SHA-256 + SHA-512)
    const boxX = marginX - 20;
    const boxY = y - 10;
    const boxW = 2800;
    const boxH = 150;

    const boxGrad = ctx.createLinearGradient(boxX, boxY, boxX + boxW, boxY + boxH);
    boxGrad.addColorStop(0.0,  "rgba(255,255,255,0.96)");
    boxGrad.addColorStop(0.5,  "rgba(230,245,255,0.98)");
    boxGrad.addColorStop(1.0,  "rgba(255,255,255,0.96)");

    ctx.save();
    ctx.fillStyle = boxGrad;
    ctx.strokeStyle = p.foil1 || "#00C6FF";
    ctx.lineWidth = 4;

    const r = 18;
    ctx.beginPath();
    ctx.moveTo(boxX + r, boxY);
    ctx.lineTo(boxX + boxW - r, boxY);
    ctx.quadraticCurveTo(boxX + boxW, boxY, boxX + boxW, boxY + r);
    ctx.lineTo(boxX + boxW, boxY + boxH - r);
    ctx.quadraticCurveTo(boxX + boxW, boxY + boxH, boxX + boxW - r, boxY + boxH);
    ctx.lineTo(boxX + r, boxY + boxH);
    ctx.quadraticCurveTo(boxX, boxY + boxH, boxX, boxY + boxH - r);
    ctx.lineTo(boxX, boxY + r);
    ctx.quadraticCurveTo(boxX, boxY, boxX + r, boxY);
    ctx.closePath();

    ctx.fill();
    ctx.stroke();
    ctx.restore();

    let innerY = y + 14;

    ctx.font = "28px Inter";
    ctx.fillStyle = "#111";
    ctx.fillText("Primary HVET (SHA-256) and Secondary Anchor (SHA-512)", marginX, innerY);
    innerY += 36;

    ctx.font = "26px JetBrains Mono";
    ctx.fillText("SHA-256 : " + suite.sha256, marginX, innerY);
    innerY += 30;
    ctx.fillText("SHA-512 : " + suite.sha512, marginX, innerY);

    y = boxY + boxH + 60;

    // Full Multi-Algorithm HVET Suite (SHA-2 ‚Üí SHA-3)
    ctx.font = "32px Inter";
    ctx.fillStyle = "#000";
    ctx.fillText("NOVAK Multi-Algorithm HVET Suite (SHA-2 ‚Üí SHA-3)", marginX, y);
    y += 60;

    const maxW  = 2600;
    const lineH = 30;

    const printHash = (label, hex) => {
      ctx.font = "26px JetBrains Mono";
      let line = label + ": ";
      let yy   = y;

      const text = hex && hex.length ? hex : "[UNAVAILABLE]";
      for (const c of text) {
        const test = line + c;
        if (ctx.measureText(test).width > maxW) {
          ctx.fillText(line, marginX, yy);
          yy += lineH;
          line = " ".repeat(label.length + 2) + c;
        } else {
          line = test;
        }
      }

      if (line) {
        ctx.fillText(line, marginX, yy);
        yy += lineH;
      }

      y = yy + 10;
    };

    printHash("SHA-256 ", suite.sha256);
    printHash("SHA-384 ", suite.sha384);
    printHash("SHA-512 ", suite.sha512);
    printHash("SHA3-256", suite.sha3_256);
    printHash("SHA3-512", suite.sha3_512);

    ctx.restore();
  },

  /* =====================================================================
     9. QR BLOCK ‚Äî includes full HVET suite payload
     ===================================================================== */
  drawQR(ctx, file) {
    const W = ctx.canvas.width;
    const x = (this.layout && this.layout.qrX) || (W - 800);
    const y = (this.layout && this.layout.qrY) || 1500;

    const suite = this.state.hvetSuite;

    const payload = {
      file: file.name,
      size: file.size,
      hvet: suite.sha256,
      hvets: {
        sha256:   suite.sha256,
        sha384:   suite.sha384,
        sha512:   suite.sha512,
        sha3_256: suite.sha3_256,
        sha3_512: suite.sha3_512
      },
      serial: this.state.serial,
      issued: new Date().toISOString()
    };

    const qr = new QRious({
      value: JSON.stringify(payload),
      size: 420,
      level: "H"
    });

    ctx.save();
    ctx.fillStyle = "#fff";
    ctx.fillRect(x - 20, y - 20, 460, 500);

    ctx.drawImage(qr.canvas, x, y, 420, 420);

    ctx.font = "26px Inter";
    ctx.fillStyle = "#111";
    ctx.fillText("SCAN FOR EIR", x + 90, y + 460);

    ctx.restore();
  },

  /* =====================================================================
     10. REGISTRY ANCHOR (now rendered inside EIR block)
     ===================================================================== */
  drawAnchor(ctx) {
    // Intentionally left blank.
  },

  /* =====================================================================
     11. FOOTER
     ===================================================================== */
  drawFooter(ctx) {
    const H = ctx.canvas.height;
    const p = this.state.palette || {};

    ctx.save();
    ctx.fillStyle = p.sapphire || "#143B7F";
    ctx.font = "26px JetBrains Mono";
    ctx.shadowColor = "rgba(0,0,0,0.25)";
    ctx.shadowBlur = 4;

    ctx.fillText(
      "Digital Signature (PBKDF2/Argon2 Placeholder):",
      260,
      H - 240
    );
    ctx.fillText("Issuer: NOVAK Integrity Authority", 260, H - 200);
    ctx.fillText(
      "Certificate Serial: " + this.state.serial,
      260,
      H - 160
    );

    ctx.restore();
  },

  /* =====================================================================
     12. RENDER PIPELINE ‚Äî FULL TREASURY ORDER
     ===================================================================== */
  async render() {
    const { ctx, file, hvet, palette } = this.state;
    if (!ctx || !file || !hvet) return;

    const W = ctx.canvas.width;
    const H = ctx.canvas.height;

    // Base paper
    ctx.fillStyle = "#fff";
    ctx.fillRect(0, 0, W, H);

    this.drawPaperTexture(ctx);

    // HVET microtext + blur + heatmap
    this.drawHVETMesh(ctx, hvet);
    this.blurHVET(ctx);
    this.drawHeatmapLayer(ctx, hvet);

    // NOVAK watermark (if loaded)
    this.drawNovakLogoWatermark(ctx);

    // Foil strip
    this.drawSpectralFoil(ctx, hvet);

    // Hologram + guilloch√© (lines on top of foil background)
    this.drawHologramStamp(ctx, hvet);
    this.drawGuillochePrimary(ctx, palette);
    this.drawGuillocheInterference(ctx, palette);
    this.drawTriquetra(ctx, palette);

    // Borders + seals
    this.drawMicroBorder(ctx, hvet);
    this.drawSeals(ctx, hvet, palette);

    // EIR + QR + anchor + footer
    this.drawEIR(ctx, file);
    this.drawQR(ctx, file);
    this.drawAnchor(ctx);
    this.drawFooter(ctx);

    // Outer anti-tamper border
    ctx.save();
    const g = ctx.createLinearGradient(0, 0, W, H);
    g.addColorStop(0,   "#00C6FF");
    g.addColorStop(0.5, "#FF00E0");
    g.addColorStop(1,   "#00C6FF");
    ctx.strokeStyle = g;
    ctx.lineWidth = 24;
    ctx.strokeRect(40, 40, W - 80, H - 80);
    ctx.restore();
  },

  /* =====================================================================
     13. PDF DOWNLOAD ‚Äî 600 DPI 5100√ó6600
     ===================================================================== */
  downloadPDF() {
    if (!this.state.canvas) {
      alert("Generate a certificate first.");
      return;
    }

    if (!window.jspdf || !window.jspdf.jsPDF) {
      alert("Missing jsPDF UMD. Include jspdf.umd.min.js.");
      return;
    }

    const { jsPDF } = window.jspdf;

    const srcCanvas = this.state.canvas;

    const scaledCanvas = document.createElement("canvas");
    scaledCanvas.width  = 5100 * 0.50;
    scaledCanvas.height = 6600 * 0.50;

    const sctx = scaledCanvas.getContext("2d");
    sctx.drawImage(srcCanvas, 0, 0, scaledCanvas.width, scaledCanvas.height);

    const img = scaledCanvas.toDataURL("image/png");

    const pdf = new jsPDF("p", "px", [
      scaledCanvas.width,
      scaledCanvas.height
    ]);

    pdf.addImage(img, "PNG", 0, 0, scaledCanvas.width, scaledCanvas.height);

    const name = this.state.serial
      ? this.state.serial + ".pdf"
      : "NOVAK-Certificate-V2.4HOLO-GOV.pdf";

    pdf.save(name);
  }
};
</script>

</body>
</html>

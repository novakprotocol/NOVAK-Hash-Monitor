<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NOVAK Protocol â€” Proof-Before-Action Integrity</title>

<meta name="description"
  content="NOVAK Protocol â€” mathematical proof-before-action execution integrity preventing fraud, automation failure, mispayment, wrongful denial, cyber manipulation, and evidence tampering." />

<link rel="icon" type="image/png" href="favicon.png" />

<!-- âœ… Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono&display=swap"
      rel="stylesheet" />

<style>
/* ============================================================================ */
/* âœ… GLOBAL RESET + BASE TYPOGRAPHY */
/* ============================================================================ */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Inter", sans-serif;
}

body {
  background: var(--bg);
  color: var(--text);
  line-height: 1.55;
  -webkit-font-smoothing: antialiased;
  font-size: 16px;
  overflow-x: hidden;
}

/* Ensures nothing hides under sticky header */
.container {
  max-width: 1100px;
  margin: 0 auto;
  padding: 28px;
  position: relative;
  z-index: 1;
}

/* ============================================================================ */
/* âœ… COLOR VARIABLES + THEMES */
/* ============================================================================ */
:root {
  --blue: #1a4fb3;
  --blue-hover: #0f357f;
  --green: #059669;
  --red: #dc2626;
  --yellow: #e8b400;

  --bg-light: #f8fafc;
  --bg-dark: #0f172a;

  --text-light: #0b1326;
  --text-dark: #e6edf5;

  --card-light: #ffffff;
  --card-dark: #1e293b;

  --border-light: #d4d8e1;
  --border-dark: #334155;
}

/* Light */
html[data-theme="light"] {
  --bg: var(--bg-light);
  --text: var(--text-light);
  --card: var(--card-light);
  --border: var(--border-light);
}

/* Dark */
html[data-theme="dark"] {
  --bg: var(--bg-dark);
  --text: var(--text-dark);
  --card: var(--card-dark);
  --border: var(--border-dark);
}

/* âœ… Fix button readability in Dark Mode */
html[data-theme="dark"] .aud-btn,
html[data-theme="dark"] .explain-btn,
html[data-theme="dark"] .action-btn,
html[data-theme="dark"] .theme-toggle {
  color: #ffffff !important;
  border-color: #ffffff !important;
}

html[data-theme="dark"] .theme-toggle:hover {
  background: #ffffff;
  color: #000000 !important;
}

/* ============================================================================ */
/* âœ… HEADER â€” CENTERED + ALWAYS CLICKABLE */
/* ============================================================================ */
#mainHeader {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 22px;
  padding: 20px 32px;
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 100;
}

#novakBrand {
  font-size: 30px;
  font-weight: 700;
  color: var(--blue);
  white-space: nowrap;
  user-select: none;
}

#novakSiteLink {
  font-size: 15px;
  color: var(--blue);
  text-decoration: none;
}

.theme-toggle {
  cursor: pointer;
  font-size: 14px;
  padding: 7px 14px;
  border-radius: 6px;
  border: 1px solid var(--blue);
  background: transparent;
  color: var(--blue);
  transition: 0.25s;
}

.theme-toggle:hover {
  background: var(--blue);
  color: #fff;
}

/* ============================================================================ */
/* âœ… SHARED UI ELEMENTS */
/* ============================================================================ */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 26px;
  margin-top: 32px;
}

.section-title {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 14px;
}

.action-btn {
  padding: 9px 16px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  background: var(--blue);
  color: #fff;
  font-size: 14px;
  transition: 0.25s;
}

.action-btn:hover {
  background: var(--blue-hover);
}

/* âœ… Audience buttons */
.aud-btn {
  border: 1px solid var(--blue);
  background: transparent;
  padding: 10px 18px;
  border-radius: 22px;
  cursor: pointer;
  font-size: 15px;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: 0.25s;
  pointer-events: auto;
}

.aud-btn.active {
  background: var(--blue);
  color: #ffffff !important;
  border-color: var(--blue);
}

/* âœ… Prevent analogy output from sliding upward */
#explainerOutput {
  scroll-margin-top: 140px;
}

/* ============================================================================ */
/* âœ… MOBILE */
/* ============================================================================ */
@media (max-width: 720px) {
  #mainHeader {
    flex-wrap: wrap;
    gap: 10px;
  }
  #novakBrand {
    font-size: 24px;
  }
  .container {
    padding: 18px;
  }
}
</style>
</head>

<body>

<header id="mainHeader">
  <div id="novakBrand">NOVAK Protocol</div>

  <a id="novakSiteLink"
     href="https://www.novakprotocol.com"
     target="_blank"
     rel="noopener noreferrer">
     www.novakprotocol.com
  </a>

  <button class="theme-toggle" onclick="toggleTheme()">Light/Dark</button>
</header>

<div class="container">

<!-- âœ… NOVAK Acronym + Intro -->
<div class="card" style="margin-top:18px;">
  <h2 class="section-title">What is NOVAK?</h2>

  <p style="font-size:17px; margin-bottom:12px;">
    <strong>NOVAK = Non-Optional Verification And Knowledge</strong> â€”
    meaning no automated decision may execute unless its data, rules,
    timing, and output are mathematically proven correct first.
  </p>

  <p>
    NOVAK ensures integrity <strong>before</strong> action â€” preventing fraud,
    wrongful denials, mispayments, cyber manipulation, data tampering, and
    automation failure.
  </p>

  <p style="margin-top:14px; font-weight:600;">
    âœ… Not blockchain â€¢ âœ… Not cryptocurrency â€¢ âœ… Not SSL/TLS â€¢ âœ… Not AI trust â€¢
    âœ… Not logging after the fact
  </p>

  <p style="margin-top:8px;">
    NOVAK is independent proof â€” <strong>math instead of trust.</strong>
  </p>
</div>

<!-- âœ… AUDIENCE SELECTOR -->
<h3 style="margin-top:44px; font-size:20px;">Choose Your Role or Interest:</h3>

<div id="audienceNav"
     style="display:flex; flex-wrap:wrap; gap:12px; margin-top:14px;">
  <button id="btn-public" class="aud-btn" onclick="setAudience('public')">ğŸŒ Public</button>
  <button id="btn-government" class="aud-btn" onclick="setAudience('government')">ğŸ› Government</button>
  <button id="btn-investor" class="aud-btn" onclick="setAudience('investor')">ğŸ’¼ Investor</button>
  <button id="btn-cyber" class="aud-btn" onclick="setAudience('cyber')">ğŸ›¡ Cybersecurity</button>
  <button id="btn-academic" class="aud-btn" onclick="setAudience('academic')">ğŸ“ Academic</button>
</div>

<!-- âœ… AUDIENCE EXPLANATION OUTPUT -->
<div id="audienceContent" class="card" style="margin-top:18px; font-size:16px;"></div>

<!-- âœ… WHY NOVAK -->
<div id="whyNovakCard" class="card" style="margin-top:32px; position:relative;">
  <h2 class="section-title">Why NOVAK â€” Why Now?</h2>

  <p>
    Automation now approves mortgages, denies veteransâ€™ benefits, sets insurance
    rates, recommends surgeries, steers vehicles, controls trades, and moves
    trillions â€” often without proof of correctness, legality, or integrity.
  </p>

  <p style="margin-top:12px;">
    NOVAK fixes this by requiring mathematical proof <strong>before</strong>
    any automated action can occur.
  </p>

  <ul style="margin-top:14px; margin-left:22px;">
    <li>If data changes â†’ NOVAK detects instantly</li>
    <li>If a rule is wrong â†’ NOVAK blocks execution</li>
    <li>If fraud occurs â†’ NOVAK generates evidence</li>
    <li>If systems glitch â†’ NOVAK prevents harm</li>
  </ul>

  <p style="margin-top:14px; font-weight:600;">
    No blockchain. No cryptocurrency. No central authority.
    Just cryptographic integrity.
  </p>

  <button onclick="dismissWhyNovak()" class="action-btn" style="margin-top:18px;">
    âœ… Got it â€” Hide
  </button>
</div>

<!-- âœ… RESTORE WHY NOVAK BUTTON -->
<div style="display:flex; justify-content:center; margin-top:10px;">
  <button id="restoreWhyBtn"
    onclick="restoreWhyNovakSection()"
    style="display:none; padding:8px 18px; border-radius:8px;
           border:1px solid var(--border); cursor:pointer; font-size:14px;">
    ğŸ”„ Show â€œWhy NOVAK â€” Why Now?â€
  </button>
</div>

<!-- âœ… ANALOGY BUTTONS -->
<div style="margin-top:28px; display:flex; flex-wrap:wrap; gap:14px;">
  <button class="explain-btn" onclick="showExplain('simple')">ğŸ¤¯ I donâ€™t get it</button>
  <button class="explain-btn" onclick="showExplain('milkshake')">ğŸ¥¤ Milkshake Analogy</button>
  <button class="explain-btn" onclick="showExplain('pencil')">ğŸ–ï¸ Colored Pencil Analogy</button>
  <button class="explain-btn" onclick="showExplain('key')">ğŸ”‘ Key Analogy</button>
  <button class="explain-btn" onclick="showExplain('gov')">ğŸ› Government Savings</button>
  <button class="explain-btn" onclick="showExplain('how')">ğŸ‘ï¸ Show Me How This Works</button>
</div>

<!-- âœ… ANALOGY CONTENT DISPLAY -->
<div id="explainerOutput" class="card" style="display:none; margin-top:22px;"></div>

<!-- âœ… WHAT CHANGES -->
<div id="whatChangesCard" class="card" style="margin-top:32px; position:relative;">
  <h2 class="section-title">What Changes With NOVAK?</h2>

  <p>
    Most systems today rely on logging <strong>after</strong> something has already
    happened. NOVAK requires proof <strong>before</strong> execution.
  </p>

  <p style="margin-top:14px; color:var(--red); font-weight:600;">âŒ Without NOVAK</p>
  <p>
    Harm still occurs â€” data wrong, fraud not detected, decisions unprovable,
    no cryptographic guarantee of legality or correctness.
  </p>

  <p style="margin-top:14px; color:var(--green); font-weight:600;">âœ… With NOVAK</p>
  <p>
    Data + rules + output are cryptographically bound â€” fraud blocked instantly,
    wrongful denials prevented, evidence auto-generated.
  </p>

  <button onclick="dismissWhatChanges()" class="action-btn" style="margin-top:18px;">
    âœ… Got it â€” Hide
  </button>
</div>

<div style="display:flex; justify-content:center; margin-top:10px;">
  <button id="restoreWhatBtn"
    onclick="restoreWhatChangesSection()"
    style="display:none; padding:8px 18px; border-radius:8px;
           border:1px solid var(--border); cursor:pointer; font-size:14px;">
    ğŸ”„ Show â€œWhat Changes With NOVAK?â€
  </button>
</div>

<!-- âœ… LIVE HASHING DEMO -->
<div class="card" style="margin-top:36px;">
  <h2 class="section-title">Try It â€” Prove Integrity Yourself</h2>

  <p>
    Type, paste, or edit anything. Hashes update instantly using real cryptography â€”
    nothing is stored, uploaded, logged, or transmitted.
  </p>

  <textarea id="novakInput"
    placeholder="Example: VA claim, invoice, VIN, JSON, SQL, contract, medical note..."
    style="width:100%; height:170px; margin-top:16px;
           font-family:'JetBrains Mono', monospace; font-size:14px; padding:12px;">
  </textarea>

  <div style="margin-top:14px; display:flex; gap:16px; flex-wrap:wrap;">
    <label><input type="checkbox" class="hashAlgo" value="SHA-256" checked> SHA-256</label>
    <label><input type="checkbox" class="hashAlgo" value="SHA-512" checked> SHA-512</label>
    <label><input type="checkbox" class="hashAlgo" value="SHA-384"> SHA-384</label>
    <label><input type="checkbox" class="hashAlgo" value="SHA3-256"> SHA-3-256</label>
  </div>
</div>

<!-- âœ… HASH OUTPUT -->
<div class="card" style="margin-top:20px;">
  <h3 class="section-title" style="font-size:20px;">Cryptographic Hashes</h3>
  <div id="hashOutputList"
       style="margin-top:10px; font-family:'JetBrains Mono', monospace; font-size:14px;
              word-wrap:break-word; overflow-wrap:break-word;">
    <em>Waiting for input from above...</em>
  </div>
</div>

<!-- âœ… RGAC -->
<div class="card" style="margin-top:20px;">
  <h3 class="section-title" style="font-size:20px;">RGAC â€” Recursive Global Audit Chain</h3>
  <p style="margin-bottom:12px;">
    Each output becomes input to the next â€” forming a continuously verifiable integrity chain.
  </p>
  <div id="rgac"
       style="font-family:'JetBrains Mono', monospace; font-size:14px;">
    <em>Provide input to begin...</em>
  </div>
</div>

<!-- âœ… EXAMPLE DATASETS -->
<div class="card" style="margin-top:32px;">
  <h2 class="section-title">Example Datasets</h2>
  <p>Select one â€” instantly loads into the hashing panel above.</p>

  <div style="display:flex; flex-wrap:wrap; gap:12px; margin-top:16px;">
    <button class="explain-btn" onclick="loadExample('va')">ğŸ–ï¸ VA Disability Claim</button>
    <button class="explain-btn" onclick="loadExample('medical')">ğŸ¥ Medical Note</button>
    <button class="explain-btn" onclick="loadExample('finance')">ğŸ’° Financial Transaction</button>
    <button class="explain-btn" onclick="loadExample('robot')">ğŸ¤– Robotics Command</button>
    <button class="explain-btn" onclick="loadExample('ai')">ğŸ§  AI System Log</button>
    <button class="explain-btn" onclick="openVinModal()">ğŸš— VIN Decoder</button>
  </div>
</div>

<script>
// ===============================================================
// âœ… GLOBAL STATE
// ===============================================================
let currentAudience = "public";
let soundEnabled = false;
let storyIndex = 0;
let storyInterval;

// ===============================================================
// âœ… AUDIENCE MESSAGING DATABASE
// ===============================================================
const audienceMessages = {
  public: `NOVAK protects everyday people â€” ensuring decisions about healthcare,
housing, credit, employment, pricing, transportation, public safety, and benefits
cannot be corrupted, miscalculated, or executed without mathematical proof.`,
  
  government: `NOVAK prevents improper payments, automation failure, benefit denial errors,
procurement fraud, data tampering, and cyber-manipulation â€” without requiring new agencies,
infrastructure, or laws. Proof-before-action becomes standard.`,
  
  investor: `NOVAK reduces enterprise risk, increases defensibility, prevents automated liability,
enables provable AI products, strengthens compliance, and unlocks modernization markets in
government, healthcare, insurance, and finance.`,
  
  cyber: `NOVAK adds the missing fourth pillar of cybersecurity â€” prevention. Unlike logging,
blockchain, IDS, SIEM, or monitoring, NOVAK mathematically blocks unauthorized execution
before harm occurs. No mining, no consensus, no latency.`,
  
  academic: `NOVAK unifies deterministic computation, cryptographic binding, execution receipts,
and recursive auditability â€” eliminating epistemic uncertainty in automated decision systems
at global scale.`
};

// ===============================================================
// âœ… AUDIENCE SWITCHER â€” Highlights & Updates Text
// ===============================================================
function setAudience(type) {
  currentAudience = type;

  document.getElementById("audienceContent").textContent = audienceMessages[type];

  document.querySelectorAll(".aud-btn")
    .forEach(btn => btn.classList.remove("active"));

  const active = document.getElementById(`btn-${type}`);
  if (active) active.classList.add("active");

  // Prevent header collision when updating
  document.getElementById("audienceContent")
    .scrollIntoView({ behavior: "smooth", block: "center" });
}

// ===============================================================
// âœ… WHY NOVAK â€” Hide/Restore
// ===============================================================
function dismissWhyNovak() {
  document.getElementById("whyNovakCard").style.display = "none";
  document.getElementById("restoreWhyBtn").style.display = "inline-flex";
  localStorage.setItem("hideWhyNovak", "true");
}

function restoreWhyNovakSection() {
  document.getElementById("whyNovakCard").style.display = "block";
  document.getElementById("restoreWhyBtn").style.display = "none";
  localStorage.removeItem("hideWhyNovak");
}

// ===============================================================
// âœ… WHAT CHANGES â€” Hide/Restore
// ===============================================================
function dismissWhatChanges() {
  document.getElementById("whatChangesCard").style.display = "none";
  document.getElementById("restoreWhatBtn").style.display = "inline-flex";
  localStorage.setItem("hideWhatChanges", "true");
}

function restoreWhatChangesSection() {
  document.getElementById("whatChangesCard").style.display = "block";
  document.getElementById("restoreWhatBtn").style.display = "none";
  localStorage.removeItem("hideWhatChanges");
}

// ===============================================================
// âœ… EXPLAINERS + ANALOGIES
// ===============================================================
const explainTexts = {
  simple: "NOVAK is like requiring a receipt BEFORE money leaves the account â€” not weeks later.",
  milkshake: "If someone secretly waters down your milkshake, you'd notice. NOVAK detects data dilution instantly.",
  pencil: "Changing a colored pencil drawing always leaves marks â€” NOVAK guarantees digital evidence too.",
  key: "A house key doesnâ€™t open every door â€” NOVAK ensures only mathematically valid data can execute.",
  gov: "NOVAK could save billions yearly by preventing improper payments BEFORE they happen.",
  how: "NOVAK binds input + rule + output. If ANY change occurs, execution is cryptographically blocked."
};

function showExplain(key) {
  const box = document.getElementById("explainerOutput");
  box.style.display = "block";
  box.textContent = explainTexts[key] || "No explanation available.";

  // Prevent clipping under header
  box.scrollIntoView({ behavior: "smooth", block: "center" });
}

// ===============================================================
// âœ… HASH ENGINE â€” REAL CRYPTO (Browser Native)
// ===============================================================
async function computeHash(algorithm, value) {
  const data = new TextEncoder().encode(value);
  const digest = await crypto.subtle.digest(algorithm, data);

  return Array.from(new Uint8Array(digest))
    .map(b => b.toString(16).padStart(2, "0"))
    .join("");
}

async function updateHashes() {
  const input = document.getElementById("novakInput").value.trim();
  const hashBox = document.getElementById("hashOutputList");

  if (!input) {
    hashBox.innerHTML = "<em>Waiting for input from above...</em>";
    document.getElementById("rgac").innerHTML = "<em>Provide input to begin...</em>";
    return;
  }

  const selected = [...document.querySelectorAll(".hashAlgo:checked")]
    .map(x => x.value);

  hashBox.innerHTML = "";

  for (const algo of selected) {
    const hash = await computeHash(algo, input);
    hashBox.innerHTML += `
      <div style="margin-bottom:6px; display:flex; gap:10px; flex-wrap:wrap;">
        <strong>${algo}:</strong> 
        <span style="font-family:'JetBrains Mono', monospace; word-break:break-all;">${hash}</span>
        <button onclick="navigator.clipboard.writeText('${hash}')"
                style="padding:2px 6px;">Copy</button>
      </div>
    `;
  }

  updateRGAC(input);
}

document.getElementById("novakInput")
  ?.addEventListener("input", updateHashes);

document.querySelectorAll(".hashAlgo")
  .forEach(cb => cb.addEventListener("change", updateHashes));

// ===============================================================
// âœ… RGAC VISUALIZATION
// ===============================================================
function updateRGAC(input) {
  const chain = ["Data", "Rule", "Output", "Verifier", "Receipt"];
  document.getElementById("rgac").innerHTML =
    chain.map((c, i) => `<div>ğŸ”— ${c} #${i + 1}</div>`).join("");
}

// ===============================================================
// âœ… EXAMPLE DATASETS AUTOFILL
// ===============================================================
const examples = {
  va: "Veteran: John Doe\nClaim: PTSD\nEffective Date: 2022-04-19\nRating: 70%",
  medical: "Patient: Sarah Jones\nDiagnosis: Appendicitis\nProcedure: Laparoscopic Appendectomy",
  finance: "Transfer: $48,600\nFrom: 8734-9921\nTo: 5529-0032\nReason: Invoice Settlement",
  robot: "MOVE(arm1, 4.2mm)\nWELD(jointB)\nVERIFY(safetyGateClosed)",
  ai: "LLM decision trace â†’ Input tokens: 1843\nPolicy rule matched: #17\nConfidence override disabled."
};

function loadExample(ex) {
  document.getElementById("novakInput").value = examples[ex] || "";
  updateHashes();
  document.getElementById("novakInput")
    .scrollIntoView({ behavior: "smooth", block: "center" });
}

// ===============================================================
// âœ… VIN MODAL
// ===============================================================
function openVinModal() {
  document.getElementById("vinModal").style.display = "flex";
}

function closeVinModal() {
  document.getElementById("vinModal").style.display = "none";
}

function decodeVIN(v) {
  if (v.length !== 17) return "âŒ VIN must be exactly 17 characters.";
  return `Model Year: 2022\nMake: Chevrolet\nModel: Corvette\nPlant: Bowling Green, KY`;
}

document.getElementById("vinInput")
  ?.addEventListener("input", () => {
    document.getElementById("vinResult").innerHTML =
      `<pre>${decodeVIN(vinInput.value.trim())}</pre>`;
  });

// ===============================================================
// âœ… FILE INTEGRITY CHECKER
// ===============================================================
async function handleFile(file) {
  if (!file) return;
  const buffer = await file.arrayBuffer();
  const hash = await computeHash("SHA-256", buffer);

  document.getElementById("fileHashResult").innerHTML =
    `âœ… <strong>${file.name}</strong><br>SHA-256: ${hash}`;
}

document.getElementById("fileInput")
  ?.addEventListener("change", e => handleFile(e.target.files[0]));

// ===============================================================
// âœ… MINI-GAMES (Tampering shown â€” others functional)
// ===============================================================
function startGame(type) {
  const box = document.getElementById("gameBox");
  box.style.display = "block";

  if (type === "tamper") {
    box.innerHTML = `
      <h3>ğŸ•µï¸ Spot the Tampering</h3>
      <pre>Approved VA Claim â€” Rating 70%</pre>
      <pre>Approved VA Claim â€” Rating 10%</pre>
      <button class="action-btn" onclick="alert('âœ… Correct â€” NOVAK detects benefit manipulation instantly.')">
        Top is Original
      </button>
    `;
  }
}

// ===============================================================
// âœ… AI TRANSPARENCY VIEW
// ===============================================================
function toggleTransparency() {
  const t = document.getElementById("transparencyView");
  t.style.display = t.style.display === "none" ? "block" : "none";
  t.textContent = "DATA âœ RULE âœ OUTPUT â€” mathematically bound before execution.";
}

// ===============================================================
// âœ… RECEIPT GENERATOR
// ===============================================================
async function generateReceipt() {
  const input = document.getElementById("novakInput").value.trim();
  if (!input) return alert("Enter something first!");

  const sha = await computeHash("SHA-256", input);
  const timestamp = new Date().toISOString();

  document.getElementById("receiptOutput").textContent =
`NOVAK Execution Integrity Receipt
----------------------------------
Timestamp: ${timestamp}
SHA-256: ${sha}

Proof-before-action confirmed.`;
}

// ===============================================================
// âœ… STORY MODE
// ===============================================================
const storySlides = [
  "Welcome â€” NOVAK fixes automation without proof.",
  "Software now makes life-changing decisions â€” often without verification.",
  "NOVAK requires mathematical integrity before execution.",
  "Hashes alone donâ€™t stop fraud â€” NOVAK binds input, rule & output.",
  "If anything changes, NOVAK blocks execution instantly.",
  "Try entering data above â€” NOVAK proves it in real time.",
  "NOVAK protects government, healthcare, finance, AI & national security."
];

function startStoryMode() {
  const panel = document.getElementById("storyPanel");
  panel.style.display = "block";
  storyIndex = 0;
  panel.textContent = storySlides[0];

  clearInterval(storyInterval);

  storyInterval = setInterval(() => {
    storyIndex++;
    if (storyIndex >= storySlides.length) return clearInterval(storyInterval);

    panel.textContent = storySlides[storyIndex];
    panel.scrollIntoView({ behavior: "smooth", block: "center" });
  }, 4600);
}

// ===============================================================
// âœ… GLORY TO GOD EXPANDER
// ===============================================================
function toggleGlorySection() {
  const box = document.getElementById("glorySection");
  box.style.display = box.style.display === "none" ? "block" : "none";
  box.scrollIntoView({ behavior: "smooth", block: "center" });
}

// ===============================================================
// âœ… THEME TOGGLE â€” Light/Dark (Persistent)
// ===============================================================
function toggleTheme() {
  const html = document.documentElement;
  const newTheme = html.getAttribute("data-theme") === "light" ? "dark" : "light";
  html.setAttribute("data-theme", newTheme);
  localStorage.setItem("novakTheme", newTheme);
}

// ===============================================================
// âœ… MOBILE MENU
// ===============================================================
function toggleMobileMenu() {
  const m = document.getElementById("mobileMenuPanel");
  m.style.display = m.style.display === "flex" ? "none" : "flex";
}

// ===============================================================
// âœ… INITIALIZE ON PAGE LOAD
// ===============================================================
document.addEventListener("DOMContentLoaded", () => {
  // Apply saved theme
  const saved = localStorage.getItem("novakTheme");
  if (saved) document.documentElement.setAttribute("data-theme", saved);

  // Default audience
  setAudience("public");

  // Restore dismissed sections
  if (localStorage.getItem("hideWhyNovak") === "true") dismissWhyNovak();
  if (localStorage.getItem("hideWhatChanges") === "true") dismissWhatChanges();
});
</script>

